!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o=function(){function t(){}return t.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1));i=[t[n],t[e]],t[e]=i[0],t[n]=i[1]}return t;var i},t.rand=function(e){for(var n=[],i=0;i<e;i++){for(var o=[],r=0;r<e;r++)i!=r&&o.push(r);n[i]=t.shuffle(o)}return n},t.allDifferent=function(t){for(var e=0;e<t.length;e++)if(t.indexOf(t[e])!==e)return!1;return!0},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t}();!function(t){t[t.Initial=0]="Initial",t[t.MakeProposal=1]="MakeProposal",t[t.FindRotation=2]="FindRotation",t[t.Delete=3]="Delete",t[t.Result=4]="Result",t[t.Finish=5]="Finish",t[t.Unsolvable=6]="Unsolvable"}(i||(i={}));var r,s=function(){return function(t,e,n,i,o){this.status=t,this.table=e,this.proposals=n,this.rotation=i,this.deletion=o}}();!function(t){t.Running_1="Phase 1 running",t.Running_2="Phase 2 running",t.Solved="solved",t.Unsolvable="unsolvable"}(r||(r={}));var a=function(){function t(t){this.status=r.Running_1,this.table=t,this.proposals=[];for(var e=0;e<t.length;e++)this.proposals.push(null);this.history=[]}return t.prototype.getHistory=function(){return this.history},t.prototype.getStatus=function(){return this.status},t.prototype.checkStatus=function(){var t=!0;this.status==r.Running_1&&null==this.getFreePerson()&&(this.status=r.Running_2);for(var e=0;e<this.table.length;e++)this.table[e].length>1&&(t=!1);return t&&(this.status=r.Solved),this.status},t.prototype.getFreePerson=function(){for(var t=0;t<this.proposals.length;t++)if(null===this.proposals[t])return t;return null},t.prototype.getPerson=function(){for(var t=0;t<this.table.length;t++)if(this.table[t].length>1)return t;return null},t.prototype.firstOf=function(t){return this.table[t][0]},t.prototype.secondOf=function(t){return this.table[t][1]},t.prototype.lastOf=function(t){return this.table[t][this.table[t].length-1]},t.prototype.nextOf=function(t){return this.lastOf(this.secondOf(t))},t.prototype.removePair=function(t,e){if(this.table[t].splice(this.table[t].indexOf(e),1),this.table[e].splice(this.table[e].indexOf(t),1),0==this.table[t].length||0==this.table[e].length)throw this.status=r.Unsolvable,new Error("empty preferencelist, no stable matching possible")},t.prototype.removePairs=function(t){var e=this;t.forEach(function(t){e.removePair(t[0],t[1])})},t.prototype.findAllAfter=function(t,e){for(var n=[],i=this.table[t].indexOf(e)+1;i<this.table[t].length;)n.push([t,this.table[t][i]]),i++;return n},t.prototype.propose=function(t,e){var n=this.proposals.indexOf(e);-1!=n&&(this.proposals[n]=null),this.proposals[t]=e},t.prototype.findRotation=function(){for(var t=[],e=[],n=this.getPerson();-1===t.indexOf(n);)t.push(n),n=this.nextOf(n);e.push([n,this.firstOf(n)]);for(var i=t.pop();i!=n;)e.unshift([i,this.firstOf(i)]),i=t.pop();return e},t.prototype.findRotationVictims=function(t){for(var e=[],n=t.length,i=0;i<n;i++)e=e.concat(this.findAllAfter(t[(i+1)%n][1],t[i][0]));return e},t.prototype.print=function(){for(var t=this.table,e="",n=0;n<t.length;n++){e+=n+"["+(null===this.proposals[n]?"-":this.proposals[n])+"]| ";for(var i=0;i<t[n].length;i++)e+=t[n][i]+"  ";e+="\n"}console.log(e)},t.prototype.solve=function(){try{for(this.history.push(new s(i.Initial,o.clone(this.table),o.clone(this.proposals),null,null));this.checkStatus()===r.Running_1;){var t=this.getFreePerson(),e=this.firstOf(t);this.propose(t,e),this.history.push(new s(i.MakeProposal,o.clone(this.table),o.clone(this.proposals),void 0,void 0));var n=this.findAllAfter(e,t);this.history.push(new s(i.Delete,o.clone(this.table),o.clone(this.proposals),void 0,n)),this.removePairs(n),this.history.push(new s(i.Result,o.clone(this.table),o.clone(this.proposals),void 0,void 0))}for(;this.checkStatus()===r.Running_2;){var a=this.findRotation();this.history.push(new s(i.FindRotation,o.clone(this.table),void 0,a,void 0));n=this.findRotationVictims(a);this.history.push(new s(i.Delete,o.clone(this.table),void 0,a,n)),this.removePairs(n),this.history.push(new s(i.Result,o.clone(this.table),void 0,void 0,void 0))}return this.history.push(new s(i.Finish,o.clone(this.table),void 0,void 0,void 0)),this.table}catch(t){return this.history.push(new s(i.Unsolvable,o.clone(this.table),void 0,void 0,void 0)),console.warn(t.message),null}},t.createRandom=function(e){return new t(o.rand(e))},t}(),h=function(){function t(){this.dictionary=[]}return t.prototype.getDictionary=function(){return this.dictionary},t.prototype.lookUpOrAdd=function(t){var e=this.dictionary.indexOf(t);return-1===e?(this.dictionary.push(t),this.dictionary.length-1):e},t.prototype.parse=function(t,e){t=t.trim().replace(/\t+/g," ").replace(/  +/g," ").replace(/\r\n/g,"\n"),e.value=t;var n=t.split("\n"),i=[];this.n=n.length;for(var r=0,s=n;r<s.length;r++){var a=[],h=s[r].trim().split(" ").map(function(t){return t.trim()});if(h.length-1!=this.n)throw new Error("wrong number of elements");if(!o.allDifferent(h))throw new Error("duplicated value in this row");var l=this.lookUpOrAdd(h[0]);if("|"!=h[1])throw new Error("invalid syntax");h.shift(),h.shift();for(var c=0,u=h;c<u.length;c++){var d=u[c];a.push(this.lookUpOrAdd(d))}i[l]=a}if(this.dictionary.length!==this.n)throw new Error("invalid table");return i},t}(),l=function(){return function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.value=t,this.d=e,this.r=n,this.c=i}}(),c=function(){function t(t,e,n){void 0===t&&(t=document.createElement("div")),void 0===e&&(e=document.createElement("table")),void 0===n&&(n=document.createElement("nav"));var i=this;this.controls=t,this.target=e,this.navigation=n,this.buttonLeft=document.createElement("button"),this.buttonRight=document.createElement("button"),this.pageNumber=document.createElement("span"),this.buttonLeft.textContent="<",this.buttonRight.textContent=">",this.pageNumber.textContent="0",this.checkbox=document.createElement("input"),this.checkbox.type="checkbox",this.controls.appendChild(this.buttonLeft),this.controls.appendChild(this.pageNumber),this.controls.appendChild(this.buttonRight),this.controls.appendChild(this.checkbox),this.controls.appendChild(document.createTextNode("show deleted pairs")),this.buttonLeft.addEventListener("click",function(){i.showPrev()}),this.buttonRight.addEventListener("click",function(){i.showNext()}),this.checkbox.addEventListener("click",function(){i.toggleShowDeletedPairs()}),this.navigation.addEventListener("click",function(t){i.navClicked(t)}),document.addEventListener("keydown",function(t){!i.history||37!=t.keyCode&&38!=t.keyCode?!i.history||39!=t.keyCode&&40!=t.keyCode||i.showNext():i.showPrev()})}return t.prototype.setDictionary=function(t){this.dictionary=t},t.prototype.lookUp=function(t){return null!=this.dictionary&&this.dictionary.length>t?this.dictionary[t]:t.toString()},t.prototype.setHistory=function(t){this.history=t,this.currentIndex=0,t.length>0&&(this.dimensions=t[0].table.length,this.setUp(),this.createNav())},t.prototype.setTarget=function(t){this.target=t},t.prototype.setUp=function(){this.target.innerHTML="";for(var t=document.createDocumentFragment(),e=document.createElement("tr"),n=document.createElement("td"),i=0;i<this.dimensions;i++){var o=e.cloneNode(!0),r=n.cloneNode(!0);r.classList.add("head"),r.innerHTML=i.toString(),o.appendChild(r);var s=n.cloneNode(!0);s.innerHTML=" | ",o.appendChild(s);for(var a=0;a<this.dimensions-1;a++){var h=n.cloneNode(!0);h.innerHTML="-",o.appendChild(h)}t.appendChild(o)}this.target.appendChild(t)},t.prototype.createNav=function(){var t=document.createDocumentFragment(),e=document.createElement("div");e.classList.add("navElement");for(var n=0;n<this.history.length;n++){var i=this.history[n],o=e.cloneNode(!0);o.innerHTML+="<span>"+(n+1).toString()+". step</span><span>"+i.status+"</span>",o.classList.add("status-"+i.status),o.setAttribute("index",n.toString()),t.appendChild(o)}this.navigation.innerHTML="",this.navigation.appendChild(t)},t.prototype.render=function(){var t=this,e=this.history[this.currentIndex],n=this.computeDiff(e);this.clearDecorations();for(var i=0;i<n.length;i++){var o=this.getElement(i);o.textContent=this.lookUp(i),void 0!=e.proposals&&null!=e.proposals[i]&&(o.innerHTML+="<span class='sub'> &#x1F48D;"+this.lookUp(e.proposals[i])+"</span>");for(var r=0;r<n[i].length;r++){var s=n[i][r],a=this.getElement(i,r);a.textContent=this.lookUp(s.value),s.r&&a.classList.add("highlight-3"),s.c&&a.classList.add("highlight-2"),s.d&&a.classList.add("dead")}}null!=e.rotation&&e.rotation.forEach(function(e){t.getElement(e[0]).classList.add("highlight-3")}),this.renderPager()},t.prototype.clearDecorations=function(){for(var t=this.target.querySelectorAll("td"),e=[].slice.call(t),n=0;n<e.length;n++)e[n].classList.remove("dead"),e[n].classList.remove("highlight-1"),e[n].classList.remove("highlight-2"),e[n].classList.remove("highlight-3"),e[n].classList.remove("highlight-4")},t.prototype.navClicked=function(t){for(var e=t.target;!e.classList.contains("navElement")&&"NAV"!=e.nodeName;)e=e.parentElement;e.classList.contains("navElement")&&(this.currentIndex=parseInt(e.getAttribute("index")),this.render())},t.prototype.showPrev=function(){this.currentIndex>0&&(this.currentIndex--,this.render())},t.prototype.showNext=function(){this.currentIndex+1<this.history.length&&(this.currentIndex++,this.render())},t.prototype.renderPager=function(){var t=this.history.length,e=this.currentIndex+1;this.pageNumber.innerHTML=e+" / "+t,this.buttonLeft.disabled=1==e,this.buttonRight.disabled=e==t;var n=this.navigation.querySelector(".navElement.active");n&&n.classList.remove("active"),this.navigation.querySelector(".navElement[index='"+this.currentIndex+"']").classList.add("active")},t.prototype.toggleShowDeletedPairs=function(){this.checkbox.checked?this.target.classList.add("showDeleted"):this.target.classList.remove("showDeleted")},t.prototype.getElement=function(t,e){void 0===e&&(e=-1);var n="";return t+=1,n=-1==e?"tr:nth-child("+t+") td.head":"tr:nth-child("+t+") td:nth-child("+(e+=3)+")",this.target.querySelector(n)},t.prototype.computeDiff=function(t){var e=[],n=this.history[0];if(t.status==i.Initial)for(var o=0;o<t.table.length;o++){for(var r=t.table[o],s=[],a=0;a<r.length;a++)s.push(new l(r[a]));e.push(s)}else{var h=n.table,c=t.table,u=function(n){for(var i=h[n],o=c[n],r=[],s=function(e){var s=i[e];if(-1===o.indexOf(s))r.push(new l(s,!0));else{var a=new l(s);void 0!==t.rotation&&t.rotation.forEach(function(t){t[0]===n&&h[t[0]].indexOf(t[1])===e&&(a.r=!0)}),void 0!==t.deletion&&t.deletion.forEach(function(t){(t[0]===n&&h[t[0]].indexOf(t[1])===e||t[1]===n&&h[t[1]].indexOf(t[0])===e)&&(a.c=!0)}),r.push(a)}},a=0;a<i.length;a++)s(a);e.push(r)};for(o=0;o<h.length;o++)u(o)}return e},t}(),u=function(){function t(t,e,n){var i=this;this.controls=t,this.setupWindow=e,this.demoWindow=n,this.textarea=e.querySelector("textarea"),t.querySelector("button").addEventListener("click",function(){i.toggleWindows()}),e.querySelector("#createButton").addEventListener("click",function(){i.startDemo()}),this.renderer=new c(n.querySelector("#controls"),n.querySelector("#demoTarget"),n.querySelector("nav"))}return t.prototype.toggleWindows=function(){this.setupWindow.classList.contains("closed")?(this.setupWindow.classList.remove("closed"),this.demoWindow.classList.add("closed")):(this.setupWindow.classList.add("closed"),this.demoWindow.classList.remove("closed"))},t.prototype.startDemo=function(){try{var t=this.textarea.value;if(-1===t.trim().indexOf(" ")){var e=parseInt(t.trim());this.preferenceList=a.createRandom(e),this.renderer.setDictionary(null)}else{var n=new h,i=n.parse(t,this.textarea),o=n.getDictionary();this.preferenceList=new a(i),this.renderer.setDictionary(o)}this.preferenceList.solve();var r=this.preferenceList.getHistory();this.renderer.setHistory(r),this.toggleWindows(),this.renderer.render()}catch(t){console.warn("fehler"),console.warn(t)}},t}();let d;window.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("controls"),e=document.getElementById("setupWindow"),n=document.getElementById("demoWindow");d=new u(t,e,n)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9zbmFwc2hvdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJlZmVyZW5jZWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmluZ3BhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvb3JkaW5hdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNuYXBzaG90U3RhdHVzIiwiVXRpbHMiLCJzaHVmZmxlIiwiYSIsImxlbmd0aCIsImoiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfYSIsInJhbmQiLCJyZXN1bHQiLCJhcnIiLCJwdXNoIiwiYWxsRGlmZmVyZW50IiwiaW5kZXhPZiIsImNsb25lIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiU3RhdHVzIiwic3RhdHVzIiwidGFibGUiLCJwcm9wb3NhbHMiLCJyb3RhdGlvbiIsImRlbGV0aW9uIiwidGhpcyIsIlByZWZlcmVuY2VMaXN0IiwiUnVubmluZ18xIiwiaGlzdG9yeSIsImdldEhpc3RvcnkiLCJnZXRTdGF0dXMiLCJjaGVja1N0YXR1cyIsImFsbE9uZSIsImdldEZyZWVQZXJzb24iLCJSdW5uaW5nXzIiLCJTb2x2ZWQiLCJnZXRQZXJzb24iLCJmaXJzdE9mIiwic2Vjb25kT2YiLCJsYXN0T2YiLCJuZXh0T2YiLCJyZW1vdmVQYWlyIiwieCIsInkiLCJzcGxpY2UiLCJVbnNvbHZhYmxlIiwiRXJyb3IiLCJyZW1vdmVQYWlycyIsIl90aGlzIiwiZm9yRWFjaCIsInBhaXIiLCJmaW5kQWxsQWZ0ZXIiLCJ5SW5YIiwicHJvcG9zZSIsImZpbmRSb3RhdGlvbiIsInN0YWNrIiwicDIiLCJwb3AiLCJ1bnNoaWZ0IiwiZmluZFJvdGF0aW9uVmljdGltcyIsImNvbmNhdCIsInByaW50IiwiY29uc29sZSIsImxvZyIsInNvbHZlIiwic25hcHNob3QiLCJJbml0aWFsIiwidXRpbHMiLCJNYWtlUHJvcG9zYWwiLCJ1bmRlZmluZWQiLCJjYW5kaWRhdGVzIiwiRGVsZXRlIiwiUmVzdWx0IiwiRmluZFJvdGF0aW9uIiwiRmluaXNoIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsImNyZWF0ZVJhbmRvbSIsIlN0cmluZ1BhcnNlciIsImRpY3Rpb25hcnkiLCJnZXREaWN0aW9uYXJ5IiwibG9va1VwT3JBZGQiLCJzdHIiLCJ0ZXh0YXJlYSIsInRyaW0iLCJyZXBsYWNlIiwic3BsaXQiLCJfaSIsImFycl8xIiwicmVzdWx0Um93Iiwic3BsaXR0ZWRSb3ciLCJtYXAiLCJmaXJzdCIsInNoaWZ0Iiwic3BsaXR0ZWRSb3dfMSIsImVudHJ5IiwiQ2VsbCIsIlJlbmRlcmVyIiwiY29udHJvbHMiLCJ0YXJnZXQiLCJuYXZpZ2F0aW9uIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYnV0dG9uTGVmdCIsImJ1dHRvblJpZ2h0IiwicGFnZU51bWJlciIsInRleHRDb250ZW50IiwiY2hlY2tib3giLCJ0eXBlIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93UHJldiIsInNob3dOZXh0IiwidG9nZ2xlU2hvd0RlbGV0ZWRQYWlycyIsImUiLCJuYXZDbGlja2VkIiwia2V5Q29kZSIsInNldERpY3Rpb25hcnkiLCJsb29rVXAiLCJpbmRleCIsInRvU3RyaW5nIiwic2V0SGlzdG9yeSIsImN1cnJlbnRJbmRleCIsImRpbWVuc2lvbnMiLCJzZXRVcCIsImNyZWF0ZU5hdiIsInNldFRhcmdldCIsImlubmVySFRNTCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInJvd09yaWdpbmFsIiwiY2VsbE9yaWdpbmFsIiwicm93IiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwic2VwYXJhdG9yIiwiY2VsbCIsIm9yaWdpbmFsIiwiZGl2Iiwic2V0QXR0cmlidXRlIiwicmVuZGVyIiwiZGlmZiIsImNvbXB1dGVEaWZmIiwiY2xlYXJEZWNvcmF0aW9ucyIsImhlYWRDZWxsIiwiZ2V0RWxlbWVudCIsInRyIiwicmVuZGVyUGFnZXIiLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjZWxsc0FycmF5Iiwic2xpY2UiLCJyZW1vdmUiLCJlbCIsImNvbnRhaW5zIiwibm9kZU5hbWUiLCJwYXJlbnRFbGVtZW50IiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJtYXgiLCJjdXJyZW50IiwiZGlzYWJsZWQiLCJhY3RpdmUiLCJxdWVyeVNlbGVjdG9yIiwiY2hlY2tlZCIsImNvbCIsInF1ZXJ5U3RyaW5nIiwiaW5pdGlhbCIsImVyZyIsIm9yaWdpbmFsVGFibGVfMSIsImN1cnJlbnRUYWJsZSIsIm9yaWdpbmFsUm93IiwiY3VycmVudFJvdyIsIm9yaWdpbmFsQ2VsbCIsImNlbGxfMSIsIkNvb3JkaW5hdG9yIiwic2V0dXBXaW5kb3ciLCJkZW1vV2luZG93IiwidG9nZ2xlV2luZG93cyIsInN0YXJ0RGVtbyIsInJlbmRlcmVyIiwidGV4dCIsInByZWZlcmVuY2VMaXN0IiwicHJlZmVyZW5jZWxpc3QiLCJzdHJpbmdQYXJzZXIiLCJzdHJpbmdwYXJzZXIiLCJkaWN0IiwiaGlzdG9yeV8xIiwic3JjX2Nvb3JkaW5hdG9yIiwid2luZG93IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb29yZGluYXRvciJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFG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LElBQUl0QixFQUFJd0ssU0FBU3dCLEVBQUtuRyxRQUN0QjVELEtBQUtnSyxlQUFpQkMsRUFBZTVHLGFBQWF0RixHQUNsRGlDLEtBQUs4SixTQUFTaEUsY0FBYyxVQUN6QixDQUVILElBQUlvRSxFQUFlLElBQUlDLEVBQ25CdkssRUFBUXNLLEVBQWExSyxNQUFNdUssRUFBTS9KLEtBQUsyRCxVQUN0Q3lHLEVBQU9GLEVBQWExRyxnQkFDeEJ4RCxLQUFLZ0ssZUFBaUIsSUFBSUMsRUFBZXJLLEdBQ3pDSSxLQUFLOEosU0FBU2hFLGNBQWNzRSxHQUloQ3BLLEtBQUtnSyxlQUFlekgsUUFDcEIsSUFBSThILEVBQVVySyxLQUFLZ0ssZUFBZTVKLGFBRWxDSixLQUFLOEosU0FBUzVELFdBQVdtRSxHQUN6QnJLLEtBQUs0SixnQkFDTDVKLEtBQUs4SixTQUFTeEMsU0FFaEIsTUFBTTNCLEdBQ0p0RCxRQUFRYyxLQUFLLFVBQ2JkLFFBQVFjLEtBQUt3QyxLQUl6QjhELEVBckZBLEdDTkEsSUFBQWEsRUFFQUMsT0FBQWhGLGlCQUFBLDhCQUVBLElBQUFiLEVBQUFHLFNBQUEyRixlQUFBLFlBQ0FkLEVBQUE3RSxTQUFBMkYsZUFBQSxlQUNBYixFQUFBOUUsU0FBQTJGLGVBQUEsY0FFQUYsRUFBQSxJQUFBRyxFQUFBL0YsRUFBQWdGLEVBQUFDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsInR5cGUgQ2FsbGJhY2sgPSAoczogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuLyoqXHJcbiAgICBVdGlsaXR5IGNsYXNzIGZvciBzdGFibGUgcm9vbW1hdGVzXHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcclxuXHJcbiAgICBzdGF0aWMgc2h1ZmZsZShhIDogQXJyYXk8YW55PikgOiBBcnJheTxhbnk+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gYS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuICAgICAgICAgICAgW2FbaV0sIGFbal1dID0gW2Fbal0sIGFbaV1dO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmFuZChuIDogbnVtYmVyKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbjsgaisrKSB7XHJcbiAgICAgICAgICBpZiAoaSA9PSBqKSBjb250aW51ZTtcclxuICAgICAgICAgIGFyci5wdXNoKGopO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgcmVzdWx0W2ldID0gVXRpbHMuc2h1ZmZsZShhcnIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhbGxEaWZmZXJlbnQoYXJyOiBBcnJheTxhbnk+KSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChhcnIuaW5kZXhPZihhcnJbaV0pICE9PSBpKSByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2xvbmUoYXJyIDogYW55KSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJyKSlcclxuICAgIH1cclxuXHJcbn1cclxuIiwiXHJcbmV4cG9ydCBlbnVtIFNuYXBzaG90U3RhdHVzIHtcclxuICAgIEluaXRpYWwsXHJcbiAgICBNYWtlUHJvcG9zYWwsXHJcbiAgICBGaW5kUm90YXRpb24sXHJcbiAgICBEZWxldGUsXHJcbiAgICBSZXN1bHQsXHJcbiAgICBGaW5pc2gsXHJcbiAgICBVbnNvbHZhYmxlXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBhIHNuYXBzaG90IGluc3RhbmNlIHN0b3JlcyBhIHN0YXRlIG9mIGEgcHJlZmVyZW5jZWxpc3RcclxuICogYW5kIGlzIHJlbmRlcmVkIGFmdGVyd2FyZHNcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNuYXBzaG90IHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdGF0dXM6IFNuYXBzaG90U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIHRhYmxlOiBBcnJheTxBcnJheTxudW1iZXI+PixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBwcm9wb3NhbHM6IEFycmF5PG51bWJlcj4sXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgcm90YXRpb246IEFycmF5PEFycmF5PG51bWJlcj4+LFxyXG4gICAgICAgICAgICAgICAgcHVibGljIGRlbGV0aW9uOiBBcnJheTxBcnJheTxudW1iZXI+Pikge31cclxufVxyXG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIlxyXG5pbXBvcnQgU25hcHNob3QgZnJvbSBcIi4vc25hcHNob3RcIlxyXG5pbXBvcnQge1NuYXBzaG90U3RhdHVzfSBmcm9tIFwiLi9zbmFwc2hvdFwiXHJcblxyXG5jb25zdCBSVU5OSU5HXzEgPSAwXHJcbmNvbnN0IFJVTk5JTkdfMiA9IDFcclxuY29uc3QgU09MVkVEID0gMlxyXG5jb25zdCBVTlNPTFZBQkxFID0gM1xyXG5cclxuZXhwb3J0IGVudW0gU3RhdHVzIHtcclxuICAgIFJ1bm5pbmdfMSA9IFwiUGhhc2UgMSBydW5uaW5nXCIsXHJcbiAgICBSdW5uaW5nXzIgPSBcIlBoYXNlIDIgcnVubmluZ1wiLFxyXG4gICAgU29sdmVkID0gXCJzb2x2ZWRcIixcclxuICAgIFVuc29sdmFibGUgPSBcInVuc29sdmFibGVcIlxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVmZXJlbmNlTGlzdCB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0dXM6IFN0YXR1c1xyXG4gICAgcHJpdmF0ZSB0YWJsZTogQXJyYXk8QXJyYXk8bnVtYmVyPj5cclxuICAgIHByaXZhdGUgcHJvcG9zYWxzOiBBcnJheTxudW1iZXI+XHJcbiAgICBwcml2YXRlIGhpc3Rvcnk6IEFycmF5PFNuYXBzaG90PlxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhYmxlOiBBcnJheTxBcnJheTxudW1iZXI+Pikge1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gU3RhdHVzLlJ1bm5pbmdfMVxyXG4gICAgICAgIHRoaXMudGFibGUgPSB0YWJsZVxyXG4gICAgICAgIHRoaXMucHJvcG9zYWxzID0gW11cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnByb3Bvc2Fscy5wdXNoKG51bGwpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcHVibGljIGdldEhpc3RvcnkgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0FycmF5PFNuYXBzaG90Pn0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRIaXN0b3J5KCkgOiBBcnJheTxTbmFwc2hvdD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpc3RvcnlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGdldFN0YXR1cyAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7bnVtYmVyfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHVzKCkgOiBTdGF0dXMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1c1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNoZWNrU3RhdHVzIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgY2hlY2tTdGF0dXMoKSA6IFN0YXR1cyB7XHJcbiAgICAgICAgbGV0IGFsbE9uZSA9IHRydWVcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IFN0YXR1cy5SdW5uaW5nXzEgJiYgdGhpcy5nZXRGcmVlUGVyc29uKCkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFN0YXR1cy5SdW5uaW5nXzJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YWJsZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJsZVtpXS5sZW5ndGggPiAxKSBhbGxPbmUgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFsbE9uZSkgdGhpcy5zdGF0dXMgPSBTdGF0dXMuU29sdmVkXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgb25seSBuZWVkZWQgZHVyaW5nIGZpcnN0IHBoYXNlIG9mIHRoZSBhbGdvcml0aG0uXHJcbiAgICAgICAgcmV0dXJucyBhIHBlcnNvbiB3aGljaCBpcyBub3Qgc2VtaWVuZ2FnZWQgdG8gYW55Ym9keVxyXG4gICAgKi9cclxuICAgIGdldEZyZWVQZXJzb24oKSA6IG51bWJlciB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb3Bvc2Fscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wb3NhbHNbaV0gPT09IG51bGwpIHJldHVybiBpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UGVyc29uIC0gZmluZHMgYW4gZW50cnkgcG9pbnQgZm9yIGEgcm90YXRpb246IHRoZSBmaXJzdCBwZXJzb24gd2l0aFxyXG4gICAgICogbW9yZSB0aGFuIG9uZSBwZXJzb24gcmVtYWluaW5nIGluIGl0cyBwZXJmZXJlbmNlIGxpc3RcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8bnVsbH0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldFBlcnNvbigpIDogbnVtYmVyIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFibGVbaV0ubGVuZ3RoID4gMSkgcmV0dXJuIGlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmaXJzdE9mIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBpIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGZpcnN0T2YoaTpudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YWJsZVtpXVswXVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNlY29uZE9mIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBpIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHNlY29uZE9mKGk6bnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFibGVbaV1bMV1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGxhc3RPZiAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gaSBkZXNjcmlwdGlvblxyXG4gICAgICogQHJldHVybiB7dHlwZX0gICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBsYXN0T2YoaTpudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YWJsZVtpXVt0aGlzLnRhYmxlW2ldLmxlbmd0aC0xXVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbmV4dE9mIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBpIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIG5leHRPZihpOm51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RPZih0aGlzLnNlY29uZE9mKGkpKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVtb3ZlUGFpciAtIHJlbW92ZXMgcGFpciB7eCwgeX1cclxuICAgICAqIHNvIHJlbW92ZXMgeCBmcm9tIHkncyBwcmVmZXJlbmNlTGlzdCBhbmQgdmljZSB2ZXJzYVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBwZXJzb24gMVxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IHBlcnNvbiAyXHJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgYW55IHByZWZlcmVuY2VMaXN0IGdldHMgZW1wdHlcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlUGFpcih4Om51bWJlciwgeTpudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50YWJsZVt4XS5zcGxpY2UodGhpcy50YWJsZVt4XS5pbmRleE9mKHkpLCAxKVxyXG4gICAgICAgIHRoaXMudGFibGVbeV0uc3BsaWNlKHRoaXMudGFibGVbeV0uaW5kZXhPZih4KSwgMSlcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGFibGVbeF0ubGVuZ3RoID09IDAgfHwgdGhpcy50YWJsZVt5XS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFN0YXR1cy5VbnNvbHZhYmxlXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImVtcHR5IHByZWZlcmVuY2VsaXN0LCBubyBzdGFibGUgbWF0Y2hpbmcgcG9zc2libGVcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUGFpcnMoYXJyOiBBcnJheTxBcnJheTxudW1iZXI+Pikge1xyXG4gICAgICAgIGFyci5mb3JFYWNoKHBhaXIgPT4ge3RoaXMucmVtb3ZlUGFpcihwYWlyWzBdLCBwYWlyWzFdKX0pXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZpbmRBbGxBZnRlcih4Om51bWJlciwgeTpudW1iZXIpIDogQXJyYXk8QXJyYXk8bnVtYmVyPj4ge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbXVxyXG4gICAgICAgIGxldCB5SW5YID0gdGhpcy50YWJsZVt4XS5pbmRleE9mKHkpICsgMVxyXG5cclxuICAgICAgICB3aGlsZSAoeUluWCA8IHRoaXMudGFibGVbeF0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFt4LCB0aGlzLnRhYmxlW3hdW3lJblhdXSlcclxuICAgICAgICAgICAgeUluWCsrXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZW1vdmVBbGxBZnRlciAtIChwcm9jZWR1cmFsKSByZW1vdmVzIGFsbCBwZXJzb25zIGFmdGVyIHkgaW4geCdzIGxpc3RcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggcGVyc29uIDFcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geSBwZXJzb24gMlxyXG4gICAgICpcclxuICAgIHJlbW92ZUFsbEFmdGVyKHg6bnVtYmVyLCB5Om51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICBsZXQgeUluWCA9IHRoaXMudGFibGVbeF0uaW5kZXhPZih5KSArIDFcclxuXHJcbiAgICAgICAgd2hpbGUgKHRoaXMudGFibGVbeF0ubGVuZ3RoID4geUluWCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVBhaXIoeCwgdGhpcy50YWJsZVt4XVt5SW5YXSlcclxuICAgICAgICB9XHJcbiAgICB9Ki9cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwcm9wb3NlIC0gb25seSBuZWVkZWQgZHVyaW5nIHBoYXNlIDFcclxuICAgICAqIHBlcnNvbiB4IG1ha2VzIGEgcHJvcG9zYWwgdG8gcGVyc29uIHksIHRoZXJlZm9yZSBlYWNoIHBhaXIge3ksIHp9IHdpdGhcclxuICAgICAqIHogY29taW5nIGFmdGVyIHggb24geSdzIGxpc3Qgd2lsbCBiZSBkZWxldGVkXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4IHBlcnNvbiAxIG1ha2VzIHByb3Bvc2FsXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgcGVyc29uIDIgcmVjZWl2ZXMgcHJvcG9zYWxcclxuICAgICAqL1xyXG4gICAgcHJvcG9zZSh4Om51bWJlciwgeTpudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gZXZlbnR1YWxseSByZWplY3QgcHJldmlvdXMgcHJvcG9zYWxcclxuICAgICAgICBsZXQgcyA9IHRoaXMucHJvcG9zYWxzLmluZGV4T2YoeSlcclxuICAgICAgICBpZiAocyAhPSAtMSkgdGhpcy5wcm9wb3NhbHNbc10gPSBudWxsXHJcbiAgICAgICAgdGhpcy5wcm9wb3NhbHNbeF0gPSB5XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZmluZFJvdGF0aW9uIC0gZmluZHMgYSByb3RhdGlvbiBleHBvc2VkIGluIHRoZSBjdXJyZW50IHRhYmxlXHJcbiAgICAgKiBub3RlIHRoYXQgdGhlcmUgY2FuIGJlIG11bHRpcGxlIGV4cG9zZWQgcm90YXRpb25zLCBidXQgdGhpcyBtZXRob2Qgb25seSByZXR1cm5zIG9uZSBvZiB0aGVtXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7YXJyYXl9ICBhcnJheSBvZiB0aGUgZm9ybSBbW3gxLCB5MV0sIFt4MiwgeTJdLCAuLi5dXHJcbiAgICAgKi9cclxuICAgIGZpbmRSb3RhdGlvbigpIDogQXJyYXk8QXJyYXk8bnVtYmVyPj4ge1xyXG4gICAgICAgIGxldCBzdGFjayA9IFtdLCByb3RhdGlvbiA9IFtdLCBwID0gdGhpcy5nZXRQZXJzb24oKVxyXG5cclxuICAgICAgICB3aGlsZSAoc3RhY2suaW5kZXhPZihwKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgc3RhY2sucHVzaChwKVxyXG4gICAgICAgICAgICBwID0gdGhpcy5uZXh0T2YocClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJvdGF0aW9uLnB1c2goW3AsIHRoaXMuZmlyc3RPZihwKV0pXHJcbiAgICAgICAgbGV0IHAyID0gc3RhY2sucG9wKClcclxuXHJcbiAgICAgICAgd2hpbGUgKHAyICE9IHApIHtcclxuICAgICAgICAgICAgcm90YXRpb24udW5zaGlmdChbcDIsIHRoaXMuZmlyc3RPZihwMildKSAvLyBwcmVwZW5kIHBhaXIgdG8gdGhlIHJvdGF0aW9uIGFycmF5XHJcbiAgICAgICAgICAgIHAyID0gc3RhY2sucG9wKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByb3RhdGlvblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgZmluZFJvdGF0aW9uVmljdGltcyhyb3RhdGlvbjogQXJyYXk8QXJyYXk8bnVtYmVyPj4pIDogQXJyYXk8QXJyYXk8bnVtYmVyPj4ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW10sXHJcbiAgICAgICAgICAgIG4gPSByb3RhdGlvbi5sZW5ndGhcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCh0aGlzLmZpbmRBbGxBZnRlcihyb3RhdGlvblsoaSsxKSAlIG5dWzFdLCByb3RhdGlvbltpXVswXSkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBkZWxldGVSb3RhdGlvbiAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gcm90YXRpb24gZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgZGVsZXRlUm90YXRpb24ocm90YXRpb246QXJyYXk8QXJyYXk8bnVtYmVyPj4pIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IG4gPSByb3RhdGlvbi5sZW5ndGhcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFsbEFmdGVyKHJvdGF0aW9uWyhpKzEpICUgbl1bMV0sIHJvdGF0aW9uW2ldWzBdKVxyXG4gICAgICAgIH1cclxuICAgIH0qL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogcHJpbnQgLSB3cml0ZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHRhYmxlIHRvIHRoZSBjb25zb2xlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gb3JpZyA9IGZhbHNlIHdoZXRlciB0byBwcmludCB0aGUgb3JpZ2luYWwgdGFibGUgb3IgdGhlIGN1cnJlbnQgc3RhdHVzIGR1cmluZyB0aGUgcmVkdWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaW50KCkgOiB2b2lkIHtcclxuICAgICAgICBsZXQgdGFibGUgPSB0aGlzLnRhYmxlXHJcbiAgICAgICAgbGV0IHMgPSBcIlwiXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcyArPSBpICsgXCJbXCIgKyAodGhpcy5wcm9wb3NhbHNbaV0gPT09IG51bGwgPyBcIi1cIiA6IHRoaXMucHJvcG9zYWxzW2ldKSArIFwiXXwgXCJcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGFibGVbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHMgKz0gdGFibGVbaV1bal0gKyBcIiAgXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcyArPSBcIlxcblwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhzKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc29sdmUgLSB0cmllcyB0byBmdWxseSByZWR1Y2UgdGhlIHByZWZlcmVuY2VMaXN0IGluc3RhbmNlLlxyXG4gICAgICogcmV0dXJucyBhIHBvc3NpYmxlIHN0YWJsZSBtYXRjaGluZywgb3IgbnVsbCBpZiBubyBzdGFibGUgbWF0Y2hpbmcgZXhpc3RzXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7YXJyYXl8bnVsbH0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHNvbHZlKCkgOiBBcnJheTxBcnJheTxudW1iZXI+PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gYWRkIGluaXRpYWwgc25hcHNob3RcclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLkluaXRpYWwsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCBVdGlscy5jbG9uZSh0aGlzLnByb3Bvc2FscyksIG51bGwsIG51bGwpKVxyXG5cclxuICAgICAgICAgICAgLy8gcGVyZm9ybSBwaGFzZSAxXHJcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmNoZWNrU3RhdHVzKCkgPT09IFN0YXR1cy5SdW5uaW5nXzEpIHtcclxuICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5nZXRGcmVlUGVyc29uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRoaXMuZmlyc3RPZih4KVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcG9zZSh4LCB5KVxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHNuYXBzaG90IHdoZXJlIHggcHJvcG9zZXMgdG8geVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLk1ha2VQcm9wb3NhbCwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIFV0aWxzLmNsb25lKHRoaXMucHJvcG9zYWxzKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpKVxyXG4gICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLmZpbmRBbGxBZnRlcih5LCB4KVxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHNuYXBzaG90IHdpdGggYWxsIGNhbmRpZGF0ZXMgdGhhdCB3aWxsIGJlIGRlbGV0ZWRcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5EZWxldGUsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCBVdGlscy5jbG9uZSh0aGlzLnByb3Bvc2FscyksIHVuZGVmaW5lZCwgY2FuZGlkYXRlcykpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBhaXJzKGNhbmRpZGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgcmVzdWx0IHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChuZXcgU25hcHNob3QoU25hcHNob3RTdGF0dXMuUmVzdWx0LCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgVXRpbHMuY2xvbmUodGhpcy5wcm9wb3NhbHMpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHBlcmZvcm0gcGhhc2UgMlxyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5jaGVja1N0YXR1cygpID09PSBTdGF0dXMuUnVubmluZ18yKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgciA9IHRoaXMuZmluZFJvdGF0aW9uKClcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBzbmFwc2hvdCB3aGVyZSBmb3VuZCByb3RhdGlvbiBpcyBoaWdobGlnaHRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLkZpbmRSb3RhdGlvbiwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIHVuZGVmaW5lZCwgciwgdW5kZWZpbmVkKSlcclxuICAgICAgICAgICAgICAgIC8vIGZpbmQgY2FuZGlkYXRlcyB0aGF0IHdpbGwgYmUgZGVsZXRlZCBiZWNhdXNlIG9mIHRoaXMgcm90YXRpb25cclxuICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5maW5kUm90YXRpb25WaWN0aW1zKHIpXHJcbiAgICAgICAgICAgICAgICAvLyB0YWtlIHNuYXBzaG90IHdpdGggY2FuZGlkYXRlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLkRlbGV0ZSwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIHVuZGVmaW5lZCwgciwgY2FuZGlkYXRlcykpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBhaXJzKGNhbmRpZGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgcmVzdWx0IHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChuZXcgU25hcHNob3QoU25hcHNob3RTdGF0dXMuUmVzdWx0LCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5GaW5pc2gsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhYmxlXHJcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLlVuc29sdmFibGUsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKSlcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICBjcmVhdGVzIGEgcmFuZG9tIHByZWZlcmVuY2UgdGFibGUgYW5kIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgUHJlZmVyZW5jZUxpc3RcclxuICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlUmFuZG9tKG4gOiBudW1iZXIpIDogUHJlZmVyZW5jZUxpc3Qge1xyXG4gICAgICAgIGxldCB0YWJsZSA9IFV0aWxzLnJhbmQobilcclxuICAgICAgICByZXR1cm4gbmV3IFByZWZlcmVuY2VMaXN0KHRhYmxlKVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBVdGlscyBmcm9tIFwiLi91dGlsc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpbmdQYXJzZXIge1xyXG5cclxuICAgIHByaXZhdGUgZGljdGlvbmFyeSA6IEFycmF5PGFueT5cclxuICAgIHByaXZhdGUgbjogbnVtYmVyXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kaWN0aW9uYXJ5ID0gW11cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwdWJsaWMgZ2V0RGljdGlvbmFyeSAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7dHlwZX0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXREaWN0aW9uYXJ5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpY3Rpb25hcnlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9va1VwT3JBZGQoc3RyOiBzdHJpbmcpIDogbnVtYmVyIHtcclxuICAgICAgICBsZXQgaSA9IHRoaXMuZGljdGlvbmFyeS5pbmRleE9mKHN0cilcclxuXHJcbiAgICAgICAgaWYgKGkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGljdGlvbmFyeS5wdXNoKHN0cilcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGljdGlvbmFyeS5sZW5ndGggLSAxXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwYXJzZSAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gc3RyOiBzdHJpbmcgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHBhcnNlKHN0cjogc3RyaW5nLCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCkge1xyXG4gICAgICAgIHN0ciA9IHN0ci50cmltKCkucmVwbGFjZSgvXFx0Ky9nLCAnICcpLnJlcGxhY2UoLyAgKy9nLCAnICcpLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKVxyXG5cclxuICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHN0clxyXG5cclxuICAgICAgICBsZXQgYXJyID0gc3RyLnNwbGl0KFwiXFxuXCIpXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdXHJcblxyXG4gICAgICAgIHRoaXMubiA9IGFyci5sZW5ndGhcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcm93IG9mIGFycikge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0Um93ID0gW11cclxuICAgICAgICAgICAgbGV0IHNwbGl0dGVkUm93ID0gcm93LnRyaW0oKS5zcGxpdChcIiBcIikubWFwKHMgPT4gcy50cmltKCkpXHJcblxyXG4gICAgICAgICAgICBpZiAoc3BsaXR0ZWRSb3cubGVuZ3RoIC0gMSAhPSB0aGlzLm4pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIndyb25nIG51bWJlciBvZiBlbGVtZW50c1wiKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmFsbERpZmZlcmVudChzcGxpdHRlZFJvdykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImR1cGxpY2F0ZWQgdmFsdWUgaW4gdGhpcyByb3dcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IHRoaXMubG9va1VwT3JBZGQoc3BsaXR0ZWRSb3dbMF0pXHJcblxyXG4gICAgICAgICAgICBpZiAoc3BsaXR0ZWRSb3dbMV0gIT0gXCJ8XCIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgc3ludGF4XCIpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNwbGl0dGVkUm93LnNoaWZ0KClcclxuICAgICAgICAgICAgc3BsaXR0ZWRSb3cuc2hpZnQoKVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgZW50cnkgb2Ygc3BsaXR0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFJvdy5wdXNoKHRoaXMubG9va1VwT3JBZGQoZW50cnkpKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXN1bHRbZmlyc3RdID0gcmVzdWx0Um93XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaWN0aW9uYXJ5Lmxlbmd0aCAhPT0gdGhpcy5uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgdGFibGVcIilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFNuYXBzaG90IGZyb20gXCIuL3NuYXBzaG90XCJcclxuaW1wb3J0IHtTbmFwc2hvdFN0YXR1c30gZnJvbSBcIi4vc25hcHNob3RcIlxyXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIlxyXG5pbXBvcnQge1N0YXR1c30gZnJvbSBcIi4vcHJlZmVyZW5jZWxpc3RcIlxyXG5cclxuY2xhc3MgQ2VsbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdmFsdWU6IG51bWJlciwgcHVibGljIGQgPSBmYWxzZSwgcHVibGljIHIgPSBmYWxzZSwgcHVibGljIGMgPSBmYWxzZSkge31cclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XHJcblxyXG4gICAgZGljdGlvbmFyeTogQXJyYXk8c3RyaW5nPlxyXG4gICAgY29udHJvbHM6IEhUTUxEaXZFbGVtZW50XHJcbiAgICBuYXZpZ2F0aW9uOiBIVE1MRWxlbWVudFxyXG4gICAgdGFyZ2V0OiBIVE1MVGFibGVFbGVtZW50XHJcbiAgICBoaXN0b3J5OiBBcnJheTxTbmFwc2hvdD5cclxuICAgIGN1cnJlbnRJbmRleDogbnVtYmVyXHJcbiAgICBkaW1lbnNpb25zOiBudW1iZXJcclxuXHJcbiAgICBidXR0b25MZWZ0OiBIVE1MQnV0dG9uRWxlbWVudFxyXG4gICAgYnV0dG9uUmlnaHQ6IEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICBwYWdlTnVtYmVyOiBIVE1MU3BhbkVsZW1lbnRcclxuICAgIGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKSwgbmF2aWdhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJuYXZcIikpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gY29udHJvbHNcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldFxyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvbiA9IG5hdmlnYXRpb25cclxuXHJcbiAgICAgICAgLy8gc2V0IHVwIGNvbnRyb2xzIGFuZCB0YXJnZXQgcHJvcGVybHlcclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXHJcbiAgICAgICAgdGhpcy5idXR0b25SaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcclxuICAgICAgICB0aGlzLnBhZ2VOdW1iZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxyXG4gICAgICAgIHRoaXMuYnV0dG9uTGVmdC50ZXh0Q29udGVudCA9IFwiPFwiXHJcbiAgICAgICAgdGhpcy5idXR0b25SaWdodC50ZXh0Q29udGVudCA9IFwiPlwiXHJcbiAgICAgICAgdGhpcy5wYWdlTnVtYmVyLnRleHRDb250ZW50ID0gXCIwXCJcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxyXG4gICAgICAgIHRoaXMuY2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIlxyXG5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmFwcGVuZENoaWxkKHRoaXMuYnV0dG9uTGVmdClcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmFwcGVuZENoaWxkKHRoaXMucGFnZU51bWJlcilcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmFwcGVuZENoaWxkKHRoaXMuYnV0dG9uUmlnaHQpXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmNoZWNrYm94KVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJzaG93IGRlbGV0ZWQgcGFpcnNcIikpXHJcblxyXG4gICAgICAgIHRoaXMuYnV0dG9uTGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge3RoaXMuc2hvd1ByZXYoKX0pXHJcbiAgICAgICAgdGhpcy5idXR0b25SaWdodC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge3RoaXMuc2hvd05leHQoKX0pXHJcbiAgICAgICAgdGhpcy5jaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge3RoaXMudG9nZ2xlU2hvd0RlbGV0ZWRQYWlycygpfSlcclxuXHJcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZTpNb3VzZUV2ZW50KSA9PiB7dGhpcy5uYXZDbGlja2VkKGUpfSlcclxuXHJcbiAgICAgICAgLy8ga2V5IGNvbnRyb2xzXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnkgJiYgKGUua2V5Q29kZSA9PSAzNyB8fCBlLmtleUNvZGUgPT0gMzgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dQcmV2KClcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnkgJiYgKGUua2V5Q29kZSA9PSAzOSB8fCBlLmtleUNvZGUgPT0gNDApKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOZXh0KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHB1YmxpYyBzZXREaWN0aW9uYXJ5IC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBkaWN0aW9uYXJ5IDogQXJyYXk8c3RyaW5nPiBkZXNjcmlwdGlvblxyXG4gICAgICogQHJldHVybiB7dHlwZX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldERpY3Rpb25hcnkoZGljdGlvbmFyeSA6IEFycmF5PHN0cmluZz4pIHtcclxuICAgICAgICB0aGlzLmRpY3Rpb25hcnkgPSBkaWN0aW9uYXJ5XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBsb29rVXAgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGluZGV4OiBudW1iZXIgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb29rVXAoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmRpY3Rpb25hcnkgIT0gbnVsbCAmJiB0aGlzLmRpY3Rpb25hcnkubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGljdGlvbmFyeVtpbmRleF1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluZGV4LnRvU3RyaW5nKClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRIaXN0b3J5KGhpc3Rvcnk6IEFycmF5PFNuYXBzaG90PikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBoaXN0b3J5XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSAwXHJcblxyXG4gICAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kaW1lbnNpb25zID0gaGlzdG9yeVswXS50YWJsZS5sZW5ndGhcclxuICAgICAgICAgICAgdGhpcy5zZXRVcCgpXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTmF2KClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2V0VGFyZ2V0IC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSB0YXJnZXQ6IEhUTUxEaXZFbGVtZW50IGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUYXJnZXQodGFyZ2V0OiBIVE1MVGFibGVFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwcml2YXRlIHNldFVwIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRVcCgpIHtcclxuICAgICAgICB0aGlzLnRhcmdldC5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXHJcbiAgICAgICAgbGV0IHJvd09yaWdpbmFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpXHJcbiAgICAgICAgbGV0IGNlbGxPcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGltZW5zaW9uczsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSByb3dcclxuICAgICAgICAgICAgbGV0IHJvdyA9IHJvd09yaWdpbmFsLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MVGFibGVSb3dFbGVtZW50XHJcblxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgaGVhZCBlbGVtZW50XHJcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IGNlbGxPcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnRcclxuICAgICAgICAgICAgZmlyc3QuY2xhc3NMaXN0LmFkZChcImhlYWRcIilcclxuICAgICAgICAgICAgZmlyc3QuaW5uZXJIVE1MID0gaS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChmaXJzdClcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSB8XHJcbiAgICAgICAgICAgIGxldCBzZXBhcmF0b3IgPSBjZWxsT3JpZ2luYWwuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50XHJcbiAgICAgICAgICAgIHNlcGFyYXRvci5pbm5lckhUTUwgPSBcIiB8IFwiXHJcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChzZXBhcmF0b3IpXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZGltZW5zaW9ucy0xOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsID0gY2VsbE9yaWdpbmFsLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudFxyXG4gICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBcIi1cIlxyXG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHJvdylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGFyZ2V0LmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gICAgfVxyXG5cclxuLypcclxuICAgIHN0YXR1c1RvQ2xhc3NOYW1lKHMgOiBTdGF0dXMpIHtcclxuICAgICAgICBzd2l0Y2gocykge1xyXG4gICAgICAgICAgICBjYXNlIFN0YXR1cy5SdW5uaW5nXzE6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJydW5uaW5nXzFcIlxyXG4gICAgICAgICAgICBjYXNlIFN0YXR1cy5SdW5uaW5nXzI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJydW5uaW5nXzJcIlxyXG4gICAgICAgICAgICBjYXNlIFN0YXR1cy5Tb2x2ZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzb2x2ZWRcIlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidW5zb2x2YWJsZVwiXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuKi9cclxuXHJcbiAgICBjcmVhdGVOYXYoKSB7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXHJcbiAgICAgICAgbGV0IG9yaWdpbmFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgIG9yaWdpbmFsLmNsYXNzTGlzdC5hZGQoXCJuYXZFbGVtZW50XCIpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXN0b3J5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBzbmFwc2hvdCA9IHRoaXMuaGlzdG9yeVtpXVxyXG4gICAgICAgICAgICBsZXQgZGl2ID0gKG9yaWdpbmFsLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRGl2RWxlbWVudClcclxuXHJcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgKz0gXCI8c3Bhbj5cIiArIChpKzEpLnRvU3RyaW5nKCkgKyBcIi4gc3RlcDwvc3Bhbj48c3Bhbj5cIiArICBzbmFwc2hvdC5zdGF0dXMgKyBcIjwvc3Bhbj5cIlxyXG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcInN0YXR1cy1cIiArIHNuYXBzaG90LnN0YXR1cylcclxuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImluZGV4XCIsIGkudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZGl2KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLmlubmVySFRNTCA9IFwiXCJcclxuICAgICAgICB0aGlzLm5hdmlnYXRpb24uYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVuZGVyIC0gZGVzY3JpcHRpb25cclxuICAgICAqIFRPRE9cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHNuYXBzaG90ID0gdGhpcy5oaXN0b3J5W3RoaXMuY3VycmVudEluZGV4XVxyXG4gICAgICAgIGxldCBkaWZmID0gdGhpcy5jb21wdXRlRGlmZihzbmFwc2hvdClcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhckRlY29yYXRpb25zKClcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaWZmLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkQ2VsbCA9IHRoaXMuZ2V0RWxlbWVudChpKVxyXG4gICAgICAgICAgICBoZWFkQ2VsbC50ZXh0Q29udGVudCA9IHRoaXMubG9va1VwKGkpXHJcblxyXG4gICAgICAgICAgICBpZiAoc25hcHNob3QucHJvcG9zYWxzICE9IHVuZGVmaW5lZCAmJiBzbmFwc2hvdC5wcm9wb3NhbHNbaV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaGVhZENlbGwuaW5uZXJIVE1MICs9IFwiPHNwYW4gY2xhc3M9J3N1Yic+ICYjeDFGNDhEO1wiICsgdGhpcy5sb29rVXAoc25hcHNob3QucHJvcG9zYWxzW2ldKSArIFwiPC9zcGFuPlwiXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGlmZltpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbGwgPSBkaWZmW2ldW2pdXHJcbiAgICAgICAgICAgICAgICBsZXQgdHIgPSB0aGlzLmdldEVsZW1lbnQoaSwgailcclxuXHJcbiAgICAgICAgICAgICAgICB0ci50ZXh0Q29udGVudCA9IHRoaXMubG9va1VwKGNlbGwudmFsdWUpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGVhY2ggY2VsbCwgY2hlY2s6XHJcbiAgICAgICAgICAgICAgICAvLyAxLiBpcyBpdCBpbiBhIHJvdGF0aW9uP1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwucikgdHIuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LTMnKVxyXG4gICAgICAgICAgICAgICAgLy8gMi4gaXMgaXQgYSBkZWF0aCBjYW5kaWRhdGU/XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5jKSB0ci5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQtMicpXHJcbiAgICAgICAgICAgICAgICAvLyAzLiBpcyBpdCBkZWFkP1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuZCkgdHIuY2xhc3NMaXN0LmFkZCgnZGVhZCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRpc3BsYXkgcm90YXRpb25zXHJcbiAgICAgICAgaWYgKHNuYXBzaG90LnJvdGF0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgc25hcHNob3Qucm90YXRpb24uZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudChwYWlyWzBdKS5jbGFzc0xpc3QuYWRkKFwiaGlnaGxpZ2h0LTNcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLnJlbmRlclBhZ2VyKClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyRGVjb3JhdGlvbnMoKSB7XHJcbiAgICAgICAgbGV0IGNlbGxzIDogTm9kZUxpc3QgPSB0aGlzLnRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKFwidGRcIilcclxuICAgICAgICBsZXQgY2VsbHNBcnJheSA6IEFycmF5PEhUTUxFbGVtZW50PiA9IFtdLnNsaWNlLmNhbGwoY2VsbHMpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjZWxsc0FycmF5W2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJkZWFkXCIpXHJcbiAgICAgICAgICAgIGNlbGxzQXJyYXlbaV0uY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hsaWdodC0xXCIpXHJcbiAgICAgICAgICAgIGNlbGxzQXJyYXlbaV0uY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hsaWdodC0yXCIpXHJcbiAgICAgICAgICAgIGNlbGxzQXJyYXlbaV0uY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hsaWdodC0zXCIpXHJcbiAgICAgICAgICAgIGNlbGxzQXJyYXlbaV0uY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hsaWdodC00XCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIG5hdkNsaWNrZWQgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGUgOiBNb3VzZUV2ZW50IGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBuYXZDbGlja2VkKGUgOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGVsID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KVxyXG5cclxuICAgICAgICB3aGlsZSAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhcIm5hdkVsZW1lbnRcIikgJiYgZWwubm9kZU5hbWUgIT0gXCJOQVZcIikge1xyXG4gICAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZFbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKClcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNob3dQcmV2IC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgc2hvd1ByZXYoKSA6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXgtLVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzaG93TmV4dCAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7dHlwZX0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHNob3dOZXh0KCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXgrMSA8IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXgrK1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlclBhZ2VyKCkge1xyXG4gICAgICAgIGxldCBtYXggPSB0aGlzLmhpc3RvcnkubGVuZ3RoXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnRJbmRleCArIDFcclxuICAgICAgICB0aGlzLnBhZ2VOdW1iZXIuaW5uZXJIVE1MID0gY3VycmVudCArIFwiIC8gXCIgKyBtYXhcclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQuZGlzYWJsZWQgPSBjdXJyZW50ID09IDFcclxuICAgICAgICB0aGlzLmJ1dHRvblJpZ2h0LmRpc2FibGVkID0gY3VycmVudCA9PSBtYXhcclxuXHJcbiAgICAgICAgbGV0IGFjdGl2ZSA9IHRoaXMubmF2aWdhdGlvbi5xdWVyeVNlbGVjdG9yKFwiLm5hdkVsZW1lbnQuYWN0aXZlXCIpXHJcbiAgICAgICAgaWYgKGFjdGl2ZSkgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcclxuXHJcbiAgICAgICAgbGV0IG5ld0FjdGl2ZSA9IHRoaXMubmF2aWdhdGlvbi5xdWVyeVNlbGVjdG9yKFwiLm5hdkVsZW1lbnRbaW5kZXg9J1wiICsgdGhpcy5jdXJyZW50SW5kZXggKyBcIiddXCIpXHJcblxyXG4gICAgICAgIG5ld0FjdGl2ZS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlU2hvd0RlbGV0ZWRQYWlycygpIHtcclxuICAgICAgICBpZiAodGhpcy5jaGVja2JveC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzaG93RGVsZXRlZFwiKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93RGVsZXRlZFwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGdldEVsZW1lbnQocm93OiBudW1iZXIsIGNvbCA9IC0xKSA6IEhUTUxTcGFuRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5U3RyaW5nID0gXCJcIlxyXG4gICAgICAgIHJvdyArPSAxXHJcblxyXG4gICAgICAgIGlmIChjb2wgPT0gLTEpIHtcclxuICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSBcInRyOm50aC1jaGlsZChcIiArIHJvdyArIFwiKSB0ZC5oZWFkXCJcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb2wgKz0gM1xyXG4gICAgICAgICAgICBxdWVyeVN0cmluZyA9IFwidHI6bnRoLWNoaWxkKFwiICsgcm93ICsgXCIpIHRkOm50aC1jaGlsZChcIiArIGNvbCArIFwiKVwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQucXVlcnlTZWxlY3RvcihxdWVyeVN0cmluZylcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljIGNvbXB1dGVEaWZmIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBzIDogU25hcHNob3QgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBjb21wdXRlRGlmZihzOiBTbmFwc2hvdCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbXSxcclxuICAgICAgICAgICAgaW5pdGlhbCA9IHRoaXMuaGlzdG9yeVswXVxyXG5cclxuICAgICAgICBpZiAocy5zdGF0dXMgPT0gU25hcHNob3RTdGF0dXMuSW5pdGlhbCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMudGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCByb3cgPSBzLnRhYmxlW2ldXHJcbiAgICAgICAgICAgICAgICBsZXQgZXJnID0gW11cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJvdy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVyZy5wdXNoKG5ldyBDZWxsKHJvd1tqXSkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlcmcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgb3JpZ2luYWxUYWJsZSA9IGluaXRpYWwudGFibGVcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYWJsZSA9IHMudGFibGVcclxuXHJcbiAgICAgICAgICAgIC8vIHJvdGF0aW9uZW4gdW5kIGRlbGV0aW9ucyBhdWZiZXJlaXRlblxyXG4gICAgICAgICAgICAvLyBzdGF0dCB7eCwgeX0gbWFjaGUge3gsIGluZGV4T2YoeSl9XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGlmIChzLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHMucm90YXRpb24uZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwYWlyWzFdID0gb3JpZ2luYWxUYWJsZVtwYWlyWzBdXS5pbmRleE9mKHBhaXJbMV0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzLmRlbGV0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHMuZGVsZXRpb24uZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwYWlyWzFdID0gb3JpZ2luYWxUYWJsZVtwYWlyWzBdXS5pbmRleE9mKHBhaXJbMV0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9Ki9cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBjb21wdXRlIGRpZmZlcmVuY2UgYmV0d2VlbiBvcmlnaW5hbCB0YWJsZSBhbmQgY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yaWdpbmFsVGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbFJvdyA9IG9yaWdpbmFsVGFibGVbaV1cclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50Um93ID0gY3VycmVudFRhYmxlW2ldXHJcbiAgICAgICAgICAgICAgICBsZXQgZXJnID0gW11cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG9yaWdpbmFsUm93Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9yaWdpbmFsQ2VsbCA9IG9yaWdpbmFsUm93W2pdXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Um93LmluZGV4T2Yob3JpZ2luYWxDZWxsKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGRlYWQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcmcucHVzaChuZXcgQ2VsbChvcmlnaW5hbENlbGwsIHRydWUpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhbGl2ZSBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsID0gbmV3IENlbGwob3JpZ2luYWxDZWxsKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5yb3RhdGlvbi5mb3JFYWNoKHBhaXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWlyWzBdID09PSBpICYmIG9yaWdpbmFsVGFibGVbcGFpclswXV0uaW5kZXhPZihwYWlyWzFdKSA9PT0gaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnIgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuZGVsZXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZWxldGlvbi5mb3JFYWNoKHBhaXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWlyWzBdID09PSBpICYmIG9yaWdpbmFsVGFibGVbcGFpclswXV0uaW5kZXhPZihwYWlyWzFdKSA9PT0galxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBwYWlyWzFdID09PSBpICYmIG9yaWdpbmFsVGFibGVbcGFpclsxXV0uaW5kZXhPZihwYWlyWzBdKSA9PT0gaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmMgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJnLnB1c2goY2VsbClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZXJnKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuXHJcblxyXG59XHJcbiIsImltcG9ydCBQcmVmZXJlbmNlTGlzdCBmcm9tIFwiLi9wcmVmZXJlbmNlbGlzdFwiXHJcbmltcG9ydCBTdHJpbmdQYXJzZXIgZnJvbSBcIi4vc3RyaW5ncGFyc2VyXCJcclxuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCJcclxuaW1wb3J0IFV0aWxzIGZyb20gXCIuL3V0aWxzXCJcclxuXHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29vcmRpbmF0b3Ige1xyXG5cclxuICAgIHByaXZhdGUgY29udHJvbHMgOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgcHJpdmF0ZSBzZXR1cFdpbmRvdyA6IEhUTUxEaXZFbGVtZW50XHJcbiAgICBwcml2YXRlIGRlbW9XaW5kb3cgOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgcHJpdmF0ZSB0ZXh0YXJlYSA6IEhUTUxUZXh0QXJlYUVsZW1lbnRcclxuXHJcblxyXG4gICAgLy9cclxuICAgIHByaXZhdGUgcHJlZmVyZW5jZUxpc3QgOiBQcmVmZXJlbmNlTGlzdFxyXG4gICAgcHJpdmF0ZSBzdHJpbmdQYXJzZXIgOiBTdHJpbmdQYXJzZXJcclxuICAgIHByaXZhdGUgcmVuZGVyZXIgOiBSZW5kZXJlclxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRyb2xzIDogSFRNTERpdkVsZW1lbnQsIHNldHVwV2luZG93OiBIVE1MRGl2RWxlbWVudCwgZGVtb1dpbmRvdzogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICAvLyBzZXQgdXAgRE9NIGV0Yy5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gY29udHJvbHNcclxuICAgICAgICB0aGlzLnNldHVwV2luZG93ID0gc2V0dXBXaW5kb3dcclxuICAgICAgICB0aGlzLmRlbW9XaW5kb3cgPSBkZW1vV2luZG93XHJcbiAgICAgICAgdGhpcy50ZXh0YXJlYSA9IHNldHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKVxyXG5cclxuXHJcbiAgICAgICAgY29udHJvbHMucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVdpbmRvd3MoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHNldHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnREZW1vKClcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8gc2V0IHVwIGxvZ2ljIHN0cnVjdHVyZVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoZGVtb1dpbmRvdy5xdWVyeVNlbGVjdG9yKFwiI2NvbnRyb2xzXCIpLFxyXG4gICAgICAgICAgICBkZW1vV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIjZGVtb1RhcmdldFwiKSwgZGVtb1dpbmRvdy5xdWVyeVNlbGVjdG9yKFwibmF2XCIpKVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0b2dnbGVXaW5kb3dzIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgdG9nZ2xlV2luZG93cygpIHtcclxuICAgICAgICBpZiAodGhpcy5zZXR1cFdpbmRvdy5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZWRcIikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGVtb1dpbmRvdy5jbGFzc0xpc3QuYWRkKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cFdpbmRvdy5jbGFzc0xpc3QuYWRkKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGVtb1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0RGVtbygpIHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHRleHQgPSB0aGlzLnRleHRhcmVhLnZhbHVlXHJcblxyXG4gICAgICAgICAgICBpZiAodGV4dC50cmltKCkuaW5kZXhPZihcIiBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgcmFuZG9tIHRhYmxlXHJcbiAgICAgICAgICAgICAgICBsZXQgbiA9IHBhcnNlSW50KHRleHQudHJpbSgpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVmZXJlbmNlTGlzdCA9IFByZWZlcmVuY2VMaXN0LmNyZWF0ZVJhbmRvbShuKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXREaWN0aW9uYXJ5KG51bGwpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGFibGUgZnJvbSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgbGV0IHN0cmluZ1BhcnNlciA9IG5ldyBTdHJpbmdQYXJzZXIoKVxyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlID0gc3RyaW5nUGFyc2VyLnBhcnNlKHRleHQsIHRoaXMudGV4dGFyZWEpXHJcbiAgICAgICAgICAgICAgICBsZXQgZGljdCA9IHN0cmluZ1BhcnNlci5nZXREaWN0aW9uYXJ5KClcclxuICAgICAgICAgICAgICAgIHRoaXMucHJlZmVyZW5jZUxpc3QgPSBuZXcgUHJlZmVyZW5jZUxpc3QodGFibGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldERpY3Rpb25hcnkoZGljdClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy90aGlzLnByZWZlcmVuY2VMaXN0LnByaW50KClcclxuICAgICAgICAgICAgdGhpcy5wcmVmZXJlbmNlTGlzdC5zb2x2ZSgpXHJcbiAgICAgICAgICAgIGxldCBoaXN0b3J5ID0gdGhpcy5wcmVmZXJlbmNlTGlzdC5nZXRIaXN0b3J5KClcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0SGlzdG9yeShoaXN0b3J5KVxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVdpbmRvd3MoKVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpXHJcblxyXG4gICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJmZWhsZXJcIilcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQ29vcmRpbmF0b3IgZnJvbSBcIi4vY29vcmRpbmF0b3JcIlxyXG5cclxubGV0IGNvb3JkaW5hdG9yXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250cm9sc1wiKSxcclxuICAgICAgICBzZXR1cFdpbmRvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dXBXaW5kb3dcIiksXHJcbiAgICAgICAgZGVtb1dpbmRvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVtb1dpbmRvd1wiKVxyXG5cclxuICAgIGNvb3JkaW5hdG9yID0gbmV3IENvb3JkaW5hdG9yKGNvbnRyb2xzLCBzZXR1cFdpbmRvdywgZGVtb1dpbmRvdylcclxufSlcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==