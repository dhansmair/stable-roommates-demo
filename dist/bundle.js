!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o=function(){function t(){}return t.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1));i=[t[n],t[e]],t[e]=i[0],t[n]=i[1]}return t;var i},t.rand=function(e){for(var n=[],i=0;i<e;i++){for(var o=[],r=0;r<e;r++)i!=r&&o.push(r);n[i]=t.shuffle(o)}return n},t.actOnEachLine=function(t,e){for(var n=t.value.replace(/\r\n/g,"\n").split("\n"),i=n.length;i--;)e(n[i])},t.allDifferent=function(t){for(var e=0;e<t.length;e++)if(t.indexOf(t[e])!==e)return!1;return!0},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t}();!function(t){t[t.Initial=0]="Initial",t[t.MakeProposal=1]="MakeProposal",t[t.FindRotation=2]="FindRotation",t[t.Delete=3]="Delete",t[t.Result=4]="Result",t[t.Finish=5]="Finish",t[t.Unsolvable=6]="Unsolvable"}(i||(i={}));var r,s=function(){return function(t,e,n,i,o){this.status=t,this.table=e,this.proposals=n,this.rotation=i,this.deletion=o}}();!function(t){t.Running_1="Phase 1 running",t.Running_2="Phase 2 running",t.Solved="solved",t.Unsolvable="unsolvable"}(r||(r={}));var a=function(){function t(t){this.status=r.Running_1,this.table=t,this.proposals=[];for(var e=0;e<t.length;e++)this.proposals.push(null);this.history=[]}return t.prototype.getHistory=function(){return this.history},t.prototype.getStatus=function(){return this.status},t.prototype.checkStatus=function(){var t=!0;this.status==r.Running_1&&null==this.getFreePerson()&&(this.status=r.Running_2);for(var e=0;e<this.table.length;e++)this.table[e].length>1&&(t=!1);return t&&(this.status=r.Solved),this.status},t.prototype.getFreePerson=function(){for(var t=0;t<this.proposals.length;t++)if(null===this.proposals[t])return t;return null},t.prototype.getPerson=function(){for(var t=0;t<this.table.length;t++)if(this.table[t].length>1)return t;return null},t.prototype.firstOf=function(t){return this.table[t][0]},t.prototype.secondOf=function(t){return this.table[t][1]},t.prototype.lastOf=function(t){return this.table[t][this.table[t].length-1]},t.prototype.nextOf=function(t){return this.lastOf(this.secondOf(t))},t.prototype.removePair=function(t,e){if(this.table[t].splice(this.table[t].indexOf(e),1),this.table[e].splice(this.table[e].indexOf(t),1),0==this.table[t].length||0==this.table[e].length)throw this.status=r.Unsolvable,new Error("empty preferencelist, no stable matching possible")},t.prototype.removePairs=function(t){var e=this;t.forEach(function(t){e.removePair(t[0],t[1])})},t.prototype.findAllAfter=function(t,e){for(var n=[],i=this.table[t].indexOf(e)+1;i<this.table[t].length;)n.push([t,this.table[t][i]]),i++;return n},t.prototype.propose=function(t,e){var n=this.proposals.indexOf(e);-1!=n&&(this.proposals[n]=null),this.proposals[t]=e},t.prototype.findRotation=function(){for(var t=[],e=[],n=this.getPerson();-1===t.indexOf(n);)t.push(n),n=this.nextOf(n);e.push([n,this.firstOf(n)]);for(var i=t.pop();i!=n;)e.unshift([i,this.firstOf(i)]),i=t.pop();return e},t.prototype.findRotationVictims=function(t){for(var e=[],n=t.length,i=0;i<n;i++)e=e.concat(this.findAllAfter(t[(i+1)%n][1],t[i][0]));return e},t.prototype.print=function(){for(var t=this.table,e="",n=0;n<t.length;n++){e+=n+"["+(null===this.proposals[n]?"-":this.proposals[n])+"]| ";for(var i=0;i<t[n].length;i++)e+=t[n][i]+"  ";e+="\n"}console.log(e)},t.prototype.solve=function(){try{for(this.history.push(new s(i.Initial,o.clone(this.table),o.clone(this.proposals),null,null));this.checkStatus()===r.Running_1;){var t=this.getFreePerson(),e=this.firstOf(t);this.propose(t,e),this.history.push(new s(i.MakeProposal,o.clone(this.table),o.clone(this.proposals),void 0,void 0));var n=this.findAllAfter(e,t);this.history.push(new s(i.Delete,o.clone(this.table),o.clone(this.proposals),void 0,n)),this.removePairs(n),this.history.push(new s(i.Result,o.clone(this.table),o.clone(this.proposals),void 0,void 0))}for(;this.checkStatus()===r.Running_2;){var a=this.findRotation();this.history.push(new s(i.FindRotation,o.clone(this.table),void 0,a,void 0));n=this.findRotationVictims(a);this.history.push(new s(i.Delete,o.clone(this.table),void 0,a,n)),this.removePairs(n),this.history.push(new s(i.Result,o.clone(this.table),void 0,void 0,void 0))}return this.history.push(new s(i.Finish,o.clone(this.table),void 0,void 0,void 0)),this.table}catch(t){return this.history.push(new s(i.Unsolvable,o.clone(this.table),void 0,void 0,void 0)),console.warn(t.message),null}},t.createRandom=function(e){return new t(o.rand(e))},t.createFromString=function(t){},t}(),l=function(){function t(){this.dictionary=[]}return t.prototype.getDictionary=function(){return this.dictionary},t.prototype.lookUpOrAdd=function(t){var e=this.dictionary.indexOf(t);return-1===e?(this.dictionary.push(t),this.dictionary.length-1):e},t.prototype.parse=function(t,e){t=t.trim().replace(/\t+/g," ").replace(/  +/g," ").replace(/\r\n/g,"\n"),e.value=t;var n=t.split("\n"),i=[];this.n=n.length;for(var r=0,s=n;r<s.length;r++){var a=[],l=s[r].trim().split(" ").map(function(t){return t.trim()});if(l.length-1!=this.n)throw new Error("wrong number of elements");if(!o.allDifferent(l))throw new Error("duplicated value in this row");var h=this.lookUpOrAdd(l[0]);if("|"!=l[1])throw new Error("invalid syntax");l.shift(),l.shift();for(var c=0,u=l;c<u.length;c++){var d=u[c];a.push(this.lookUpOrAdd(d))}i[h]=a}if(this.dictionary.length!==this.n)throw new Error("invalid table");return i},t}(),h=function(){return function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.value=t,this.d=e,this.r=n,this.c=i}}(),c=function(){function t(t,e,n){void 0===t&&(t=document.createElement("div")),void 0===e&&(e=document.createElement("table")),void 0===n&&(n=document.createElement("nav"));var i=this;this.controls=t,this.target=e,this.navigation=n,this.buttonLeft=document.createElement("button"),this.buttonRight=document.createElement("button"),this.pageNumber=document.createElement("span"),this.buttonLeft.textContent="<",this.buttonRight.textContent=">",this.pageNumber.textContent="0",this.checkbox=document.createElement("input"),this.checkbox.type="checkbox",this.controls.appendChild(this.buttonLeft),this.controls.appendChild(this.pageNumber),this.controls.appendChild(this.buttonRight),this.controls.appendChild(this.checkbox),this.controls.appendChild(document.createTextNode("show deleted pairs")),this.buttonLeft.addEventListener("click",function(){i.showPrev()}),this.buttonRight.addEventListener("click",function(){i.showNext()}),this.checkbox.addEventListener("click",function(){i.toggleShowDeletedPairs()}),this.navigation.addEventListener("click",function(t){i.navClicked(t)}),document.addEventListener("keydown",function(t){!i.history||37!=t.keyCode&&38!=t.keyCode?!i.history||39!=t.keyCode&&40!=t.keyCode||i.showNext():i.showPrev()})}return t.prototype.setDictionary=function(t){this.dictionary=t},t.prototype.lookUp=function(t){return null!=this.dictionary&&this.dictionary.length>t?this.dictionary[t]:t.toString()},t.prototype.setHistory=function(t){this.history=t,this.currentIndex=0,t.length>0&&(this.dimensions=t[0].table.length,this.setUp(),this.createNav())},t.prototype.setTarget=function(t){this.target=t},t.prototype.setUp=function(){this.target.innerHTML="";for(var t=document.createDocumentFragment(),e=document.createElement("tr"),n=document.createElement("td"),i=0;i<this.dimensions;i++){var o=e.cloneNode(!0),r=n.cloneNode(!0);r.classList.add("head"),r.innerHTML=i.toString(),o.appendChild(r);var s=n.cloneNode(!0);s.innerHTML=" | ",o.appendChild(s);for(var a=0;a<this.dimensions-1;a++){var l=n.cloneNode(!0);l.innerHTML="-",o.appendChild(l)}t.appendChild(o)}this.target.appendChild(t)},t.prototype.createNav=function(){var t=document.createDocumentFragment(),e=document.createElement("div");e.classList.add("navElement");for(var n=0;n<this.history.length;n++){var i=this.history[n],o=e.cloneNode(!0);o.innerHTML+="<span>"+(n+1).toString()+". step</span><span>"+i.status+"</span>",o.classList.add("status-"+i.status),o.setAttribute("index",n.toString()),t.appendChild(o)}this.navigation.innerHTML="",this.navigation.appendChild(t)},t.prototype.render=function(){var t=this,e=this.history[this.currentIndex],n=this.computeDiff(e);this.clearDecorations();for(var i=0;i<n.length;i++){var o=this.getElement(i);o.textContent=this.lookUp(i),void 0!=e.proposals&&null!=e.proposals[i]&&(o.innerHTML+="<span class='sub'> &#x1F48D;"+this.lookUp(e.proposals[i])+"</span>");for(var r=0;r<n[i].length;r++){var s=n[i][r],a=this.getElement(i,r);a.textContent=this.lookUp(s.value),s.r&&a.classList.add("highlight-3"),s.c&&a.classList.add("highlight-2"),s.d&&a.classList.add("dead")}}null!=e.rotation&&e.rotation.forEach(function(e){t.getElement(e[0]).classList.add("highlight-3")}),this.renderPager()},t.prototype.clearDecorations=function(){for(var t=this.target.querySelectorAll("td"),e=[].slice.call(t),n=0;n<e.length;n++)e[n].classList.remove("dead"),e[n].classList.remove("highlight-1"),e[n].classList.remove("highlight-2"),e[n].classList.remove("highlight-3"),e[n].classList.remove("highlight-4")},t.prototype.navClicked=function(t){for(var e=t.target;!e.classList.contains("navElement")&&"NAV"!=e.nodeName;)e=e.parentElement;e.classList.contains("navElement")&&(this.currentIndex=parseInt(e.getAttribute("index")),this.render())},t.prototype.showPrev=function(){this.currentIndex>0&&(this.currentIndex--,this.render())},t.prototype.showNext=function(){this.currentIndex+1<this.history.length&&(this.currentIndex++,this.render())},t.prototype.renderPager=function(){var t=this.history.length,e=this.currentIndex+1;this.pageNumber.innerHTML=e+" / "+t,this.buttonLeft.disabled=1==e,this.buttonRight.disabled=e==t;var n=this.navigation.querySelector(".navElement.active");n&&n.classList.remove("active"),this.navigation.querySelector(".navElement[index='"+this.currentIndex+"']").classList.add("active")},t.prototype.toggleShowDeletedPairs=function(){this.checkbox.checked?this.target.classList.add("showDeleted"):this.target.classList.remove("showDeleted")},t.prototype.getElement=function(t,e){void 0===e&&(e=-1);var n="";return t+=1,n=-1==e?"tr:nth-child("+t+") td.head":"tr:nth-child("+t+") td:nth-child("+(e+=3)+")",this.target.querySelector(n)},t.prototype.computeDiff=function(t){var e=[],n=this.history[0];if(t.status==i.Initial)for(var o=0;o<t.table.length;o++){for(var r=t.table[o],s=[],a=0;a<r.length;a++)s.push(new h(r[a]));e.push(s)}else{var l=n.table,c=t.table,u=function(n){for(var i=l[n],o=c[n],r=[],s=function(e){var s=i[e];if(-1===o.indexOf(s))r.push(new h(s,!0));else{var a=new h(s);void 0!==t.rotation&&t.rotation.forEach(function(t){t[0]===n&&l[t[0]].indexOf(t[1])===e&&(a.r=!0)}),void 0!==t.deletion&&t.deletion.forEach(function(t){(t[0]===n&&l[t[0]].indexOf(t[1])===e||t[1]===n&&l[t[1]].indexOf(t[0])===e)&&(a.c=!0)}),r.push(a)}},a=0;a<i.length;a++)s(a);e.push(r)};for(o=0;o<l.length;o++)u(o)}return e},t}(),u=function(){function t(t,e,n){var i=this;this.controls=t,this.setupWindow=e,this.demoWindow=n,this.textarea=e.querySelector("textarea"),t.querySelector("button").addEventListener("click",function(){i.toggleWindows()}),e.querySelector("#createButton").addEventListener("click",function(){i.startDemo()}),this.renderer=new c(n.querySelector("#demoControls"),n.querySelector("#demoTarget"),n.querySelector("nav"))}return t.prototype.toggleWindows=function(){this.setupWindow.classList.contains("closed")?(this.setupWindow.classList.remove("closed"),this.demoWindow.classList.add("closed")):(this.setupWindow.classList.add("closed"),this.demoWindow.classList.remove("closed"))},t.prototype.startDemo=function(){try{var t=this.textarea.value;if(-1===t.trim().indexOf(" ")){var e=parseInt(t.trim());this.preferenceList=a.createRandom(e),this.renderer.setDictionary(null)}else{var n=new l,i=n.parse(t,this.textarea),o=n.getDictionary();this.preferenceList=new a(i),this.renderer.setDictionary(o)}this.preferenceList.solve();var r=this.preferenceList.getHistory();this.renderer.setHistory(r),this.toggleWindows(),this.renderer.render()}catch(t){console.warn("fehler"),console.warn(t)}},t}();let d;window.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("controls"),e=document.getElementById("setupWindow"),n=document.getElementById("demoWindow");d=new u(t,e,n)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9zbmFwc2hvdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJlZmVyZW5jZWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmluZ3BhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvb3JkaW5hdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNuYXBzaG90U3RhdHVzIiwiVXRpbHMiLCJzaHVmZmxlIiwiYSIsImxlbmd0aCIsImoiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfYSIsInJhbmQiLCJyZXN1bHQiLCJhcnIiLCJwdXNoIiwiYWN0T25FYWNoTGluZSIsInRleHRhcmVhIiwiZnVuYyIsImxpbmVzIiwicmVwbGFjZSIsInNwbGl0IiwiYWxsRGlmZmVyZW50IiwiaW5kZXhPZiIsImNsb25lIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiU3RhdHVzIiwic3RhdHVzIiwidGFibGUiLCJwcm9wb3NhbHMiLCJyb3RhdGlvbiIsImRlbGV0aW9uIiwidGhpcyIsIlByZWZlcmVuY2VMaXN0IiwiUnVubmluZ18xIiwiaGlzdG9yeSIsImdldEhpc3RvcnkiLCJnZXRTdGF0dXMiLCJjaGVja1N0YXR1cyIsImFsbE9uZSIsImdldEZyZWVQZXJzb24iLCJSdW5uaW5nXzIiLCJTb2x2ZWQiLCJnZXRQZXJzb24iLCJmaXJzdE9mIiwic2Vjb25kT2YiLCJsYXN0T2YiLCJuZXh0T2YiLCJyZW1vdmVQYWlyIiwieCIsInkiLCJzcGxpY2UiLCJVbnNvbHZhYmxlIiwiRXJyb3IiLCJyZW1vdmVQYWlycyIsIl90aGlzIiwiZm9yRWFjaCIsInBhaXIiLCJmaW5kQWxsQWZ0ZXIiLCJ5SW5YIiwicHJvcG9zZSIsImZpbmRSb3RhdGlvbiIsInN0YWNrIiwicDIiLCJwb3AiLCJ1bnNoaWZ0IiwiZmluZFJvdGF0aW9uVmljdGltcyIsImNvbmNhdCIsInByaW50IiwiY29uc29sZSIsImxvZyIsInNvbHZlIiwic25hcHNob3QiLCJJbml0aWFsIiwidXRpbHMiLCJNYWtlUHJvcG9zYWwiLCJ1bmRlZmluZWQiLCJjYW5kaWRhdGVzIiwiRGVsZXRlIiwiUmVzdWx0IiwiRmluZFJvdGF0aW9uIiwiRmluaXNoIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsImNyZWF0ZVJhbmRvbSIsImNyZWF0ZUZyb21TdHJpbmciLCJzdHIiLCJTdHJpbmdQYXJzZXIiLCJkaWN0aW9uYXJ5IiwiZ2V0RGljdGlvbmFyeSIsImxvb2tVcE9yQWRkIiwidHJpbSIsIl9pIiwiYXJyXzEiLCJyZXN1bHRSb3ciLCJzcGxpdHRlZFJvdyIsIm1hcCIsImZpcnN0Iiwic2hpZnQiLCJzcGxpdHRlZFJvd18xIiwiZW50cnkiLCJDZWxsIiwiUmVuZGVyZXIiLCJjb250cm9scyIsInRhcmdldCIsIm5hdmlnYXRpb24iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJidXR0b25MZWZ0IiwiYnV0dG9uUmlnaHQiLCJwYWdlTnVtYmVyIiwidGV4dENvbnRlbnQiLCJjaGVja2JveCIsInR5cGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dQcmV2Iiwic2hvd05leHQiLCJ0b2dnbGVTaG93RGVsZXRlZFBhaXJzIiwiZSIsIm5hdkNsaWNrZWQiLCJrZXlDb2RlIiwic2V0RGljdGlvbmFyeSIsImxvb2tVcCIsImluZGV4IiwidG9TdHJpbmciLCJzZXRIaXN0b3J5IiwiY3VycmVudEluZGV4IiwiZGltZW5zaW9ucyIsInNldFVwIiwiY3JlYXRlTmF2Iiwic2V0VGFyZ2V0IiwiaW5uZXJIVE1MIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwicm93T3JpZ2luYWwiLCJjZWxsT3JpZ2luYWwiLCJyb3ciLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXBhcmF0b3IiLCJjZWxsIiwib3JpZ2luYWwiLCJkaXYiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXIiLCJkaWZmIiwiY29tcHV0ZURpZmYiLCJjbGVhckRlY29yYXRpb25zIiwiaGVhZENlbGwiLCJnZXRFbGVtZW50IiwidHIiLCJyZW5kZXJQYWdlciIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsImNlbGxzQXJyYXkiLCJzbGljZSIsInJlbW92ZSIsImVsIiwiY29udGFpbnMiLCJub2RlTmFtZSIsInBhcmVudEVsZW1lbnQiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsIm1heCIsImN1cnJlbnQiLCJkaXNhYmxlZCIsImFjdGl2ZSIsInF1ZXJ5U2VsZWN0b3IiLCJjaGVja2VkIiwiY29sIiwicXVlcnlTdHJpbmciLCJpbml0aWFsIiwiZXJnIiwib3JpZ2luYWxUYWJsZV8xIiwiY3VycmVudFRhYmxlIiwib3JpZ2luYWxSb3ciLCJjdXJyZW50Um93Iiwib3JpZ2luYWxDZWxsIiwiY2VsbF8xIiwiQ29vcmRpbmF0b3IiLCJzZXR1cFdpbmRvdyIsImRlbW9XaW5kb3ciLCJ0b2dnbGVXaW5kb3dzIiwic3RhcnREZW1vIiwicmVuZGVyZXIiLCJ0ZXh0IiwicHJlZmVyZW5jZUxpc3QiLCJwcmVmZXJlbmNlbGlzdCIsInN0cmluZ1BhcnNlciIsInN0cmluZ3BhcnNlciIsImRpY3QiLCJoaXN0b3J5XzEiLCJzcmNfY29vcmRpbmF0b3IiLCJ3aW5kb3ciLCJnZXRFbGVtZW50QnlJZCIsImNvb3JkaW5hdG9yIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLHlDQzdFQSxJQ0RZQyxJRENaLG9CQUFBQyxLQThDQSxPQTVDV0EsRUFBQUMsUUFBUCxTQUFlQyxHQUNYLElBQUssSUFBSW5DLEVBQUltQyxFQUFFQyxPQUFTLEVBQUdwQyxFQUFJLEVBQUdBLElBQUssQ0FDbkMsSUFBTXFDLEVBQUlDLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVl4QyxFQUFJLElBQzFDeUMsR0FBQU4sRUFBQUUsR0FBQUYsRUFBQW5DLElBQUNtQyxFQUFBbkMsR0FBQXlDLEVBQUEsR0FBTU4sRUFBQUUsR0FBQUksRUFBQSxHQUVYLE9BQU9OLFNBR0pGLEVBQUFTLEtBQVAsU0FBWWpCLEdBR1YsSUFGQSxJQUFJa0IsS0FFSzNDLEVBQUksRUFBR0EsRUFBSXlCLEVBQUd6QixJQUFLLENBRTFCLElBREEsSUFBSTRDLEtBQ0tQLEVBQUksRUFBR0EsRUFBSVosRUFBR1ksSUFDakJyQyxHQUFLcUMsR0FDVE8sRUFBSUMsS0FBS1IsR0FFVk0sRUFBTzNDLEdBQUtpQyxFQUFNQyxRQUFRVSxHQUc3QixPQUFPRCxHQUdGVixFQUFBYSxjQUFQLFNBQXFCQyxFQUFnQ0MsR0FJakQsSUFIQSxJQUFJQyxFQUFRRixFQUFTOUIsTUFBTWlDLFFBQVEsUUFBUyxNQUFNQyxNQUFNLE1BQ3BEbkQsRUFBSWlELEVBQU1iLE9BRVBwQyxLQUNIZ0QsRUFBS0MsRUFBTWpELEtBS1ppQyxFQUFBbUIsYUFBUCxTQUFvQlIsR0FDaEIsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJNEMsRUFBSVIsT0FBUXBDLElBQzVCLEdBQUk0QyxFQUFJUyxRQUFRVCxFQUFJNUMsTUFBUUEsRUFBRyxPQUFPLEVBRTFDLE9BQU8sR0FHSmlDLEVBQUFxQixNQUFQLFNBQWFWLEdBQ1QsT0FBT1csS0FBS0MsTUFBTUQsS0FBS0UsVUFBVWIsS0FHekNYLEVBOUNBLElDREEsU0FBWUQsR0FDUkEsSUFBQSxxQkFDQUEsSUFBQSwrQkFDQUEsSUFBQSwrQkFDQUEsSUFBQSxtQkFDQUEsSUFBQSxtQkFDQUEsSUFBQSxtQkFDQUEsSUFBQSwyQkFQSixDQUFZQSxXQWFaLElDUlkwQixJRFFaLFdBNENBLE9BakNJLFNBQVlDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBRVJDLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtKLE1BQVFBLEVBQ2JJLEtBQUtILFVBQVlBLEVBQ2pCRyxLQUFLRixTQUFXQSxFQUNoQkUsS0FBS0QsU0FBV0EsR0FyQnhCLElDUkEsU0FBWUwsR0FDUkEsRUFBQSw0QkFDQUEsRUFBQSw0QkFDQUEsRUFBQSxnQkFDQUEsRUFBQSx3QkFKSixDQUFZQSxXQVdaLGlCQU9JLFNBQUFPLEVBQVlMLEdBQ1JJLEtBQUtMLE9BQVNELEVBQU9RLFVBQ3JCRixLQUFLSixNQUFRQSxFQUNiSSxLQUFLSCxhQUVMLElBQUssSUFBSTdELEVBQUksRUFBR0EsRUFBSTRELEVBQU14QixPQUFRcEMsSUFDOUJnRSxLQUFLSCxVQUFVaEIsS0FBSyxNQUd4Qm1CLEtBQUtHLFdBcVRiLE9BbFRXRixFQUFBckMsVUFBQXdDLFdBQVAsV0FDSSxPQUFPSixLQUFLRyxTQVFoQkYsRUFBQXJDLFVBQUF5QyxVQUFBLFdBQ0ksT0FBT0wsS0FBS0wsUUFTaEJNLEVBQUFyQyxVQUFBMEMsWUFBQSxXQUNJLElBQUlDLEdBQVMsRUFFVFAsS0FBS0wsUUFBVUQsRUFBT1EsV0FBcUMsTUFBeEJGLEtBQUtRLGtCQUN4Q1IsS0FBS0wsT0FBU0QsRUFBT2UsV0FHekIsSUFBSyxJQUFJekUsRUFBSSxFQUFHQSxFQUFJZ0UsS0FBS0osTUFBTXhCLE9BQVFwQyxJQUMvQmdFLEtBQUtKLE1BQU01RCxHQUFHb0MsT0FBUyxJQUFHbUMsR0FBUyxHQUkzQyxPQURJQSxJQUFRUCxLQUFLTCxPQUFTRCxFQUFPZ0IsUUFDMUJWLEtBQUtMLFFBT2hCTSxFQUFBckMsVUFBQTRDLGNBQUEsV0FDSSxJQUFLLElBQUl4RSxFQUFJLEVBQUdBLEVBQUlnRSxLQUFLSCxVQUFVekIsT0FBUXBDLElBQ3ZDLEdBQTBCLE9BQXRCZ0UsS0FBS0gsVUFBVTdELEdBQWEsT0FBT0EsRUFFM0MsT0FBTyxNQVVYaUUsRUFBQXJDLFVBQUErQyxVQUFBLFdBQ0ksSUFBSyxJQUFJM0UsRUFBSSxFQUFHQSxFQUFJZ0UsS0FBS0osTUFBTXhCLE9BQVFwQyxJQUNuQyxHQUFJZ0UsS0FBS0osTUFBTTVELEdBQUdvQyxPQUFTLEVBQUcsT0FBT3BDLEVBRXpDLE9BQU8sTUFVWGlFLEVBQUFyQyxVQUFBZ0QsUUFBQSxTQUFRNUUsR0FDSixPQUFPZ0UsS0FBS0osTUFBTTVELEdBQUcsSUFVekJpRSxFQUFBckMsVUFBQWlELFNBQUEsU0FBUzdFLEdBQ0wsT0FBT2dFLEtBQUtKLE1BQU01RCxHQUFHLElBU3pCaUUsRUFBQXJDLFVBQUFrRCxPQUFBLFNBQU85RSxHQUNILE9BQU9nRSxLQUFLSixNQUFNNUQsR0FBR2dFLEtBQUtKLE1BQU01RCxHQUFHb0MsT0FBTyxJQVM5QzZCLEVBQUFyQyxVQUFBbUQsT0FBQSxTQUFPL0UsR0FDSCxPQUFPZ0UsS0FBS2MsT0FBT2QsS0FBS2EsU0FBUzdFLEtBV3JDaUUsRUFBQXJDLFVBQUFvRCxXQUFBLFNBQVdDLEVBQVVDLEdBSWpCLEdBSEFsQixLQUFLSixNQUFNcUIsR0FBR0UsT0FBT25CLEtBQUtKLE1BQU1xQixHQUFHNUIsUUFBUTZCLEdBQUksR0FDL0NsQixLQUFLSixNQUFNc0IsR0FBR0MsT0FBT25CLEtBQUtKLE1BQU1zQixHQUFHN0IsUUFBUTRCLEdBQUksR0FFbkIsR0FBeEJqQixLQUFLSixNQUFNcUIsR0FBRzdDLFFBQXVDLEdBQXhCNEIsS0FBS0osTUFBTXNCLEdBQUc5QyxPQUUzQyxNQURBNEIsS0FBS0wsT0FBU0QsRUFBTzBCLFdBQ2YsSUFBSUMsTUFBTSxzREFJeEJwQixFQUFBckMsVUFBQTBELFlBQUEsU0FBWTFDLEdBQVosSUFBQTJDLEVBQUF2QixLQUNJcEIsRUFBSTRDLFFBQVEsU0FBQUMsR0FBU0YsRUFBS1AsV0FBV1MsRUFBSyxHQUFJQSxFQUFLLE9BSXZEeEIsRUFBQXJDLFVBQUE4RCxhQUFBLFNBQWFULEVBQVVDLEdBSW5CLElBSEEsSUFBSXZDLEtBQ0FnRCxFQUFPM0IsS0FBS0osTUFBTXFCLEdBQUc1QixRQUFRNkIsR0FBSyxFQUUvQlMsRUFBTzNCLEtBQUtKLE1BQU1xQixHQUFHN0MsUUFDeEJPLEVBQU9FLE1BQU1vQyxFQUFHakIsS0FBS0osTUFBTXFCLEdBQUdVLEtBQzlCQSxJQUdKLE9BQU9oRCxHQTBCWHNCLEVBQUFyQyxVQUFBZ0UsUUFBQSxTQUFRWCxFQUFVQyxHQUVkLElBQUluRCxFQUFJaUMsS0FBS0gsVUFBVVIsUUFBUTZCLElBQ3JCLEdBQU5uRCxJQUFTaUMsS0FBS0gsVUFBVTlCLEdBQUssTUFDakNpQyxLQUFLSCxVQUFVb0IsR0FBS0MsR0FVeEJqQixFQUFBckMsVUFBQWlFLGFBQUEsV0FHSSxJQUZBLElBQUlDLEtBQVloQyxLQUFlaEMsRUFBSWtDLEtBQUtXLGFBRVgsSUFBdEJtQixFQUFNekMsUUFBUXZCLElBQ2pCZ0UsRUFBTWpELEtBQUtmLEdBQ1hBLEVBQUlrQyxLQUFLZSxPQUFPakQsR0FHcEJnQyxFQUFTakIsTUFBTWYsRUFBR2tDLEtBQUtZLFFBQVE5QyxLQUcvQixJQUZBLElBQUlpRSxFQUFLRCxFQUFNRSxNQUVSRCxHQUFNakUsR0FDVGdDLEVBQVNtQyxTQUFTRixFQUFJL0IsS0FBS1ksUUFBUW1CLEtBQ25DQSxFQUFLRCxFQUFNRSxNQUdmLE9BQU9sQyxHQUdYRyxFQUFBckMsVUFBQXNFLG9CQUFBLFNBQW9CcEMsR0FJaEIsSUFIQSxJQUFJbkIsS0FDQWxCLEVBQUlxQyxFQUFTMUIsT0FFUnBDLEVBQUksRUFBR0EsRUFBSXlCLEVBQUd6QixJQUNuQjJDLEVBQVNBLEVBQU93RCxPQUFPbkMsS0FBSzBCLGFBQWE1QixHQUFVOUQsRUFBRSxHQUFLeUIsR0FBRyxHQUFJcUMsRUFBUzlELEdBQUcsS0FHakYsT0FBTzJDLEdBcUJYc0IsRUFBQXJDLFVBQUF3RSxNQUFBLFdBSUksSUFIQSxJQUFJeEMsRUFBUUksS0FBS0osTUFDYjdCLEVBQUksR0FFQy9CLEVBQUksRUFBR0EsRUFBSTRELEVBQU14QixPQUFRcEMsSUFBSyxDQUNuQytCLEdBQUsvQixFQUFJLEtBQTZCLE9BQXRCZ0UsS0FBS0gsVUFBVTdELEdBQWMsSUFBTWdFLEtBQUtILFVBQVU3RCxJQUFNLE1BRXhFLElBQUssSUFBSXFDLEVBQUksRUFBR0EsRUFBSXVCLEVBQU01RCxHQUFHb0MsT0FBUUMsSUFDakNOLEdBQUs2QixFQUFNNUQsR0FBR3FDLEdBQUssS0FHdkJOLEdBQUssS0FHVHNFLFFBQVFDLElBQUl2RSxJQVNoQmtDLEVBQUFyQyxVQUFBMkUsTUFBQSxXQUNJLElBS0ksSUFIQXZDLEtBQUtHLFFBQVF0QixLQUFLLElBQUkyRCxFQUFTeEUsRUFBZXlFLFFBQVNDLEVBQU1wRCxNQUFNVSxLQUFLSixPQUFROEMsRUFBTXBELE1BQU1VLEtBQUtILFdBQVksS0FBTSxPQUc1R0csS0FBS00sZ0JBQWtCWixFQUFPUSxXQUFXLENBQzVDLElBQUllLEVBQUlqQixLQUFLUSxnQkFDVFUsRUFBSWxCLEtBQUtZLFFBQVFLLEdBRXJCakIsS0FBSzRCLFFBQVFYLEVBQUdDLEdBRWhCbEIsS0FBS0csUUFBUXRCLEtBQUssSUFBSTJELEVBQVN4RSxFQUFlMkUsYUFBY0QsRUFBTXBELE1BQU1VLEtBQUtKLE9BQVE4QyxFQUFNcEQsTUFBTVUsS0FBS0gsZ0JBQVkrQyxPQUFXQSxJQUM3SCxJQUFJQyxFQUFhN0MsS0FBSzBCLGFBQWFSLEVBQUdELEdBRXRDakIsS0FBS0csUUFBUXRCLEtBQUssSUFBSTJELEVBQVN4RSxFQUFlOEUsT0FBUUosRUFBTXBELE1BQU1VLEtBQUtKLE9BQVE4QyxFQUFNcEQsTUFBTVUsS0FBS0gsZ0JBQVkrQyxFQUFXQyxJQUN2SDdDLEtBQUtzQixZQUFZdUIsR0FFakI3QyxLQUFLRyxRQUFRdEIsS0FBSyxJQUFJMkQsRUFBU3hFLEVBQWUrRSxPQUFRTCxFQUFNcEQsTUFBTVUsS0FBS0osT0FBUThDLEVBQU1wRCxNQUFNVSxLQUFLSCxnQkFBWStDLE9BQVdBLElBSTNILEtBQU81QyxLQUFLTSxnQkFBa0JaLEVBQU9lLFdBQVcsQ0FDNUMsSUFBSTNELEVBQUlrRCxLQUFLNkIsZUFFYjdCLEtBQUtHLFFBQVF0QixLQUFLLElBQUkyRCxFQUFTeEUsRUFBZWdGLGFBQWNOLEVBQU1wRCxNQUFNVSxLQUFLSixZQUFRZ0QsRUFBVzlGLE9BQUc4RixJQUUvRkMsRUFBYTdDLEtBQUtrQyxvQkFBb0JwRixHQUUxQ2tELEtBQUtHLFFBQVF0QixLQUFLLElBQUkyRCxFQUFTeEUsRUFBZThFLE9BQVFKLEVBQU1wRCxNQUFNVSxLQUFLSixZQUFRZ0QsRUFBVzlGLEVBQUcrRixJQUM3RjdDLEtBQUtzQixZQUFZdUIsR0FFakI3QyxLQUFLRyxRQUFRdEIsS0FBSyxJQUFJMkQsRUFBU3hFLEVBQWUrRSxPQUFRTCxFQUFNcEQsTUFBTVUsS0FBS0osWUFBUWdELE9BQVdBLE9BQVdBLElBS3pHLE9BRkE1QyxLQUFLRyxRQUFRdEIsS0FBSyxJQUFJMkQsRUFBU3hFLEVBQWVpRixPQUFRUCxFQUFNcEQsTUFBTVUsS0FBS0osWUFBUWdELE9BQVdBLE9BQVdBLElBRTlGNUMsS0FBS0osTUFDZCxNQUFNc0QsR0FLSixPQUhBbEQsS0FBS0csUUFBUXRCLEtBQUssSUFBSTJELEVBQVN4RSxFQUFlb0QsV0FBWXNCLEVBQU1wRCxNQUFNVSxLQUFLSixZQUFRZ0QsT0FBV0EsT0FBV0EsSUFFekdQLFFBQVFjLEtBQUtELEVBQU1FLFNBQ1osT0FRUm5ELEVBQUFvRCxhQUFQLFNBQW9CNUYsR0FFaEIsT0FBTyxJQUFJd0MsRUFEQ3lDLEVBQU1oRSxLQUFLakIsS0FNcEJ3QyxFQUFBcUQsaUJBQVAsU0FBd0JDLEtBSTVCdEQsRUFyVUEsS0NsQkEsV0FLSSxTQUFBdUQsSUFDSXhELEtBQUt5RCxjQW1GYixPQTFFV0QsRUFBQTVGLFVBQUE4RixjQUFQLFdBQ0ksT0FBTzFELEtBQUt5RCxZQU1SRCxFQUFBNUYsVUFBQStGLFlBQVIsU0FBb0JKLEdBQ2hCLElBQUl2SCxFQUFJZ0UsS0FBS3lELFdBQVdwRSxRQUFRa0UsR0FFaEMsT0FBVyxJQUFQdkgsR0FDQWdFLEtBQUt5RCxXQUFXNUUsS0FBSzBFLEdBQ2R2RCxLQUFLeUQsV0FBV3JGLE9BQVMsR0FFekJwQyxHQVVmd0gsRUFBQTVGLFVBQUE0QixNQUFBLFNBQU0rRCxFQUFheEUsR0FDZndFLEVBQU1BLEVBQUlLLE9BQU8xRSxRQUFRLE9BQVEsS0FBS0EsUUFBUSxPQUFRLEtBQUtBLFFBQVEsUUFBUyxNQUU1RUgsRUFBUzlCLE1BQVFzRyxFQUVqQixJQUFJM0UsRUFBTTJFLEVBQUlwRSxNQUFNLE1BQ2hCUixLQUVKcUIsS0FBS3ZDLEVBQUltQixFQUFJUixPQUViLElBQWdCLElBQUF5RixFQUFBLEVBQUFDLEVBQUFsRixFQUFBaUYsRUFBQUMsRUFBQTFGLE9BQUF5RixJQUFHLENBQWQsSUFDR0UsS0FDQUMsRUFGSUYsRUFBQUQsR0FFY0QsT0FBT3pFLE1BQU0sS0FBSzhFLElBQUksU0FBQWxHLEdBQUssT0FBQUEsRUFBRTZGLFNBRW5ELEdBQUlJLEVBQVk1RixPQUFTLEdBQUs0QixLQUFLdkMsRUFDL0IsTUFBTSxJQUFJNEQsTUFBTSw0QkFHcEIsSUFBS3FCLEVBQU10RCxhQUFhNEUsR0FDcEIsTUFBTSxJQUFJM0MsTUFBTSxnQ0FHcEIsSUFBSTZDLEVBQVFsRSxLQUFLMkQsWUFBWUssRUFBWSxJQUV6QyxHQUFzQixLQUFsQkEsRUFBWSxHQUNaLE1BQU0sSUFBSTNDLE1BQU0sa0JBR3BCMkMsRUFBWUcsUUFDWkgsRUFBWUcsUUFFWixJQUFrQixJQUFBMUYsRUFBQSxFQUFBMkYsRUFBQUosRUFBQXZGLEVBQUEyRixFQUFBaEcsT0FBQUssSUFBVyxDQUF4QixJQUFJNEYsRUFBS0QsRUFBQTNGLEdBQ1ZzRixFQUFVbEYsS0FBS21CLEtBQUsyRCxZQUFZVSxJQUdwQzFGLEVBQU91RixHQUFTSCxFQUdwQixHQUFJL0QsS0FBS3lELFdBQVdyRixTQUFXNEIsS0FBS3ZDLEVBQ2hDLE1BQU0sSUFBSTRELE1BQU0saUJBR3BCLE9BQU8xQyxHQVFmNkUsRUF6RkEsR0NHQWMsRUFBQSxXQUVBLE9BREksU0FBbUJySCxFQUFzQlgsRUFBa0JRLEVBQWtCVCxRQUFwQyxJQUFBQyxPQUFBLFFBQWtCLElBQUFRLE9BQUEsUUFBa0IsSUFBQVQsT0FBQSxHQUExRDJELEtBQUEvQyxRQUFzQitDLEtBQUExRCxJQUFrQjBELEtBQUFsRCxJQUFrQmtELEtBQUEzRCxLQURqRixLQU9BLFdBa0JJLFNBQUFrSSxFQUFZQyxFQUEwQ0MsRUFBMENDLFFBQXBGLElBQUFGLE1BQVdHLFNBQVNDLGNBQWMsYUFBUSxJQUFBSCxNQUFTRSxTQUFTQyxjQUFjLGVBQVUsSUFBQUYsTUFBYUMsU0FBU0MsY0FBYyxRQUFwSSxJQUFBckQsRUFBQXZCLEtBQ0lBLEtBQUt3RSxTQUFXQSxFQUNoQnhFLEtBQUt5RSxPQUFTQSxFQUNkekUsS0FBSzBFLFdBQWFBLEVBR2xCMUUsS0FBSzZFLFdBQWFGLFNBQVNDLGNBQWMsVUFDekM1RSxLQUFLOEUsWUFBY0gsU0FBU0MsY0FBYyxVQUMxQzVFLEtBQUsrRSxXQUFhSixTQUFTQyxjQUFjLFFBQ3pDNUUsS0FBSzZFLFdBQVdHLFlBQWMsSUFDOUJoRixLQUFLOEUsWUFBWUUsWUFBYyxJQUMvQmhGLEtBQUsrRSxXQUFXQyxZQUFjLElBRTlCaEYsS0FBS2lGLFNBQVdOLFNBQVNDLGNBQWMsU0FDdkM1RSxLQUFLaUYsU0FBU0MsS0FBTyxXQUVyQmxGLEtBQUt3RSxTQUFTVyxZQUFZbkYsS0FBSzZFLFlBQy9CN0UsS0FBS3dFLFNBQVNXLFlBQVluRixLQUFLK0UsWUFDL0IvRSxLQUFLd0UsU0FBU1csWUFBWW5GLEtBQUs4RSxhQUMvQjlFLEtBQUt3RSxTQUFTVyxZQUFZbkYsS0FBS2lGLFVBQy9CakYsS0FBS3dFLFNBQVNXLFlBQVlSLFNBQVNTLGVBQWUsdUJBRWxEcEYsS0FBSzZFLFdBQVdRLGlCQUFpQixRQUFTLFdBQU85RCxFQUFLK0QsYUFDdER0RixLQUFLOEUsWUFBWU8saUJBQWlCLFFBQVMsV0FBTzlELEVBQUtnRSxhQUN2RHZGLEtBQUtpRixTQUFTSSxpQkFBaUIsUUFBUyxXQUFPOUQsRUFBS2lFLDJCQUVwRHhGLEtBQUswRSxXQUFXVyxpQkFBaUIsUUFBUyxTQUFDSSxHQUFrQmxFLEVBQUttRSxXQUFXRCxLQUc3RWQsU0FBU1UsaUJBQWlCLFVBQVcsU0FBQUksSUFDN0JsRSxFQUFLcEIsU0FBeUIsSUFBYnNGLEVBQUVFLFNBQThCLElBQWJGLEVBQUVFLFNBRS9CcEUsRUFBS3BCLFNBQXlCLElBQWJzRixFQUFFRSxTQUE4QixJQUFiRixFQUFFRSxTQUM3Q3BFLEVBQUtnRSxXQUZMaEUsRUFBSytELGFBbVhyQixPQXBXV2YsRUFBQTNHLFVBQUFnSSxjQUFQLFNBQXFCbkMsR0FDakJ6RCxLQUFLeUQsV0FBYUEsR0FTZGMsRUFBQTNHLFVBQUFpSSxPQUFSLFNBQWVDLEdBQ1gsT0FBdUIsTUFBbkI5RixLQUFLeUQsWUFBc0J6RCxLQUFLeUQsV0FBV3JGLE9BQVMwSCxFQUM3QzlGLEtBQUt5RCxXQUFXcUMsR0FFcEJBLEVBQU1DLFlBTVZ4QixFQUFBM0csVUFBQW9JLFdBQVAsU0FBa0I3RixHQUNkSCxLQUFLRyxRQUFVQSxFQUNmSCxLQUFLaUcsYUFBZSxFQUVoQjlGLEVBQVEvQixPQUFTLElBQ2pCNEIsS0FBS2tHLFdBQWEvRixFQUFRLEdBQUdQLE1BQU14QixPQUNuQzRCLEtBQUttRyxRQUNMbkcsS0FBS29HLGNBV043QixFQUFBM0csVUFBQXlJLFVBQVAsU0FBaUI1QixHQUNiekUsS0FBS3lFLE9BQVNBLEdBU1ZGLEVBQUEzRyxVQUFBdUksTUFBUixXQUNJbkcsS0FBS3lFLE9BQU82QixVQUFZLEdBS3hCLElBSkEsSUFBSUMsRUFBVzVCLFNBQVM2Qix5QkFDcEJDLEVBQWM5QixTQUFTQyxjQUFjLE1BQ3JDOEIsRUFBZS9CLFNBQVNDLGNBQWMsTUFFakM1SSxFQUFJLEVBQUdBLEVBQUlnRSxLQUFLa0csV0FBWWxLLElBQUssQ0FFdEMsSUFBSTJLLEVBQU1GLEVBQVlHLFdBQVUsR0FHNUIxQyxFQUFRd0MsRUFBYUUsV0FBVSxHQUNuQzFDLEVBQU0yQyxVQUFVQyxJQUFJLFFBQ3BCNUMsRUFBTW9DLFVBQVl0SyxFQUFFK0osV0FDcEJZLEVBQUl4QixZQUFZakIsR0FHaEIsSUFBSTZDLEVBQVlMLEVBQWFFLFdBQVUsR0FDdkNHLEVBQVVULFVBQVksTUFDdEJLLEVBQUl4QixZQUFZNEIsR0FFaEIsSUFBSyxJQUFJMUksRUFBSSxFQUFHQSxFQUFJMkIsS0FBS2tHLFdBQVcsRUFBRzdILElBQUssQ0FDeEMsSUFBSTJJLEVBQU9OLEVBQWFFLFdBQVUsR0FDbENJLEVBQUtWLFVBQVksSUFDakJLLEVBQUl4QixZQUFZNkIsR0FHcEJULEVBQVNwQixZQUFZd0IsR0FHekIzRyxLQUFLeUUsT0FBT1UsWUFBWW9CLElBbUI1QmhDLEVBQUEzRyxVQUFBd0ksVUFBQSxXQUNJLElBQUlHLEVBQVc1QixTQUFTNkIseUJBQ3BCUyxFQUFXdEMsU0FBU0MsY0FBYyxPQUN0Q3FDLEVBQVNKLFVBQVVDLElBQUksY0FFdkIsSUFBSyxJQUFJOUssRUFBSSxFQUFHQSxFQUFJZ0UsS0FBS0csUUFBUS9CLE9BQVFwQyxJQUFLLENBQzFDLElBQUl3RyxFQUFXeEMsS0FBS0csUUFBUW5FLEdBQ3hCa0wsRUFBT0QsRUFBU0wsV0FBVSxHQUU5Qk0sRUFBSVosV0FBYSxVQUFZdEssRUFBRSxHQUFHK0osV0FBYSxzQkFBeUJ2RCxFQUFTN0MsT0FBUyxVQUMxRnVILEVBQUlMLFVBQVVDLElBQUksVUFBWXRFLEVBQVM3QyxRQUN2Q3VILEVBQUlDLGFBQWEsUUFBU25MLEVBQUUrSixZQUM1QlEsRUFBU3BCLFlBQVkrQixHQUd6QmxILEtBQUswRSxXQUFXNEIsVUFBWSxHQUM1QnRHLEtBQUswRSxXQUFXUyxZQUFZb0IsSUFTaENoQyxFQUFBM0csVUFBQXdKLE9BQUEsZUFBQTdGLEVBQUF2QixLQUNRd0MsRUFBV3hDLEtBQUtHLFFBQVFILEtBQUtpRyxjQUM3Qm9CLEVBQU9ySCxLQUFLc0gsWUFBWTlFLEdBRTVCeEMsS0FBS3VILG1CQUVMLElBQUssSUFBSXZMLEVBQUksRUFBR0EsRUFBSXFMLEVBQUtqSixPQUFRcEMsSUFBSyxDQUNsQyxJQUFJd0wsRUFBV3hILEtBQUt5SCxXQUFXekwsR0FDL0J3TCxFQUFTeEMsWUFBY2hGLEtBQUs2RixPQUFPN0osUUFFVDRHLEdBQXRCSixFQUFTM0MsV0FBbUQsTUFBekIyQyxFQUFTM0MsVUFBVTdELEtBQ3REd0wsRUFBU2xCLFdBQWEsK0JBQWlDdEcsS0FBSzZGLE9BQU9yRCxFQUFTM0MsVUFBVTdELElBQU0sV0FHaEcsSUFBSyxJQUFJcUMsRUFBSSxFQUFHQSxFQUFJZ0osRUFBS3JMLEdBQUdvQyxPQUFRQyxJQUFLLENBQ3JDLElBQUkySSxFQUFPSyxFQUFLckwsR0FBR3FDLEdBQ2ZxSixFQUFLMUgsS0FBS3lILFdBQVd6TCxFQUFHcUMsR0FFNUJxSixFQUFHMUMsWUFBY2hGLEtBQUs2RixPQUFPbUIsRUFBSy9KLE9BSTlCK0osRUFBS2xLLEdBQUc0SyxFQUFHYixVQUFVQyxJQUFJLGVBRXpCRSxFQUFLM0ssR0FBR3FMLEVBQUdiLFVBQVVDLElBQUksZUFFekJFLEVBQUsxSyxHQUFHb0wsRUFBR2IsVUFBVUMsSUFBSSxTQUtaLE1BQXJCdEUsRUFBUzFDLFVBQ1QwQyxFQUFTMUMsU0FBUzBCLFFBQVEsU0FBQUMsR0FDdEJGLEVBQUtrRyxXQUFXaEcsRUFBSyxJQUFJb0YsVUFBVUMsSUFBSSxpQkFLL0M5RyxLQUFLMkgsZUFHRHBELEVBQUEzRyxVQUFBMkosaUJBQVIsV0FJSSxJQUhBLElBQUlLLEVBQW1CNUgsS0FBS3lFLE9BQU9vRCxpQkFBaUIsTUFDaERDLEtBQXFDQyxNQUFNNUwsS0FBS3lMLEdBRTNDNUwsRUFBSSxFQUFHQSxFQUFJOEwsRUFBVzFKLE9BQVFwQyxJQUNuQzhMLEVBQVc5TCxHQUFHNkssVUFBVW1CLE9BQU8sUUFDL0JGLEVBQVc5TCxHQUFHNkssVUFBVW1CLE9BQU8sZUFDL0JGLEVBQVc5TCxHQUFHNkssVUFBVW1CLE9BQU8sZUFDL0JGLEVBQVc5TCxHQUFHNkssVUFBVW1CLE9BQU8sZUFDL0JGLEVBQVc5TCxHQUFHNkssVUFBVW1CLE9BQU8sZ0JBV3ZDekQsRUFBQTNHLFVBQUE4SCxXQUFBLFNBQVdELEdBR1AsSUFGQSxJQUFJd0MsRUFBTXhDLEVBQUVoQixRQUVKd0QsRUFBR3BCLFVBQVVxQixTQUFTLGVBQWdDLE9BQWZELEVBQUdFLFVBQzlDRixFQUFLQSxFQUFHRyxjQUdSSCxFQUFHcEIsVUFBVXFCLFNBQVMsZ0JBQ3RCbEksS0FBS2lHLGFBQWVvQyxTQUFTSixFQUFHSyxhQUFhLFVBQzdDdEksS0FBS29ILFdBV2I3QyxFQUFBM0csVUFBQTBILFNBQUEsV0FDUXRGLEtBQUtpRyxhQUFlLElBQ3BCakcsS0FBS2lHLGVBQ0xqRyxLQUFLb0gsV0FhYjdDLEVBQUEzRyxVQUFBMkgsU0FBQSxXQUNRdkYsS0FBS2lHLGFBQWEsRUFBSWpHLEtBQUtHLFFBQVEvQixTQUNuQzRCLEtBQUtpRyxlQUNMakcsS0FBS29ILFdBT0w3QyxFQUFBM0csVUFBQStKLFlBQVIsV0FDSSxJQUFJWSxFQUFNdkksS0FBS0csUUFBUS9CLE9BQ25Cb0ssRUFBVXhJLEtBQUtpRyxhQUFlLEVBQ2xDakcsS0FBSytFLFdBQVd1QixVQUFZa0MsRUFBVSxNQUFRRCxFQUM5Q3ZJLEtBQUs2RSxXQUFXNEQsU0FBc0IsR0FBWEQsRUFDM0J4SSxLQUFLOEUsWUFBWTJELFNBQVdELEdBQVdELEVBRXZDLElBQUlHLEVBQVMxSSxLQUFLMEUsV0FBV2lFLGNBQWMsc0JBQ3ZDRCxHQUFRQSxFQUFPN0IsVUFBVW1CLE9BQU8sVUFFcEJoSSxLQUFLMEUsV0FBV2lFLGNBQWMsc0JBQXdCM0ksS0FBS2lHLGFBQWUsTUFFaEZZLFVBQVVDLElBQUksV0FHNUJ2QyxFQUFBM0csVUFBQTRILHVCQUFBLFdBQ1F4RixLQUFLaUYsU0FBUzJELFFBQ2Q1SSxLQUFLeUUsT0FBT29DLFVBQVVDLElBQUksZUFFMUI5RyxLQUFLeUUsT0FBT29DLFVBQVVtQixPQUFPLGdCQU9yQ3pELEVBQUEzRyxVQUFBNkosV0FBQSxTQUFXZCxFQUFha0MsUUFBQSxJQUFBQSxPQUFPLEdBQzNCLElBQUlDLEVBQWMsR0FVbEIsT0FUQW5DLEdBQU8sRUFHSG1DLEdBRFEsR0FBUkQsRUFDYyxnQkFBa0JsQyxFQUFNLFlBR3hCLGdCQUFrQkEsRUFBTSxtQkFEdENrQyxHQUFPLEdBQ3lELElBRzdEN0ksS0FBS3lFLE9BQU9rRSxjQUFjRyxJQVVyQ3ZFLEVBQUEzRyxVQUFBMEosWUFBQSxTQUFZdkosR0FDUixJQUFJWSxLQUNBb0ssRUFBVS9JLEtBQUtHLFFBQVEsR0FFM0IsR0FBSXBDLEVBQUU0QixRQUFVM0IsRUFBZXlFLFFBQzNCLElBQUssSUFBSXpHLEVBQUksRUFBR0EsRUFBSStCLEVBQUU2QixNQUFNeEIsT0FBUXBDLElBQUssQ0FJckMsSUFIQSxJQUFJMkssRUFBTTVJLEVBQUU2QixNQUFNNUQsR0FDZGdOLEtBRUszSyxFQUFJLEVBQUdBLEVBQUlzSSxFQUFJdkksT0FBUUMsSUFDNUIySyxFQUFJbkssS0FBSyxJQUFJeUYsRUFBS3FDLEVBQUl0SSxLQUUxQk0sRUFBT0UsS0FBS21LLE9BR2hCLEtBQUlDLEVBQWdCRixFQUFRbkosTUFDeEJzSixFQUFlbkwsRUFBRTZCLGlCQWtCWjVELEdBS0wsSUFKQSxJQUFJbU4sRUFBY0YsRUFBY2pOLEdBQzVCb04sRUFBYUYsRUFBYWxOLEdBQzFCZ04sZ0JBRUszSyxHQUNMLElBQUlnTCxFQUFlRixFQUFZOUssR0FFL0IsSUFBMEMsSUFBdEMrSyxFQUFXL0osUUFBUWdLLEdBRW5CTCxFQUFJbkssS0FBSyxJQUFJeUYsRUFBSytFLEdBQWMsUUFDN0IsQ0FFSCxJQUFJQyxFQUFPLElBQUloRixFQUFLK0UsUUFFRHpHLElBQWY3RSxFQUFFK0IsVUFDRi9CLEVBQUUrQixTQUFTMEIsUUFBUSxTQUFBQyxHQUNYQSxFQUFLLEtBQU96RixHQUFLaU4sRUFBY3hILEVBQUssSUFBSXBDLFFBQVFvQyxFQUFLLE1BQVFwRCxJQUM3RGlMLEVBQUt4TSxHQUFJLFVBS0Y4RixJQUFmN0UsRUFBRWdDLFVBQ0ZoQyxFQUFFZ0MsU0FBU3lCLFFBQVEsU0FBQUMsSUFDWEEsRUFBSyxLQUFPekYsR0FBS2lOLEVBQWN4SCxFQUFLLElBQUlwQyxRQUFRb0MsRUFBSyxNQUFRcEQsR0FDN0RvRCxFQUFLLEtBQU96RixHQUFLaU4sRUFBY3hILEVBQUssSUFBSXBDLFFBQVFvQyxFQUFLLE1BQVFwRCxLQUM3RGlMLEVBQUtqTixHQUFJLEtBS3JCMk0sRUFBSW5LLEtBQUt5SyxLQTNCUmpMLEVBQUksRUFBR0EsRUFBSThLLEVBQVkvSyxPQUFRQyxNQUEvQkEsR0ErQlRNLEVBQU9FLEtBQUttSyxJQXBDaEIsSUFBU2hOLEVBQUksRUFBR0EsRUFBSWlOLEVBQWM3SyxPQUFRcEMsTUFBakNBLEdBeUNiLE9BQU8yQyxHQUtmNEYsRUFwYUEsS0NKQSxXQWFJLFNBQUFnRixFQUFZL0UsRUFBMkJnRixFQUE2QkMsR0FBcEUsSUFBQWxJLEVBQUF2QixLQUVJQSxLQUFLd0UsU0FBV0EsRUFDaEJ4RSxLQUFLd0osWUFBY0EsRUFDbkJ4SixLQUFLeUosV0FBYUEsRUFDbEJ6SixLQUFLakIsU0FBV3lLLEVBQVliLGNBQWMsWUFHMUNuRSxFQUFTbUUsY0FBYyxVQUFVdEQsaUJBQWlCLFFBQVMsV0FDdkQ5RCxFQUFLbUksa0JBR1RGLEVBQVliLGNBQWMsaUJBQWlCdEQsaUJBQWlCLFFBQVMsV0FDakU5RCxFQUFLb0ksY0FLVDNKLEtBQUs0SixTQUFXLElBQUlBLEVBQVNILEVBQVdkLGNBQWMsaUJBQ2xEYyxFQUFXZCxjQUFjLGVBQWdCYyxFQUFXZCxjQUFjLFFBcUQ5RSxPQTNDSVksRUFBQTNMLFVBQUE4TCxjQUFBLFdBQ1ExSixLQUFLd0osWUFBWTNDLFVBQVVxQixTQUFTLFdBQ3BDbEksS0FBS3dKLFlBQVkzQyxVQUFVbUIsT0FBTyxVQUNsQ2hJLEtBQUt5SixXQUFXNUMsVUFBVUMsSUFBSSxZQUU5QjlHLEtBQUt3SixZQUFZM0MsVUFBVUMsSUFBSSxVQUMvQjlHLEtBQUt5SixXQUFXNUMsVUFBVW1CLE9BQU8sWUFJekN1QixFQUFBM0wsVUFBQStMLFVBQUEsV0FFSSxJQUNJLElBQUlFLEVBQU83SixLQUFLakIsU0FBUzlCLE1BRXpCLElBQWtDLElBQTlCNE0sRUFBS2pHLE9BQU92RSxRQUFRLEtBQWEsQ0FFakMsSUFBSTVCLEVBQUk0SyxTQUFTd0IsRUFBS2pHLFFBQ3RCNUQsS0FBSzhKLGVBQWlCQyxFQUFlMUcsYUFBYTVGLEdBQ2xEdUMsS0FBSzRKLFNBQVNoRSxjQUFjLFVBQ3pCLENBRUgsSUFBSW9FLEVBQWUsSUFBSUMsRUFDbkJySyxFQUFRb0ssRUFBYXhLLE1BQU1xSyxFQUFNN0osS0FBS2pCLFVBQ3RDbUwsRUFBT0YsRUFBYXRHLGdCQUN4QjFELEtBQUs4SixlQUFpQixJQUFJQyxFQUFlbkssR0FDekNJLEtBQUs0SixTQUFTaEUsY0FBY3NFLEdBSWhDbEssS0FBSzhKLGVBQWV2SCxRQUNwQixJQUFJNEgsRUFBVW5LLEtBQUs4SixlQUFlMUosYUFFbENKLEtBQUs0SixTQUFTNUQsV0FBV21FLEdBQ3pCbkssS0FBSzBKLGdCQUNMMUosS0FBSzRKLFNBQVN4QyxTQUVoQixNQUFNM0IsR0FDSnBELFFBQVFjLEtBQUssVUFDYmQsUUFBUWMsS0FBS3NDLEtBSXpCOEQsRUFyRkEsR0NOQSxJQUFBYSxFQUVBQyxPQUFBaEYsaUJBQUEsOEJBRUEsSUFBQWIsRUFBQUcsU0FBQTJGLGVBQUEsWUFDQWQsRUFBQTdFLFNBQUEyRixlQUFBLGVBQ0FiLEVBQUE5RSxTQUFBMkYsZUFBQSxjQUVBRixFQUFBLElBQUFHLEVBQUEvRixFQUFBZ0YsRUFBQUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwidHlwZSBDYWxsYmFjayA9IChzOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG4vKipcclxuICAgIFV0aWxpdHkgY2xhc3MgZm9yIHN0YWJsZSByb29tbWF0ZXNcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXRpbHMge1xyXG5cclxuICAgIHN0YXRpYyBzaHVmZmxlKGEgOiBBcnJheTxhbnk+KSA6IEFycmF5PGFueT4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBhLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgICAgICBbYVtpXSwgYVtqXV0gPSBbYVtqXSwgYVtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByYW5kKG4gOiBudW1iZXIpIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuOyBqKyspIHtcclxuICAgICAgICAgIGlmIChpID09IGopIGNvbnRpbnVlO1xyXG4gICAgICAgICAgYXJyLnB1c2goaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICByZXN1bHRbaV0gPSBVdGlscy5zaHVmZmxlKGFycik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFjdE9uRWFjaExpbmUodGV4dGFyZWEgOiBIVE1MVGV4dEFyZWFFbGVtZW50LCBmdW5jIDogQ2FsbGJhY2spIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IGxpbmVzID0gdGV4dGFyZWEudmFsdWUucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpLnNwbGl0KFwiXFxuXCIpLFxyXG4gICAgICAgICAgICBpID0gbGluZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIGZ1bmMobGluZXNbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFsbERpZmZlcmVudChhcnI6IEFycmF5PGFueT4pIDogYm9vbGVhbiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGFyci5pbmRleE9mKGFycltpXSkgIT09IGkpIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjbG9uZShhcnIgOiBhbnkpIDogYW55IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcnIpKVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIlxyXG5pbXBvcnQge1N0YXR1c30gZnJvbSBcIi4vcHJlZmVyZW5jZWxpc3RcIlxyXG5pbXBvcnQgUHJlZmVyZW5jZUxpc3QgZnJvbSBcIi4vcHJlZmVyZW5jZWxpc3RcIlxyXG5cclxuZXhwb3J0IGVudW0gU25hcHNob3RTdGF0dXMge1xyXG4gICAgSW5pdGlhbCxcclxuICAgIE1ha2VQcm9wb3NhbCxcclxuICAgIEZpbmRSb3RhdGlvbixcclxuICAgIERlbGV0ZSxcclxuICAgIFJlc3VsdCxcclxuICAgIEZpbmlzaCxcclxuICAgIFVuc29sdmFibGVcclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbmFwc2hvdCB7XHJcblxyXG4gICAgc3RhdHVzOiBTbmFwc2hvdFN0YXR1c1xyXG4gICAgdGFibGU6IEFycmF5PEFycmF5PG51bWJlcj4+XHJcbiAgICBwcm9wb3NhbHM6IEFycmF5PG51bWJlcj5cclxuICAgIHJvdGF0aW9uOiBBcnJheTxBcnJheTxudW1iZXI+PlxyXG4gICAgZGVsZXRpb246IEFycmF5PEFycmF5PG51bWJlcj4+XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdGF0dXM6IFNuYXBzaG90U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IEFycmF5PEFycmF5PG51bWJlcj4+LFxyXG4gICAgICAgICAgICAgICAgcHJvcG9zYWxzOiBBcnJheTxudW1iZXI+LFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246IEFycmF5PEFycmF5PG51bWJlcj4+LFxyXG4gICAgICAgICAgICAgICAgZGVsZXRpb246IEFycmF5PEFycmF5PG51bWJlcj4+KSB7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzXHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHRhYmxlXHJcbiAgICAgICAgdGhpcy5wcm9wb3NhbHMgPSBwcm9wb3NhbHNcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb25cclxuICAgICAgICB0aGlzLmRlbGV0aW9uID0gZGVsZXRpb25cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNvbnN0cnVjdG9yIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBwOlByZWZlcmVuY2VMaXN0IGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgY29uc3RydWN0b3IocDpQcmVmZXJlbmNlTGlzdCkge1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gcC5nZXRTdGF0dXMoKVxyXG4gICAgICAgIHRoaXMudGFibGUgPSBVdGlscy5jbG9uZShwLnRhYmxlKSAvLyBkZWVwIGNvcHlcclxuICAgICAgICB0aGlzLnByb3Bvc2FscyA9IFV0aWxzLmNsb25lKHAucHJvcG9zYWxzKSAvLyBkZWVwIGNvcHlcclxuXHJcbiAgICAgICAgaWYgKHAuZ2V0SGlzdG9yeSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxTbmFwc2hvdCA9IG51bGxcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxTbmFwc2hvdCA9IHAuZ2V0SGlzdG9yeSgpWzBdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gVXRpbHMuY2xvbmUocC5nZXRSb3RhdGlvbigpKVxyXG4gICAgfSovXHJcblxyXG59XHJcbiIsImltcG9ydCBVdGlscyBmcm9tIFwiLi91dGlsc1wiXHJcbmltcG9ydCBTbmFwc2hvdCBmcm9tIFwiLi9zbmFwc2hvdFwiXHJcbmltcG9ydCB7U25hcHNob3RTdGF0dXN9IGZyb20gXCIuL3NuYXBzaG90XCJcclxuXHJcbmNvbnN0IFJVTk5JTkdfMSA9IDBcclxuY29uc3QgUlVOTklOR18yID0gMVxyXG5jb25zdCBTT0xWRUQgPSAyXHJcbmNvbnN0IFVOU09MVkFCTEUgPSAzXHJcblxyXG5leHBvcnQgZW51bSBTdGF0dXMge1xyXG4gICAgUnVubmluZ18xID0gXCJQaGFzZSAxIHJ1bm5pbmdcIixcclxuICAgIFJ1bm5pbmdfMiA9IFwiUGhhc2UgMiBydW5uaW5nXCIsXHJcbiAgICBTb2x2ZWQgPSBcInNvbHZlZFwiLFxyXG4gICAgVW5zb2x2YWJsZSA9IFwidW5zb2x2YWJsZVwiXHJcbn1cclxuXHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWZlcmVuY2VMaXN0IHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXR1czogU3RhdHVzXHJcbiAgICBwcml2YXRlIHRhYmxlOiBBcnJheTxBcnJheTxudW1iZXI+PlxyXG4gICAgcHJpdmF0ZSBwcm9wb3NhbHM6IEFycmF5PG51bWJlcj5cclxuICAgIHByaXZhdGUgaGlzdG9yeTogQXJyYXk8U25hcHNob3Q+XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFibGU6IEFycmF5PEFycmF5PG51bWJlcj4+KSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBTdGF0dXMuUnVubmluZ18xXHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHRhYmxlXHJcbiAgICAgICAgdGhpcy5wcm9wb3NhbHMgPSBbXVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcG9zYWxzLnB1c2gobnVsbClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IFtdXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhpc3RvcnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZ2V0U3RhdHVzIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBnZXRTdGF0dXMoKSA6IFN0YXR1cyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY2hlY2tTdGF0dXMgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBjaGVja1N0YXR1cygpIDogU3RhdHVzIHtcclxuICAgICAgICBsZXQgYWxsT25lID0gdHJ1ZVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gU3RhdHVzLlJ1bm5pbmdfMSAmJiB0aGlzLmdldEZyZWVQZXJzb24oKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gU3RhdHVzLlJ1bm5pbmdfMlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlW2ldLmxlbmd0aCA+IDEpIGFsbE9uZSA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYWxsT25lKSB0aGlzLnN0YXR1cyA9IFN0YXR1cy5Tb2x2ZWRcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXNcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICBvbmx5IG5lZWRlZCBkdXJpbmcgZmlyc3QgcGhhc2Ugb2YgdGhlIGFsZ29yaXRobS5cclxuICAgICAgICByZXR1cm5zIGEgcGVyc29uIHdoaWNoIGlzIG5vdCBzZW1pZW5nYWdlZCB0byBhbnlib2R5XHJcbiAgICAqL1xyXG4gICAgZ2V0RnJlZVBlcnNvbigpIDogbnVtYmVyIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvcG9zYWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3Bvc2Fsc1tpXSA9PT0gbnVsbCkgcmV0dXJuIGlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQZXJzb24gLSBmaW5kcyBhbiBlbnRyeSBwb2ludCBmb3IgYSByb3RhdGlvbjogdGhlIGZpcnN0IHBlcnNvbiB3aXRoXHJcbiAgICAgKiBtb3JlIHRoYW4gb25lIHBlcnNvbiByZW1haW5pbmcgaW4gaXRzIHBlcmZlcmVuY2UgbGlzdFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge251bWJlcnxudWxsfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29uKCkgOiBudW1iZXIge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50YWJsZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJsZVtpXS5sZW5ndGggPiAxKSByZXR1cm4gaVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZpcnN0T2YgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGkgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgZmlyc3RPZihpOm51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhYmxlW2ldWzBdXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2Vjb25kT2YgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGkgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgc2Vjb25kT2YoaTpudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YWJsZVtpXVsxXVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbGFzdE9mIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBpIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGxhc3RPZihpOm51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhYmxlW2ldW3RoaXMudGFibGVbaV0ubGVuZ3RoLTFdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBuZXh0T2YgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGkgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgbmV4dE9mKGk6bnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdE9mKHRoaXMuc2Vjb25kT2YoaSkpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZW1vdmVQYWlyIC0gcmVtb3ZlcyBwYWlyIHt4LCB5fVxyXG4gICAgICogc28gcmVtb3ZlcyB4IGZyb20geSdzIHByZWZlcmVuY2VMaXN0IGFuZCB2aWNlIHZlcnNhXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4IHBlcnNvbiAxXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgcGVyc29uIDJcclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiBhbnkgcHJlZmVyZW5jZUxpc3QgZ2V0cyBlbXB0eVxyXG4gICAgICovXHJcbiAgICByZW1vdmVQYWlyKHg6bnVtYmVyLCB5Om51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnRhYmxlW3hdLnNwbGljZSh0aGlzLnRhYmxlW3hdLmluZGV4T2YoeSksIDEpXHJcbiAgICAgICAgdGhpcy50YWJsZVt5XS5zcGxpY2UodGhpcy50YWJsZVt5XS5pbmRleE9mKHgpLCAxKVxyXG5cclxuICAgICAgICBpZiAodGhpcy50YWJsZVt4XS5sZW5ndGggPT0gMCB8fCB0aGlzLnRhYmxlW3ldLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gU3RhdHVzLlVuc29sdmFibGVcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZW1wdHkgcHJlZmVyZW5jZWxpc3QsIG5vIHN0YWJsZSBtYXRjaGluZyBwb3NzaWJsZVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVQYWlycyhhcnI6IEFycmF5PEFycmF5PG51bWJlcj4+KSB7XHJcbiAgICAgICAgYXJyLmZvckVhY2gocGFpciA9PiB7dGhpcy5yZW1vdmVQYWlyKHBhaXJbMF0sIHBhaXJbMV0pfSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgZmluZEFsbEFmdGVyKHg6bnVtYmVyLCB5Om51bWJlcikgOiBBcnJheTxBcnJheTxudW1iZXI+PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdXHJcbiAgICAgICAgbGV0IHlJblggPSB0aGlzLnRhYmxlW3hdLmluZGV4T2YoeSkgKyAxXHJcblxyXG4gICAgICAgIHdoaWxlICh5SW5YIDwgdGhpcy50YWJsZVt4XS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goW3gsIHRoaXMudGFibGVbeF1beUluWF1dKVxyXG4gICAgICAgICAgICB5SW5YKytcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbW92ZUFsbEFmdGVyIC0gKHByb2NlZHVyYWwpIHJlbW92ZXMgYWxsIHBlcnNvbnMgYWZ0ZXIgeSBpbiB4J3MgbGlzdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBwZXJzb24gMVxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IHBlcnNvbiAyXHJcbiAgICAgKlxyXG4gICAgcmVtb3ZlQWxsQWZ0ZXIoeDpudW1iZXIsIHk6bnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIGxldCB5SW5YID0gdGhpcy50YWJsZVt4XS5pbmRleE9mKHkpICsgMVxyXG5cclxuICAgICAgICB3aGlsZSAodGhpcy50YWJsZVt4XS5sZW5ndGggPiB5SW5YKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFpcih4LCB0aGlzLnRhYmxlW3hdW3lJblhdKVxyXG4gICAgICAgIH1cclxuICAgIH0qL1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHByb3Bvc2UgLSBvbmx5IG5lZWRlZCBkdXJpbmcgcGhhc2UgMVxyXG4gICAgICogcGVyc29uIHggbWFrZXMgYSBwcm9wb3NhbCB0byBwZXJzb24geSwgdGhlcmVmb3JlIGVhY2ggcGFpciB7eSwgen0gd2l0aFxyXG4gICAgICogeiBjb21pbmcgYWZ0ZXIgeCBvbiB5J3MgbGlzdCB3aWxsIGJlIGRlbGV0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggcGVyc29uIDEgbWFrZXMgcHJvcG9zYWxcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geSBwZXJzb24gMiByZWNlaXZlcyBwcm9wb3NhbFxyXG4gICAgICovXHJcbiAgICBwcm9wb3NlKHg6bnVtYmVyLCB5Om51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICAvLyBldmVudHVhbGx5IHJlamVjdCBwcmV2aW91cyBwcm9wb3NhbFxyXG4gICAgICAgIGxldCBzID0gdGhpcy5wcm9wb3NhbHMuaW5kZXhPZih5KVxyXG4gICAgICAgIGlmIChzICE9IC0xKSB0aGlzLnByb3Bvc2Fsc1tzXSA9IG51bGxcclxuICAgICAgICB0aGlzLnByb3Bvc2Fsc1t4XSA9IHlcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmaW5kUm90YXRpb24gLSBmaW5kcyBhIHJvdGF0aW9uIGV4cG9zZWQgaW4gdGhlIGN1cnJlbnQgdGFibGVcclxuICAgICAqIG5vdGUgdGhhdCB0aGVyZSBjYW4gYmUgbXVsdGlwbGUgZXhwb3NlZCByb3RhdGlvbnMsIGJ1dCB0aGlzIG1ldGhvZCBvbmx5IHJldHVybnMgb25lIG9mIHRoZW1cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHthcnJheX0gIGFycmF5IG9mIHRoZSBmb3JtIFtbeDEsIHkxXSwgW3gyLCB5Ml0sIC4uLl1cclxuICAgICAqL1xyXG4gICAgZmluZFJvdGF0aW9uKCkgOiBBcnJheTxBcnJheTxudW1iZXI+PiB7XHJcbiAgICAgICAgbGV0IHN0YWNrID0gW10sIHJvdGF0aW9uID0gW10sIHAgPSB0aGlzLmdldFBlcnNvbigpXHJcblxyXG4gICAgICAgIHdoaWxlIChzdGFjay5pbmRleE9mKHApID09PSAtMSkge1xyXG4gICAgICAgICAgICBzdGFjay5wdXNoKHApXHJcbiAgICAgICAgICAgIHAgPSB0aGlzLm5leHRPZihwKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcm90YXRpb24ucHVzaChbcCwgdGhpcy5maXJzdE9mKHApXSlcclxuICAgICAgICBsZXQgcDIgPSBzdGFjay5wb3AoKVxyXG5cclxuICAgICAgICB3aGlsZSAocDIgIT0gcCkge1xyXG4gICAgICAgICAgICByb3RhdGlvbi51bnNoaWZ0KFtwMiwgdGhpcy5maXJzdE9mKHAyKV0pIC8vIHByZXBlbmQgcGFpciB0byB0aGUgcm90YXRpb24gYXJyYXlcclxuICAgICAgICAgICAgcDIgPSBzdGFjay5wb3AoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgZmluZFJvdGF0aW9uVmljdGltcyhyb3RhdGlvbjogQXJyYXk8QXJyYXk8bnVtYmVyPj4pIDogQXJyYXk8QXJyYXk8bnVtYmVyPj4ge1xyXG4gICAgICAgIGxldCByZXN1bHQ6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW10sXHJcbiAgICAgICAgICAgIG4gPSByb3RhdGlvbi5sZW5ndGhcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCh0aGlzLmZpbmRBbGxBZnRlcihyb3RhdGlvblsoaSsxKSAlIG5dWzFdLCByb3RhdGlvbltpXVswXSkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBkZWxldGVSb3RhdGlvbiAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gcm90YXRpb24gZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgZGVsZXRlUm90YXRpb24ocm90YXRpb246QXJyYXk8QXJyYXk8bnVtYmVyPj4pIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IG4gPSByb3RhdGlvbi5sZW5ndGhcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFsbEFmdGVyKHJvdGF0aW9uWyhpKzEpICUgbl1bMV0sIHJvdGF0aW9uW2ldWzBdKVxyXG4gICAgICAgIH1cclxuICAgIH0qL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogcHJpbnQgLSB3cml0ZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHRhYmxlIHRvIHRoZSBjb25zb2xlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gb3JpZyA9IGZhbHNlIHdoZXRlciB0byBwcmludCB0aGUgb3JpZ2luYWwgdGFibGUgb3IgdGhlIGN1cnJlbnQgc3RhdHVzIGR1cmluZyB0aGUgcmVkdWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaW50KCkgOiB2b2lkIHtcclxuICAgICAgICBsZXQgdGFibGUgPSB0aGlzLnRhYmxlXHJcbiAgICAgICAgbGV0IHMgPSBcIlwiXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcyArPSBpICsgXCJbXCIgKyAodGhpcy5wcm9wb3NhbHNbaV0gPT09IG51bGwgPyBcIi1cIiA6IHRoaXMucHJvcG9zYWxzW2ldKSArIFwiXXwgXCJcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGFibGVbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHMgKz0gdGFibGVbaV1bal0gKyBcIiAgXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcyArPSBcIlxcblwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhzKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc29sdmUgLSB0cmllcyB0byBmdWxseSByZWR1Y2UgdGhlIHByZWZlcmVuY2VMaXN0IGluc3RhbmNlLlxyXG4gICAgICogcmV0dXJucyBhIHBvc3NpYmxlIHN0YWJsZSBtYXRjaGluZywgb3IgbnVsbCBpZiBubyBzdGFibGUgbWF0Y2hpbmcgZXhpc3RzXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7YXJyYXl8bnVsbH0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHNvbHZlKCkgOiBBcnJheTxBcnJheTxudW1iZXI+PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gYWRkIGluaXRpYWwgc25hcHNob3RcclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLkluaXRpYWwsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCBVdGlscy5jbG9uZSh0aGlzLnByb3Bvc2FscyksIG51bGwsIG51bGwpKVxyXG5cclxuICAgICAgICAgICAgLy8gcGVyZm9ybSBwaGFzZSAxXHJcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmNoZWNrU3RhdHVzKCkgPT09IFN0YXR1cy5SdW5uaW5nXzEpIHtcclxuICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5nZXRGcmVlUGVyc29uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRoaXMuZmlyc3RPZih4KVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcG9zZSh4LCB5KVxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHNuYXBzaG90IHdoZXJlIHggcHJvcG9zZXMgdG8geVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLk1ha2VQcm9wb3NhbCwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIFV0aWxzLmNsb25lKHRoaXMucHJvcG9zYWxzKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpKVxyXG4gICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSB0aGlzLmZpbmRBbGxBZnRlcih5LCB4KVxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHNuYXBzaG90IHdpdGggYWxsIGNhbmRpZGF0ZXMgdGhhdCB3aWxsIGJlIGRlbGV0ZWRcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5EZWxldGUsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCBVdGlscy5jbG9uZSh0aGlzLnByb3Bvc2FscyksIHVuZGVmaW5lZCwgY2FuZGlkYXRlcykpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBhaXJzKGNhbmRpZGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgcmVzdWx0IHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChuZXcgU25hcHNob3QoU25hcHNob3RTdGF0dXMuUmVzdWx0LCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgVXRpbHMuY2xvbmUodGhpcy5wcm9wb3NhbHMpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHBlcmZvcm0gcGhhc2UgMlxyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5jaGVja1N0YXR1cygpID09PSBTdGF0dXMuUnVubmluZ18yKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgciA9IHRoaXMuZmluZFJvdGF0aW9uKClcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBzbmFwc2hvdCB3aGVyZSBmb3VuZCByb3RhdGlvbiBpcyBoaWdobGlnaHRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLkZpbmRSb3RhdGlvbiwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIHVuZGVmaW5lZCwgciwgdW5kZWZpbmVkKSlcclxuICAgICAgICAgICAgICAgIC8vIGZpbmQgY2FuZGlkYXRlcyB0aGF0IHdpbGwgYmUgZGVsZXRlZCBiZWNhdXNlIG9mIHRoaXMgcm90YXRpb25cclxuICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5maW5kUm90YXRpb25WaWN0aW1zKHIpXHJcbiAgICAgICAgICAgICAgICAvLyB0YWtlIHNuYXBzaG90IHdpdGggY2FuZGlkYXRlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLkRlbGV0ZSwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIHVuZGVmaW5lZCwgciwgY2FuZGlkYXRlcykpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBhaXJzKGNhbmRpZGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgcmVzdWx0IHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChuZXcgU25hcHNob3QoU25hcHNob3RTdGF0dXMuUmVzdWx0LCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5GaW5pc2gsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhYmxlXHJcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLlVuc29sdmFibGUsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKSlcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgY3JlYXRlcyBhIHJhbmRvbSBwcmVmZXJlbmNlIHRhYmxlIGFuZCByZXR1cm5zIGFuIGluc3RhbmNlIG9mIFByZWZlcmVuY2VMaXN0XHJcbiAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVJhbmRvbShuIDogbnVtYmVyKSA6IFByZWZlcmVuY2VMaXN0IHtcclxuICAgICAgICBsZXQgdGFibGUgPSBVdGlscy5yYW5kKG4pXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVmZXJlbmNlTGlzdCh0YWJsZSlcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVGcm9tU3RyaW5nKHN0ciA6IHN0cmluZykge1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuL3V0aWxzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmluZ1BhcnNlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBkaWN0aW9uYXJ5IDogQXJyYXk8YW55PlxyXG4gICAgcHJpdmF0ZSBuOiBudW1iZXJcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRpY3Rpb25hcnkgPSBbXVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHB1YmxpYyBnZXREaWN0aW9uYXJ5IC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERpY3Rpb25hcnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGljdGlvbmFyeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb29rVXBPckFkZChzdHI6IHN0cmluZykgOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBpID0gdGhpcy5kaWN0aW9uYXJ5LmluZGV4T2Yoc3RyKVxyXG5cclxuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWN0aW9uYXJ5LnB1c2goc3RyKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaWN0aW9uYXJ5Lmxlbmd0aCAtIDFcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHBhcnNlIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBzdHI6IHN0cmluZyBkZXNjcmlwdGlvblxyXG4gICAgICogQHJldHVybiB7dHlwZX0gICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcGFyc2Uoc3RyOiBzdHJpbmcsIHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XHJcbiAgICAgICAgc3RyID0gc3RyLnRyaW0oKS5yZXBsYWNlKC9cXHQrL2csICcgJykucmVwbGFjZSgvICArL2csICcgJykucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpXHJcblxyXG4gICAgICAgIHRleHRhcmVhLnZhbHVlID0gc3RyXHJcblxyXG4gICAgICAgIGxldCBhcnIgPSBzdHIuc3BsaXQoXCJcXG5cIilcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW11cclxuXHJcbiAgICAgICAgdGhpcy5uID0gYXJyLmxlbmd0aFxyXG5cclxuICAgICAgICBmb3IgKGxldCByb3cgb2YgYXJyKSB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHRSb3cgPSBbXVxyXG4gICAgICAgICAgICBsZXQgc3BsaXR0ZWRSb3cgPSByb3cudHJpbSgpLnNwbGl0KFwiIFwiKS5tYXAocyA9PiBzLnRyaW0oKSlcclxuXHJcbiAgICAgICAgICAgIGlmIChzcGxpdHRlZFJvdy5sZW5ndGggLSAxICE9IHRoaXMubikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwid3JvbmcgbnVtYmVyIG9mIGVsZW1lbnRzXCIpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghVXRpbHMuYWxsRGlmZmVyZW50KHNwbGl0dGVkUm93KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZHVwbGljYXRlZCB2YWx1ZSBpbiB0aGlzIHJvd1wiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGZpcnN0ID0gdGhpcy5sb29rVXBPckFkZChzcGxpdHRlZFJvd1swXSlcclxuXHJcbiAgICAgICAgICAgIGlmIChzcGxpdHRlZFJvd1sxXSAhPSBcInxcIikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBzeW50YXhcIilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3BsaXR0ZWRSb3cuc2hpZnQoKVxyXG4gICAgICAgICAgICBzcGxpdHRlZFJvdy5zaGlmdCgpXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiBzcGxpdHRlZFJvdykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Um93LnB1c2godGhpcy5sb29rVXBPckFkZChlbnRyeSkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlc3VsdFtmaXJzdF0gPSByZXN1bHRSb3dcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpY3Rpb25hcnkubGVuZ3RoICE9PSB0aGlzLm4pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB0YWJsZVwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG59XHJcbiIsImltcG9ydCBTbmFwc2hvdCBmcm9tIFwiLi9zbmFwc2hvdFwiXHJcbmltcG9ydCB7U25hcHNob3RTdGF0dXN9IGZyb20gXCIuL3NuYXBzaG90XCJcclxuaW1wb3J0IFV0aWxzIGZyb20gXCIuL3V0aWxzXCJcclxuaW1wb3J0IHtTdGF0dXN9IGZyb20gXCIuL3ByZWZlcmVuY2VsaXN0XCJcclxuXHJcbmNsYXNzIENlbGwge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHZhbHVlOiBudW1iZXIsIHB1YmxpYyBkID0gZmFsc2UsIHB1YmxpYyByID0gZmFsc2UsIHB1YmxpYyBjID0gZmFsc2UpIHt9XHJcbn1cclxuXHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xyXG5cclxuICAgIGRpY3Rpb25hcnk6IEFycmF5PHN0cmluZz5cclxuICAgIGNvbnRyb2xzOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgbmF2aWdhdGlvbjogSFRNTEVsZW1lbnRcclxuICAgIHRhcmdldDogSFRNTFRhYmxlRWxlbWVudFxyXG4gICAgaGlzdG9yeTogQXJyYXk8U25hcHNob3Q+XHJcbiAgICBjdXJyZW50SW5kZXg6IG51bWJlclxyXG4gICAgZGltZW5zaW9uczogbnVtYmVyXHJcblxyXG4gICAgYnV0dG9uTGVmdDogSFRNTEJ1dHRvbkVsZW1lbnRcclxuICAgIGJ1dHRvblJpZ2h0OiBIVE1MQnV0dG9uRWxlbWVudFxyXG4gICAgcGFnZU51bWJlcjogSFRNTFNwYW5FbGVtZW50XHJcbiAgICBjaGVja2JveDogSFRNTElucHV0RWxlbWVudFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB0YXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIiksIG5hdmlnYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibmF2XCIpKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IGNvbnRyb2xzXHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcclxuICAgICAgICB0aGlzLm5hdmlnYXRpb24gPSBuYXZpZ2F0aW9uXHJcblxyXG4gICAgICAgIC8vIHNldCB1cCBjb250cm9scyBhbmQgdGFyZ2V0IHByb3Blcmx5XHJcbiAgICAgICAgdGhpcy5idXR0b25MZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG4gICAgICAgIHRoaXMuYnV0dG9uUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXHJcbiAgICAgICAgdGhpcy5wYWdlTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQudGV4dENvbnRlbnQgPSBcIjxcIlxyXG4gICAgICAgIHRoaXMuYnV0dG9uUmlnaHQudGV4dENvbnRlbnQgPSBcIj5cIlxyXG4gICAgICAgIHRoaXMucGFnZU51bWJlci50ZXh0Q29udGVudCA9IFwiMFwiXHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcclxuICAgICAgICB0aGlzLmNoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCJcclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbkxlZnQpXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VOdW1iZXIpXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvblJpZ2h0KVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuYXBwZW5kQ2hpbGQodGhpcy5jaGVja2JveClcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwic2hvdyBkZWxldGVkIHBhaXJzXCIpKVxyXG5cclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLnNob3dQcmV2KCl9KVxyXG4gICAgICAgIHRoaXMuYnV0dG9uUmlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLnNob3dOZXh0KCl9KVxyXG4gICAgICAgIHRoaXMuY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLnRvZ2dsZVNob3dEZWxldGVkUGFpcnMoKX0pXHJcblxyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6TW91c2VFdmVudCkgPT4ge3RoaXMubmF2Q2xpY2tlZChlKX0pXHJcblxyXG4gICAgICAgIC8vIGtleSBjb250cm9sc1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oaXN0b3J5ICYmIChlLmtleUNvZGUgPT0gMzcgfHwgZS5rZXlDb2RlID09IDM4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UHJldigpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5ICYmIChlLmtleUNvZGUgPT0gMzkgfHwgZS5rZXlDb2RlID09IDQwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TmV4dCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwdWJsaWMgc2V0RGljdGlvbmFyeSAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gZGljdGlvbmFyeSA6IEFycmF5PHN0cmluZz4gZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXREaWN0aW9uYXJ5KGRpY3Rpb25hcnkgOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5kaWN0aW9uYXJ5ID0gZGljdGlvbmFyeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbG9va1VwIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBpbmRleDogbnVtYmVyIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9va1VwKGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWN0aW9uYXJ5ICE9IG51bGwgJiYgdGhpcy5kaWN0aW9uYXJ5Lmxlbmd0aCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpY3Rpb25hcnlbaW5kZXhdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbmRleC50b1N0cmluZygpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0SGlzdG9yeShoaXN0b3J5OiBBcnJheTxTbmFwc2hvdD4pIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gaGlzdG9yeVxyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMFxyXG5cclxuICAgICAgICBpZiAoaGlzdG9yeS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGltZW5zaW9ucyA9IGhpc3RvcnlbMF0udGFibGUubGVuZ3RoXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXAoKVxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU5hdigpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNldFRhcmdldCAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gdGFyZ2V0OiBIVE1MRGl2RWxlbWVudCBkZXNjcmlwdGlvblxyXG4gICAgICogQHJldHVybiB7dHlwZX0gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VGFyZ2V0KHRhcmdldDogSFRNTFRhYmxlRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcHJpdmF0ZSBzZXRVcCAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7dHlwZX0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0VXAoKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgICAgIGxldCByb3dPcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKVxyXG4gICAgICAgIGxldCBjZWxsT3JpZ2luYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIilcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRpbWVuc2lvbnM7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgcm93XHJcbiAgICAgICAgICAgIGxldCByb3cgPSByb3dPcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFRhYmxlUm93RWxlbWVudFxyXG5cclxuICAgICAgICAgICAgLy8gY3JlYXRlIGhlYWQgZWxlbWVudFxyXG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBjZWxsT3JpZ2luYWwuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50XHJcbiAgICAgICAgICAgIGZpcnN0LmNsYXNzTGlzdC5hZGQoXCJoZWFkXCIpXHJcbiAgICAgICAgICAgIGZpcnN0LmlubmVySFRNTCA9IGkudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoZmlyc3QpXHJcblxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgfFxyXG4gICAgICAgICAgICBsZXQgc2VwYXJhdG9yID0gY2VsbE9yaWdpbmFsLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudFxyXG4gICAgICAgICAgICBzZXBhcmF0b3IuaW5uZXJIVE1MID0gXCIgfCBcIlxyXG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmRpbWVuc2lvbnMtMTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VsbCA9IGNlbGxPcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gXCItXCJcclxuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChyb3cpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhcmdldC5hcHBlbmRDaGlsZChmcmFnbWVudClcclxuICAgIH1cclxuXHJcbi8qXHJcbiAgICBzdGF0dXNUb0NsYXNzTmFtZShzIDogU3RhdHVzKSB7XHJcbiAgICAgICAgc3dpdGNoKHMpIHtcclxuICAgICAgICAgICAgY2FzZSBTdGF0dXMuUnVubmluZ18xOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicnVubmluZ18xXCJcclxuICAgICAgICAgICAgY2FzZSBTdGF0dXMuUnVubmluZ18yOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicnVubmluZ18yXCJcclxuICAgICAgICAgICAgY2FzZSBTdGF0dXMuU29sdmVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic29sdmVkXCJcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuc29sdmFibGVcIlxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiovXHJcblxyXG4gICAgY3JlYXRlTmF2KCkge1xyXG4gICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgICAgIGxldCBvcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICBvcmlnaW5hbC5jbGFzc0xpc3QuYWRkKFwibmF2RWxlbWVudFwiKVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc25hcHNob3QgPSB0aGlzLmhpc3RvcnlbaV1cclxuICAgICAgICAgICAgbGV0IGRpdiA9IChvcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTERpdkVsZW1lbnQpXHJcblxyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MICs9IFwiPHNwYW4+XCIgKyAoaSsxKS50b1N0cmluZygpICsgXCIuIHN0ZXA8L3NwYW4+PHNwYW4+XCIgKyAgc25hcHNob3Quc3RhdHVzICsgXCI8L3NwYW4+XCJcclxuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJzdGF0dXMtXCIgKyBzbmFwc2hvdC5zdGF0dXMpXHJcbiAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJpbmRleFwiLCBpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGRpdilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvbi5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbmRlciAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBUT0RPXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBzbmFwc2hvdCA9IHRoaXMuaGlzdG9yeVt0aGlzLmN1cnJlbnRJbmRleF1cclxuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY29tcHV0ZURpZmYoc25hcHNob3QpXHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJEZWNvcmF0aW9ucygpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaGVhZENlbGwgPSB0aGlzLmdldEVsZW1lbnQoaSlcclxuICAgICAgICAgICAgaGVhZENlbGwudGV4dENvbnRlbnQgPSB0aGlzLmxvb2tVcChpKVxyXG5cclxuICAgICAgICAgICAgaWYgKHNuYXBzaG90LnByb3Bvc2FscyAhPSB1bmRlZmluZWQgJiYgc25hcHNob3QucHJvcG9zYWxzW2ldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGhlYWRDZWxsLmlubmVySFRNTCArPSBcIjxzcGFuIGNsYXNzPSdzdWInPiAmI3gxRjQ4RDtcIiArIHRoaXMubG9va1VwKHNuYXBzaG90LnByb3Bvc2Fsc1tpXSkgKyBcIjwvc3Bhbj5cIlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRpZmZbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsID0gZGlmZltpXVtqXVxyXG4gICAgICAgICAgICAgICAgbGV0IHRyID0gdGhpcy5nZXRFbGVtZW50KGksIGopXHJcblxyXG4gICAgICAgICAgICAgICAgdHIudGV4dENvbnRlbnQgPSB0aGlzLmxvb2tVcChjZWxsLnZhbHVlKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIGNlbGwsIGNoZWNrOlxyXG4gICAgICAgICAgICAgICAgLy8gMS4gaXMgaXQgaW4gYSByb3RhdGlvbj9cclxuICAgICAgICAgICAgICAgIGlmIChjZWxsLnIpIHRyLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodC0zJylcclxuICAgICAgICAgICAgICAgIC8vIDIuIGlzIGl0IGEgZGVhdGggY2FuZGlkYXRlP1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuYykgdHIuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LTInKVxyXG4gICAgICAgICAgICAgICAgLy8gMy4gaXMgaXQgZGVhZD9cclxuICAgICAgICAgICAgICAgIGlmIChjZWxsLmQpIHRyLmNsYXNzTGlzdC5hZGQoJ2RlYWQnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkaXNwbGF5IHJvdGF0aW9uc1xyXG4gICAgICAgIGlmIChzbmFwc2hvdC5yb3RhdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNuYXBzaG90LnJvdGF0aW9uLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEVsZW1lbnQocGFpclswXSkuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodC0zXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJQYWdlcigpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhckRlY29yYXRpb25zKCkge1xyXG4gICAgICAgIGxldCBjZWxscyA6IE5vZGVMaXN0ID0gdGhpcy50YXJnZXQucXVlcnlTZWxlY3RvckFsbChcInRkXCIpXHJcbiAgICAgICAgbGV0IGNlbGxzQXJyYXkgOiBBcnJheTxIVE1MRWxlbWVudD4gPSBbXS5zbGljZS5jYWxsKGNlbGxzKVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2VsbHNBcnJheVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGVhZFwiKVxyXG4gICAgICAgICAgICBjZWxsc0FycmF5W2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHQtMVwiKVxyXG4gICAgICAgICAgICBjZWxsc0FycmF5W2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHQtMlwiKVxyXG4gICAgICAgICAgICBjZWxsc0FycmF5W2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHQtM1wiKVxyXG4gICAgICAgICAgICBjZWxsc0FycmF5W2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdobGlnaHQtNFwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBuYXZDbGlja2VkIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBlIDogTW91c2VFdmVudCBkZXNjcmlwdGlvblxyXG4gICAgICogQHJldHVybiB7dHlwZX0gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgbmF2Q2xpY2tlZChlIDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGxldCBlbCA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudClcclxuXHJcbiAgICAgICAgd2hpbGUgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZFbGVtZW50XCIpICYmIGVsLm5vZGVOYW1lICE9IFwiTkFWXCIpIHtcclxuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmF2RWxlbWVudFwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHBhcnNlSW50KGVsLmdldEF0dHJpYnV0ZShcImluZGV4XCIpKVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzaG93UHJldiAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7dHlwZX0gIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIHNob3dQcmV2KCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4LS1cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2hvd05leHQgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBzaG93TmV4dCgpIDogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4KzEgPCB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4KytcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJQYWdlcigpIHtcclxuICAgICAgICBsZXQgbWF4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aFxyXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5jdXJyZW50SW5kZXggKyAxXHJcbiAgICAgICAgdGhpcy5wYWdlTnVtYmVyLmlubmVySFRNTCA9IGN1cnJlbnQgKyBcIiAvIFwiICsgbWF4XHJcbiAgICAgICAgdGhpcy5idXR0b25MZWZ0LmRpc2FibGVkID0gY3VycmVudCA9PSAxXHJcbiAgICAgICAgdGhpcy5idXR0b25SaWdodC5kaXNhYmxlZCA9IGN1cnJlbnQgPT0gbWF4XHJcblxyXG4gICAgICAgIGxldCBhY3RpdmUgPSB0aGlzLm5hdmlnYXRpb24ucXVlcnlTZWxlY3RvcihcIi5uYXZFbGVtZW50LmFjdGl2ZVwiKVxyXG4gICAgICAgIGlmIChhY3RpdmUpIGFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXHJcblxyXG4gICAgICAgIGxldCBuZXdBY3RpdmUgPSB0aGlzLm5hdmlnYXRpb24ucXVlcnlTZWxlY3RvcihcIi5uYXZFbGVtZW50W2luZGV4PSdcIiArIHRoaXMuY3VycmVudEluZGV4ICsgXCInXVwiKVxyXG5cclxuICAgICAgICBuZXdBY3RpdmUuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVNob3dEZWxldGVkUGFpcnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tib3guY2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2hvd0RlbGV0ZWRcIilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd0RlbGV0ZWRcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBnZXRFbGVtZW50KHJvdzogbnVtYmVyLCBjb2wgPSAtMSkgOiBIVE1MU3BhbkVsZW1lbnQge1xyXG4gICAgICAgIGxldCBxdWVyeVN0cmluZyA9IFwiXCJcclxuICAgICAgICByb3cgKz0gMVxyXG5cclxuICAgICAgICBpZiAoY29sID09IC0xKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gXCJ0cjpudGgtY2hpbGQoXCIgKyByb3cgKyBcIikgdGQuaGVhZFwiXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29sICs9IDNcclxuICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSBcInRyOm50aC1jaGlsZChcIiArIHJvdyArIFwiKSB0ZDpudGgtY2hpbGQoXCIgKyBjb2wgKyBcIilcIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IocXVlcnlTdHJpbmcpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpYyBjb21wdXRlRGlmZiAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7dHlwZX0gcyA6IFNuYXBzaG90IGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgY29tcHV0ZURpZmYoczogU25hcHNob3QpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW10sXHJcbiAgICAgICAgICAgIGluaXRpYWwgPSB0aGlzLmhpc3RvcnlbMF1cclxuXHJcbiAgICAgICAgaWYgKHMuc3RhdHVzID09IFNuYXBzaG90U3RhdHVzLkluaXRpYWwpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLnRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gcy50YWJsZVtpXVxyXG4gICAgICAgICAgICAgICAgbGV0IGVyZyA9IFtdXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb3cubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBlcmcucHVzaChuZXcgQ2VsbChyb3dbal0pKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZXJnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG9yaWdpbmFsVGFibGUgPSBpbml0aWFsLnRhYmxlXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGFibGUgPSBzLnRhYmxlXHJcblxyXG4gICAgICAgICAgICAvLyByb3RhdGlvbmVuIHVuZCBkZWxldGlvbnMgYXVmYmVyZWl0ZW5cclxuICAgICAgICAgICAgLy8gc3RhdHQge3gsIHl9IG1hY2hlIHt4LCBpbmRleE9mKHkpfVxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBpZiAocy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBzLnJvdGF0aW9uLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFpclsxXSA9IG9yaWdpbmFsVGFibGVbcGFpclswXV0uaW5kZXhPZihwYWlyWzFdKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocy5kZWxldGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBzLmRlbGV0aW9uLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFpclsxXSA9IG9yaWdpbmFsVGFibGVbcGFpclswXV0uaW5kZXhPZihwYWlyWzFdKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSovXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gY29tcHV0ZSBkaWZmZXJlbmNlIGJldHdlZW4gb3JpZ2luYWwgdGFibGUgYW5kIGN1cnJlbnQgdGFibGVcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmlnaW5hbFRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3JpZ2luYWxSb3cgPSBvcmlnaW5hbFRhYmxlW2ldXHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFJvdyA9IGN1cnJlbnRUYWJsZVtpXVxyXG4gICAgICAgICAgICAgICAgbGV0IGVyZyA9IFtdXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvcmlnaW5hbFJvdy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbENlbGwgPSBvcmlnaW5hbFJvd1tqXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJvdy5pbmRleE9mKG9yaWdpbmFsQ2VsbCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBkZWFkIGNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJnLnB1c2gobmV3IENlbGwob3JpZ2luYWxDZWxsLCB0cnVlKSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYWxpdmUgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2VsbCA9IG5ldyBDZWxsKG9yaWdpbmFsQ2VsbClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucm90YXRpb24uZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFpclswXSA9PT0gaSAmJiBvcmlnaW5hbFRhYmxlW3BhaXJbMF1dLmluZGV4T2YocGFpclsxXSkgPT09IGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5yID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmRlbGV0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZGVsZXRpb24uZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFpclswXSA9PT0gaSAmJiBvcmlnaW5hbFRhYmxlW3BhaXJbMF1dLmluZGV4T2YocGFpclsxXSkgPT09IGpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgcGFpclsxXSA9PT0gaSAmJiBvcmlnaW5hbFRhYmxlW3BhaXJbMV1dLmluZGV4T2YocGFpclswXSkgPT09IGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyZy5wdXNoKGNlbGwpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVyZylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG4iLCJpbXBvcnQgUHJlZmVyZW5jZUxpc3QgZnJvbSBcIi4vcHJlZmVyZW5jZWxpc3RcIlxyXG5pbXBvcnQgU3RyaW5nUGFyc2VyIGZyb20gXCIuL3N0cmluZ3BhcnNlclwiXHJcbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiXHJcbmltcG9ydCBVdGlscyBmcm9tIFwiLi91dGlsc1wiXHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb3JkaW5hdG9yIHtcclxuXHJcbiAgICBwcml2YXRlIGNvbnRyb2xzIDogSFRNTERpdkVsZW1lbnRcclxuICAgIHByaXZhdGUgc2V0dXBXaW5kb3cgOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgcHJpdmF0ZSBkZW1vV2luZG93IDogSFRNTERpdkVsZW1lbnRcclxuICAgIHByaXZhdGUgdGV4dGFyZWEgOiBIVE1MVGV4dEFyZWFFbGVtZW50XHJcblxyXG5cclxuICAgIC8vXHJcbiAgICBwcml2YXRlIHByZWZlcmVuY2VMaXN0IDogUHJlZmVyZW5jZUxpc3RcclxuICAgIHByaXZhdGUgc3RyaW5nUGFyc2VyIDogU3RyaW5nUGFyc2VyXHJcbiAgICBwcml2YXRlIHJlbmRlcmVyIDogUmVuZGVyZXJcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9scyA6IEhUTUxEaXZFbGVtZW50LCBzZXR1cFdpbmRvdzogSFRNTERpdkVsZW1lbnQsIGRlbW9XaW5kb3c6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gc2V0IHVwIERPTSBldGMuXHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IGNvbnRyb2xzXHJcbiAgICAgICAgdGhpcy5zZXR1cFdpbmRvdyA9IHNldHVwV2luZG93XHJcbiAgICAgICAgdGhpcy5kZW1vV2luZG93ID0gZGVtb1dpbmRvd1xyXG4gICAgICAgIHRoaXMudGV4dGFyZWEgPSBzZXR1cFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIilcclxuXHJcblxyXG4gICAgICAgIGNvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVXaW5kb3dzKClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBzZXR1cFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwiI2NyZWF0ZUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0RGVtbygpXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIC8vIHNldCB1cCBsb2dpYyBzdHJ1Y3R1cmVcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKGRlbW9XaW5kb3cucXVlcnlTZWxlY3RvcihcIiNkZW1vQ29udHJvbHNcIiksXHJcbiAgICAgICAgICAgIGRlbW9XaW5kb3cucXVlcnlTZWxlY3RvcihcIiNkZW1vVGFyZ2V0XCIpLCBkZW1vV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCJuYXZcIikpXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRvZ2dsZVdpbmRvd3MgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICB0b2dnbGVXaW5kb3dzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNldHVwV2luZG93LmNsYXNzTGlzdC5jb250YWlucyhcImNsb3NlZFwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJjbG9zZWRcIilcclxuICAgICAgICAgICAgdGhpcy5kZW1vV2luZG93LmNsYXNzTGlzdC5hZGQoXCJjbG9zZWRcIilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwV2luZG93LmNsYXNzTGlzdC5hZGQoXCJjbG9zZWRcIilcclxuICAgICAgICAgICAgdGhpcy5kZW1vV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJjbG9zZWRcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnREZW1vKCkge1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgdGV4dCA9IHRoaXMudGV4dGFyZWEudmFsdWVcclxuXHJcbiAgICAgICAgICAgIGlmICh0ZXh0LnRyaW0oKS5pbmRleE9mKFwiIFwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSByYW5kb20gdGFibGVcclxuICAgICAgICAgICAgICAgIGxldCBuID0gcGFyc2VJbnQodGV4dC50cmltKCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZWZlcmVuY2VMaXN0ID0gUHJlZmVyZW5jZUxpc3QuY3JlYXRlUmFuZG9tKG4pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldERpY3Rpb25hcnkobnVsbClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0YWJsZSBmcm9tIGlucHV0XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nUGFyc2VyID0gbmV3IFN0cmluZ1BhcnNlcigpXHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGUgPSBzdHJpbmdQYXJzZXIucGFyc2UodGV4dCwgdGhpcy50ZXh0YXJlYSlcclxuICAgICAgICAgICAgICAgIGxldCBkaWN0ID0gc3RyaW5nUGFyc2VyLmdldERpY3Rpb25hcnkoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVmZXJlbmNlTGlzdCA9IG5ldyBQcmVmZXJlbmNlTGlzdCh0YWJsZSlcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RGljdGlvbmFyeShkaWN0KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3RoaXMucHJlZmVyZW5jZUxpc3QucHJpbnQoKVxyXG4gICAgICAgICAgICB0aGlzLnByZWZlcmVuY2VMaXN0LnNvbHZlKClcclxuICAgICAgICAgICAgbGV0IGhpc3RvcnkgPSB0aGlzLnByZWZlcmVuY2VMaXN0LmdldEhpc3RvcnkoKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRIaXN0b3J5KGhpc3RvcnkpXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlV2luZG93cygpXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKClcclxuXHJcbiAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcImZlaGxlclwiKVxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBDb29yZGluYXRvciBmcm9tIFwiLi9jb29yZGluYXRvclwiXHJcblxyXG5sZXQgY29vcmRpbmF0b3JcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgY29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRyb2xzXCIpLFxyXG4gICAgICAgIHNldHVwV2luZG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR1cFdpbmRvd1wiKSxcclxuICAgICAgICBkZW1vV2luZG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZW1vV2luZG93XCIpXHJcblxyXG4gICAgY29vcmRpbmF0b3IgPSBuZXcgQ29vcmRpbmF0b3IoY29udHJvbHMsIHNldHVwV2luZG93LCBkZW1vV2luZG93KVxyXG5cclxuXHJcbn0pXHJcblxyXG4vKlxyXG5jb25zb2xlLmxvZyhcIndvcmtzIVwiKTtcclxuXHJcbnZhciBwLCBuID0gMCwgcztcclxuZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInN0YXJ0aW5nIGxvb3BcIik7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICAgIG4rKztcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNvbHZpbmcgbmV4dCAoXCIgKyBuICsgXCIpXCIpO1xyXG5cclxuICAgICAgICBwID0gUHJlZmVyZW5jZUxpc3QuY3JlYXRlUmFuZG9tKDgpO1xyXG4gICAgICAgIHAuc29sdmUoKTtcclxuXHJcbiAgICB9IHdoaWxlIChuIDwgMTAwICYmIChwLnJlamVjdGVkUHJvcG9zYWxzIDwgMyB8fCBwLmRlbGV0ZWRSb3RhdGlvbnMgPCAzKSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJmb3VuZCBhIGdvb2QgUHJlZmVyZW5jZUxpc3QhXCIpO1xyXG4gICAgcC5wcmludCh0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2UoKSB7XHJcbiAgICBzID0gbmV3IFN0cmluZ1BhcnNlcigpXHJcbiAgICBsZXQgcmVzdWx0ID0gcy5wYXJzZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikudmFsdWUpXHJcblxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3RhcnQpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdGFydFBhcnNpbmdcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBhcnNlKTtcclxuXHJcbn0pO1xyXG4qL1xyXG4iXSwic291cmNlUm9vdCI6IiJ9