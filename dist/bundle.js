!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o=function(){function t(){}return t.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1));i=[t[n],t[e]],t[e]=i[0],t[n]=i[1]}return t;var i},t.rand=function(e){for(var n=[],i=0;i<e;i++){for(var o=[],r=0;r<e;r++)i!=r&&o.push(r);n[i]=t.shuffle(o)}return n},t.allDifferent=function(t){for(var e=0;e<t.length;e++)if(t.indexOf(t[e])!==e)return!1;return!0},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t}();!function(t){t[t.Initial=0]="Initial",t[t.MakeProposal=1]="MakeProposal",t[t.FindRotation=2]="FindRotation",t[t.Delete=3]="Delete",t[t.Result=4]="Result",t[t.Finish=5]="Finish",t[t.Unsolvable=6]="Unsolvable"}(i||(i={}));var r,s=function(){return function(t,e,n,i,o){this.status=t,this.table=e,this.proposals=n,this.rotation=i,this.deletion=o}}();!function(t){t.Running_1="Phase 1 running",t.Running_2="Phase 2 running",t.Solved="solved",t.Unsolvable="unsolvable"}(r||(r={}));var a=function(){function t(t){this.status=r.Running_1,this.table=t,this.proposals=[];for(var e=0;e<t.length;e++)this.proposals.push(null);this.history=[]}return t.prototype.getHistory=function(){return this.history},t.prototype.getStatus=function(){return this.status},t.prototype.checkStatus=function(){var t=!0;this.status==r.Running_1&&null==this.getFreePerson()&&(this.status=r.Running_2);for(var e=0;e<this.table.length;e++)this.table[e].length>1&&(t=!1);return t&&(this.status=r.Solved),this.status},t.prototype.getFreePerson=function(){for(var t=0;t<this.proposals.length;t++)if(null===this.proposals[t])return t;return null},t.prototype.getPerson=function(){for(var t=0;t<this.table.length;t++)if(this.table[t].length>1)return t;return null},t.prototype.firstOf=function(t){return this.table[t][0]},t.prototype.secondOf=function(t){return this.table[t][1]},t.prototype.lastOf=function(t){return this.table[t][this.table[t].length-1]},t.prototype.nextOf=function(t){return this.lastOf(this.secondOf(t))},t.prototype.removePair=function(t,e){if(-1!=this.table[t].indexOf(e)&&-1!=this.table[e].indexOf(t)&&(this.table[t].splice(this.table[t].indexOf(e),1),this.table[e].splice(this.table[e].indexOf(t),1),0==this.table[t].length||0==this.table[e].length))throw this.status=r.Unsolvable,new Error("empty preferencelist, no stable matching possible")},t.prototype.removePairs=function(t){var e=this;t.forEach(function(t){e.removePair(t[0],t[1])})},t.prototype.findAllAfter=function(t,e){for(var n=[],i=this.table[t].indexOf(e)+1;i<this.table[t].length;)n.push([t,this.table[t][i]]),i++;return n},t.prototype.propose=function(t,e){var n=this.proposals.indexOf(e);-1!=n&&(this.proposals[n]=null),this.proposals[t]=e},t.prototype.findRotation=function(){for(var t=[],e=[],n=this.getPerson();-1===t.indexOf(n);)t.push(n),n=this.nextOf(n);e.push([n,this.firstOf(n)]);for(var i=t.pop();i!=n;)e.unshift([i,this.firstOf(i)]),i=t.pop();return e},t.prototype.findRotationVictims=function(t){for(var e=[],n=t.length,i=0;i<n;i++)e=e.concat(this.findAllAfter(t[(i+1)%n][1],t[i][0]));return e},t.prototype.print=function(){for(var t=this.table,e="",n=0;n<t.length;n++){e+=n+"["+(null===this.proposals[n]?"-":this.proposals[n])+"]| ";for(var i=0;i<t[n].length;i++)e+=t[n][i]+"  ";e+="\n"}console.log(e)},t.prototype.solve=function(){try{for(this.history.push(new s(i.Initial,o.clone(this.table),o.clone(this.proposals),null,null));this.checkStatus()===r.Running_1;){var t=this.getFreePerson(),e=this.firstOf(t);this.propose(t,e),this.history.push(new s(i.MakeProposal,o.clone(this.table),o.clone(this.proposals),void 0,void 0));var n=this.findAllAfter(e,t);this.history.push(new s(i.Delete,o.clone(this.table),o.clone(this.proposals),void 0,n)),this.removePairs(n),this.history.push(new s(i.Result,o.clone(this.table),o.clone(this.proposals),void 0,void 0))}for(;this.checkStatus()===r.Running_2;){var a=this.findRotation();this.history.push(new s(i.FindRotation,o.clone(this.table),void 0,a,void 0));n=this.findRotationVictims(a);this.history.push(new s(i.Delete,o.clone(this.table),void 0,a,n)),this.removePairs(n),this.history.push(new s(i.Result,o.clone(this.table),void 0,void 0,void 0))}return this.history.push(new s(i.Finish,o.clone(this.table),void 0,void 0,void 0)),this.table}catch(t){return this.history.push(new s(i.Unsolvable,o.clone(this.table),void 0,void 0,void 0)),console.warn(t.message),null}},t.createRandom=function(e){return new t(o.rand(e))},t}(),l=function(){function t(){this.dictionary=[]}return t.prototype.getDictionary=function(){return this.dictionary},t.prototype.lookUpOrAdd=function(t){var e=this.dictionary.indexOf(t);return-1===e?(this.dictionary.push(t),this.dictionary.length-1):e},t.prototype.lookUp=function(t){var e=this.dictionary.indexOf(t);if(-1===e)throw new Error("invalid value '"+t+"' in table");return e},t.prototype.parse=function(t,e){var n=this;t=t.trim().replace(/\t+/g," ").replace(/  +/g," ").replace(/\r\n/g,"\n"),e.value=t;var i=t.split("\n"),r=[];this.n=i.length,i.forEach(function(t){var e=t.trim().split(" ").map(function(t){return t.trim()});n.lookUpOrAdd(e[0])});for(var s=0;s<i.length;s++){var a=[],l=i[s].trim().split(" ").map(function(t){return t.trim()});if(l.length-1!=this.n)throw new Error("wrong number of elements in row ["+s+"]");if(!o.allDifferent(l))throw new Error("duplicated value in row with index ["+s+"]");var h=this.lookUp(l[0]);if("|"!=l[1])throw new Error("invalid syntax, there is no | separator");l.shift(),l.shift();for(var c=0,u=l;c<u.length;c++){var d=u[c];a.push(this.lookUp(d))}r[h]=a}if(this.dictionary.length!==this.n)throw new Error("invalid table");return r},t}(),h=function(){return function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.value=t,this.d=e,this.r=n,this.c=i}}(),c=function(){function t(t,e,n){void 0===t&&(t=document.createElement("div")),void 0===e&&(e=document.createElement("table")),void 0===n&&(n=document.createElement("nav"));var i=this;this.controls=t,this.target=e,this.navigation=n,this.buttonLeft=document.createElement("button"),this.buttonRight=document.createElement("button"),this.pageNumber=document.createElement("span"),this.buttonLeft.textContent="<",this.buttonRight.textContent=">",this.pageNumber.textContent="0",this.checkbox=document.createElement("input"),this.checkbox.type="checkbox",this.controls.appendChild(this.buttonLeft),this.controls.appendChild(this.pageNumber),this.controls.appendChild(this.buttonRight),this.controls.appendChild(this.checkbox),this.controls.appendChild(document.createTextNode("show deleted pairs")),this.buttonLeft.addEventListener("click",function(){i.showPrev()}),this.buttonRight.addEventListener("click",function(){i.showNext()}),this.checkbox.addEventListener("click",function(){i.toggleShowDeletedPairs()}),this.navigation.addEventListener("click",function(t){i.navClicked(t)}),document.addEventListener("keydown",function(t){!i.history||37!=t.keyCode&&38!=t.keyCode?!i.history||39!=t.keyCode&&40!=t.keyCode||i.showNext():i.showPrev()})}return t.prototype.setDictionary=function(t){this.dictionary=t},t.prototype.lookUp=function(t){return null!=this.dictionary&&this.dictionary.length>t?this.dictionary[t]:t.toString()},t.prototype.setHistory=function(t){this.history=t,this.currentIndex=0,t.length>0&&(this.dimensions=t[0].table.length,this.setUp(),this.createNav())},t.prototype.setTarget=function(t){this.target=t},t.prototype.setUp=function(){this.target.innerHTML="";for(var t=document.createDocumentFragment(),e=document.createElement("tr"),n=document.createElement("td"),i=0;i<this.dimensions;i++){var o=e.cloneNode(!0),r=n.cloneNode(!0);r.classList.add("head"),r.innerHTML=i.toString(),o.appendChild(r);var s=n.cloneNode(!0);s.innerHTML=" | ",o.appendChild(s);for(var a=0;a<this.dimensions-1;a++){var l=n.cloneNode(!0);l.innerHTML="-",o.appendChild(l)}t.appendChild(o)}this.target.appendChild(t)},t.prototype.statusToString=function(t){switch(t){case i.Initial:return"initial table";case i.MakeProposal:return"make a proposal";case i.FindRotation:return"find rotation";case i.Delete:return"delete pairs";case i.Result:return"result";case i.Finish:return"matching found";case i.Unsolvable:return"unsolvable";default:return""}},t.prototype.createNav=function(){var t=document.createDocumentFragment(),e=document.createElement("div");e.classList.add("navElement");for(var n=0;n<this.history.length;n++){var i=this.history[n],o=e.cloneNode(!0);o.innerHTML+="<span>"+(n+1).toString()+".</span><span>"+this.statusToString(i.status)+"</span>",o.classList.add("status-"+i.status),o.setAttribute("index",n.toString()),t.appendChild(o)}this.navigation.innerHTML="",this.navigation.appendChild(t)},t.prototype.render=function(){var t=this,e=this.history[this.currentIndex],n=this.computeDiff(e);this.clearDecorations();for(var i=0;i<n.length;i++){var o=this.getElement(i);o.textContent=this.lookUp(i),void 0!=e.proposals&&null!=e.proposals[i]&&(o.innerHTML+="<span class='sub'> &#x1F48D;"+this.lookUp(e.proposals[i])+"</span>");for(var r=0;r<n[i].length;r++){var s=n[i][r],a=this.getElement(i,r);a.textContent=this.lookUp(s.value),s.r&&a.classList.add("highlight-3"),s.c&&a.classList.add("highlight-2"),s.d&&a.classList.add("dead")}}null!=e.rotation&&e.rotation.forEach(function(e){t.getElement(e[0]).classList.add("highlight-3")}),this.renderPager()},t.prototype.clearDecorations=function(){for(var t=this.target.querySelectorAll("td"),e=[].slice.call(t),n=0;n<e.length;n++)e[n].classList.remove("dead"),e[n].classList.remove("highlight-1"),e[n].classList.remove("highlight-2"),e[n].classList.remove("highlight-3"),e[n].classList.remove("highlight-4")},t.prototype.navClicked=function(t){for(var e=t.target;!e.classList.contains("navElement")&&"NAV"!=e.nodeName;)e=e.parentElement;e.classList.contains("navElement")&&(this.currentIndex=parseInt(e.getAttribute("index")),this.render())},t.prototype.showPrev=function(){this.currentIndex>0&&(this.currentIndex--,this.render())},t.prototype.showNext=function(){this.currentIndex+1<this.history.length&&(this.currentIndex++,this.render())},t.prototype.renderPager=function(){var t=this.history.length,e=this.currentIndex+1;this.pageNumber.innerHTML=e+" / "+t,this.buttonLeft.disabled=1==e,this.buttonRight.disabled=e==t;var n=this.navigation.querySelector(".navElement.active");n&&n.classList.remove("active"),this.navigation.querySelector(".navElement[index='"+this.currentIndex+"']").classList.add("active")},t.prototype.toggleShowDeletedPairs=function(){this.checkbox.checked?this.target.classList.add("showDeleted"):this.target.classList.remove("showDeleted")},t.prototype.getElement=function(t,e){void 0===e&&(e=-1);var n="";return t+=1,n=-1==e?"tr:nth-child("+t+") td.head":"tr:nth-child("+t+") td:nth-child("+(e+=3)+")",this.target.querySelector(n)},t.prototype.computeDiff=function(t){var e=[],n=this.history[0];if(t.status==i.Initial)for(var o=0;o<t.table.length;o++){for(var r=t.table[o],s=[],a=0;a<r.length;a++)s.push(new h(r[a]));e.push(s)}else{var l=n.table,c=t.table,u=function(n){for(var i=l[n],o=c[n],r=[],s=function(e){var s=i[e];if(-1===o.indexOf(s))r.push(new h(s,!0));else{var a=new h(s);void 0!==t.rotation&&t.rotation.forEach(function(t){t[0]===n&&l[t[0]].indexOf(t[1])===e&&(a.r=!0)}),void 0!==t.deletion&&t.deletion.forEach(function(t){(t[0]===n&&l[t[0]].indexOf(t[1])===e||t[1]===n&&l[t[1]].indexOf(t[0])===e)&&(a.c=!0)}),r.push(a)}},a=0;a<i.length;a++)s(a);e.push(r)};for(o=0;o<l.length;o++)u(o)}return e},t}(),u=function(){function t(t,e,n){var i=this;this.controls=t,this.setupWindow=e,this.demoWindow=n,this.textarea=e.querySelector("textarea"),t.querySelector("button").addEventListener("click",function(){i.toggleWindows()}),e.querySelector("#createButton").addEventListener("click",function(){i.startDemo()}),this.renderer=new c(n.querySelector("#controls"),n.querySelector("#demoTarget"),n.querySelector("nav"))}return t.prototype.toggleWindows=function(){this.setupWindow.classList.contains("closed")?(this.setupWindow.classList.remove("closed"),this.demoWindow.classList.add("closed")):(this.setupWindow.classList.add("closed"),this.demoWindow.classList.remove("closed"))},t.prototype.startDemo=function(){try{var t=this.textarea.value;if(-1===t.trim().indexOf(" ")){var e=parseInt(t.trim());if(e<2||e%2!=0)throw new Error("invalid number passed");this.preferenceList=a.createRandom(e),this.renderer.setDictionary(null)}else{var n=new l,i=n.parse(t,this.textarea),o=n.getDictionary();this.preferenceList=new a(i),this.renderer.setDictionary(o)}this.preferenceList.solve();var r=this.preferenceList.getHistory();this.renderer.setHistory(r),this.toggleWindows(),this.renderer.render()}catch(t){console.warn(t),alert(t)}},t}();let d;window.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("controls"),e=document.getElementById("setupWindow"),n=document.getElementById("demoWindow");d=new u(t,e,n)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9zbmFwc2hvdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJlZmVyZW5jZWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmluZ3BhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvb3JkaW5hdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNuYXBzaG90U3RhdHVzIiwiVXRpbHMiLCJzaHVmZmxlIiwiYSIsImxlbmd0aCIsImoiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfYSIsInJhbmQiLCJyZXN1bHQiLCJhcnIiLCJwdXNoIiwiYWxsRGlmZmVyZW50IiwiaW5kZXhPZiIsImNsb25lIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiU3RhdHVzIiwic3RhdHVzIiwidGFibGUiLCJwcm9wb3NhbHMiLCJyb3RhdGlvbiIsImRlbGV0aW9uIiwidGhpcyIsIlByZWZlcmVuY2VMaXN0IiwiUnVubmluZ18xIiwiaGlzdG9yeSIsImdldEhpc3RvcnkiLCJnZXRTdGF0dXMiLCJjaGVja1N0YXR1cyIsImFsbE9uZSIsImdldEZyZWVQZXJzb24iLCJSdW5uaW5nXzIiLCJTb2x2ZWQiLCJnZXRQZXJzb24iLCJmaXJzdE9mIiwic2Vjb25kT2YiLCJsYXN0T2YiLCJuZXh0T2YiLCJyZW1vdmVQYWlyIiwieCIsInkiLCJzcGxpY2UiLCJVbnNvbHZhYmxlIiwiRXJyb3IiLCJyZW1vdmVQYWlycyIsIl90aGlzIiwiZm9yRWFjaCIsInBhaXIiLCJmaW5kQWxsQWZ0ZXIiLCJ5SW5YIiwicHJvcG9zZSIsImZpbmRSb3RhdGlvbiIsInN0YWNrIiwicDIiLCJwb3AiLCJ1bnNoaWZ0IiwiZmluZFJvdGF0aW9uVmljdGltcyIsImNvbmNhdCIsInByaW50IiwiY29uc29sZSIsImxvZyIsInNvbHZlIiwic25hcHNob3QiLCJJbml0aWFsIiwidXRpbHMiLCJNYWtlUHJvcG9zYWwiLCJ1bmRlZmluZWQiLCJjYW5kaWRhdGVzIiwiRGVsZXRlIiwiUmVzdWx0IiwiRmluZFJvdGF0aW9uIiwiRmluaXNoIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsImNyZWF0ZVJhbmRvbSIsIlN0cmluZ1BhcnNlciIsImRpY3Rpb25hcnkiLCJnZXREaWN0aW9uYXJ5IiwibG9va1VwT3JBZGQiLCJzdHIiLCJsb29rVXAiLCJ0ZXh0YXJlYSIsInRyaW0iLCJyZXBsYWNlIiwic3BsaXQiLCJyb3ciLCJzcGxpdHRlZFJvdyIsIm1hcCIsInJlc3VsdFJvdyIsImZpcnN0Iiwic2hpZnQiLCJfaSIsInNwbGl0dGVkUm93XzEiLCJlbnRyeSIsIkNlbGwiLCJSZW5kZXJlciIsImNvbnRyb2xzIiwidGFyZ2V0IiwibmF2aWdhdGlvbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImJ1dHRvbkxlZnQiLCJidXR0b25SaWdodCIsInBhZ2VOdW1iZXIiLCJ0ZXh0Q29udGVudCIsImNoZWNrYm94IiwidHlwZSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd1ByZXYiLCJzaG93TmV4dCIsInRvZ2dsZVNob3dEZWxldGVkUGFpcnMiLCJlIiwibmF2Q2xpY2tlZCIsImtleUNvZGUiLCJzZXREaWN0aW9uYXJ5IiwiaW5kZXgiLCJ0b1N0cmluZyIsInNldEhpc3RvcnkiLCJjdXJyZW50SW5kZXgiLCJkaW1lbnNpb25zIiwic2V0VXAiLCJjcmVhdGVOYXYiLCJzZXRUYXJnZXQiLCJpbm5lckhUTUwiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJyb3dPcmlnaW5hbCIsImNlbGxPcmlnaW5hbCIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFkZCIsInNlcGFyYXRvciIsImNlbGwiLCJzdGF0dXNUb1N0cmluZyIsIm9yaWdpbmFsIiwiZGl2Iiwic2V0QXR0cmlidXRlIiwicmVuZGVyIiwiZGlmZiIsImNvbXB1dGVEaWZmIiwiY2xlYXJEZWNvcmF0aW9ucyIsImhlYWRDZWxsIiwiZ2V0RWxlbWVudCIsInRyIiwicmVuZGVyUGFnZXIiLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjZWxsc0FycmF5Iiwic2xpY2UiLCJyZW1vdmUiLCJlbCIsImNvbnRhaW5zIiwibm9kZU5hbWUiLCJwYXJlbnRFbGVtZW50IiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJtYXgiLCJjdXJyZW50IiwiZGlzYWJsZWQiLCJhY3RpdmUiLCJxdWVyeVNlbGVjdG9yIiwiY2hlY2tlZCIsImNvbCIsInF1ZXJ5U3RyaW5nIiwiaW5pdGlhbCIsImVyZyIsIm9yaWdpbmFsVGFibGVfMSIsImN1cnJlbnRUYWJsZSIsIm9yaWdpbmFsUm93IiwiY3VycmVudFJvdyIsIm9yaWdpbmFsQ2VsbCIsImNlbGxfMSIsIkNvb3JkaW5hdG9yIiwic2V0dXBXaW5kb3ciLCJkZW1vV2luZG93IiwidG9nZ2xlV2luZG93cyIsInN0YXJ0RGVtbyIsInJlbmRlcmVyIiwidGV4dCIsInByZWZlcmVuY2VMaXN0IiwicHJlZmVyZW5jZWxpc3QiLCJzdHJpbmdQYXJzZXIiLCJzdHJpbmdwYXJzZXIiLCJkaWN0IiwiaGlzdG9yeV8xIiwiYWxlcnQiLCJzcmNfY29vcmRpbmF0b3IiLCJ3aW5kb3ciLCJnZXRFbGVtZW50QnlJZCIsImNvb3JkaW5hdG9yIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEs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LEtBQUs0RCxVQUN0Q3dHLEVBQU9GLEVBQWExRyxnQkFDeEJ4RCxLQUFLZ0ssZUFBaUIsSUFBSUMsRUFBZXJLLEdBQ3pDSSxLQUFLOEosU0FBUy9ELGNBQWNxRSxHQUdoQ3BLLEtBQUtnSyxlQUFlekgsUUFDcEIsSUFBSThILEVBQVVySyxLQUFLZ0ssZUFBZTVKLGFBRWxDSixLQUFLOEosU0FBUzVELFdBQVdtRSxHQUN6QnJLLEtBQUs0SixnQkFDTDVKLEtBQUs4SixTQUFTeEMsU0FFaEIsTUFBTTFCLEdBQ0p2RCxRQUFRYyxLQUFLeUMsR0FDYjBFLE1BQU0xRSxLQUlsQjZELEVBekZBLEdDTkEsSUFBQWMsRUFFQUMsT0FBQWhGLGlCQUFBLDhCQUVBLElBQUFiLEVBQUFHLFNBQUEyRixlQUFBLFlBQ0FmLEVBQUE1RSxTQUFBMkYsZUFBQSxlQUNBZCxFQUFBN0UsU0FBQTJGLGVBQUEsY0FFQUYsRUFBQSxJQUFBRyxFQUFBL0YsRUFBQStFLEVBQUFDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsInR5cGUgQ2FsbGJhY2sgPSAoczogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuLyoqXHJcbiAgICBVdGlsaXR5IGNsYXNzIGZvciBzdGFibGUgcm9vbW1hdGVzXHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcclxuXHJcbiAgICBzdGF0aWMgc2h1ZmZsZShhIDogQXJyYXk8YW55PikgOiBBcnJheTxhbnk+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gYS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuICAgICAgICAgICAgW2FbaV0sIGFbal1dID0gW2Fbal0sIGFbaV1dO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmFuZChuIDogbnVtYmVyKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbjsgaisrKSB7XHJcbiAgICAgICAgICBpZiAoaSA9PSBqKSBjb250aW51ZTtcclxuICAgICAgICAgIGFyci5wdXNoKGopO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgcmVzdWx0W2ldID0gVXRpbHMuc2h1ZmZsZShhcnIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhbGxEaWZmZXJlbnQoYXJyOiBBcnJheTxhbnk+KSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChhcnIuaW5kZXhPZihhcnJbaV0pICE9PSBpKSByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2xvbmUoYXJyIDogYW55KSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJyKSlcclxuICAgIH1cclxuXHJcbn1cclxuIiwiXHJcbmV4cG9ydCBlbnVtIFNuYXBzaG90U3RhdHVzIHtcclxuICAgIEluaXRpYWwsXHJcbiAgICBNYWtlUHJvcG9zYWwsXHJcbiAgICBGaW5kUm90YXRpb24sXHJcbiAgICBEZWxldGUsXHJcbiAgICBSZXN1bHQsXHJcbiAgICBGaW5pc2gsXHJcbiAgICBVbnNvbHZhYmxlXHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIGEgc25hcHNob3QgaW5zdGFuY2Ugc3RvcmVzIGEgc3RhdGUgb2YgYSBwcmVmZXJlbmNlbGlzdFxyXG4gKiBhbmQgaXMgcmVuZGVyZWQgYWZ0ZXJ3YXJkc1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHN0YXR1czogU25hcHNob3RTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgdGFibGU6IEFycmF5PEFycmF5PG51bWJlcj4+LFxyXG4gICAgICAgICAgICAgICAgcHVibGljIHByb3Bvc2FsczogQXJyYXk8bnVtYmVyPixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyByb3RhdGlvbjogQXJyYXk8QXJyYXk8bnVtYmVyPj4sXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgZGVsZXRpb246IEFycmF5PEFycmF5PG51bWJlcj4+KSB7fVxyXG59XHJcbiIsImltcG9ydCBVdGlscyBmcm9tIFwiLi91dGlsc1wiXHJcbmltcG9ydCBTbmFwc2hvdCBmcm9tIFwiLi9zbmFwc2hvdFwiXHJcbmltcG9ydCB7U25hcHNob3RTdGF0dXN9IGZyb20gXCIuL3NuYXBzaG90XCJcclxuXHJcbmNvbnN0IFJVTk5JTkdfMSA9IDBcclxuY29uc3QgUlVOTklOR18yID0gMVxyXG5jb25zdCBTT0xWRUQgPSAyXHJcbmNvbnN0IFVOU09MVkFCTEUgPSAzXHJcblxyXG5leHBvcnQgZW51bSBTdGF0dXMge1xyXG4gICAgUnVubmluZ18xID0gXCJQaGFzZSAxIHJ1bm5pbmdcIixcclxuICAgIFJ1bm5pbmdfMiA9IFwiUGhhc2UgMiBydW5uaW5nXCIsXHJcbiAgICBTb2x2ZWQgPSBcInNvbHZlZFwiLFxyXG4gICAgVW5zb2x2YWJsZSA9IFwidW5zb2x2YWJsZVwiXHJcbn1cclxuXHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWZlcmVuY2VMaXN0IHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXR1czogU3RhdHVzXHJcbiAgICBwcml2YXRlIHRhYmxlOiBBcnJheTxBcnJheTxudW1iZXI+PlxyXG4gICAgcHJpdmF0ZSBwcm9wb3NhbHM6IEFycmF5PG51bWJlcj5cclxuICAgIHByaXZhdGUgaGlzdG9yeTogQXJyYXk8U25hcHNob3Q+XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFibGU6IEFycmF5PEFycmF5PG51bWJlcj4+KSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBTdGF0dXMuUnVubmluZ18xXHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHRhYmxlXHJcbiAgICAgICAgdGhpcy5wcm9wb3NhbHMgPSBbXVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcG9zYWxzLnB1c2gobnVsbClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IFtdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwdWJsaWMgZ2V0SGlzdG9yeSAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7QXJyYXk8U25hcHNob3Q+fSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEhpc3RvcnkoKSA6IEFycmF5PFNuYXBzaG90PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZ2V0U3RhdHVzIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBnZXRTdGF0dXMoKSA6IFN0YXR1cyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY2hlY2tTdGF0dXMgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBjaGVja1N0YXR1cygpIDogU3RhdHVzIHtcclxuICAgICAgICBsZXQgYWxsT25lID0gdHJ1ZVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gU3RhdHVzLlJ1bm5pbmdfMSAmJiB0aGlzLmdldEZyZWVQZXJzb24oKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gU3RhdHVzLlJ1bm5pbmdfMlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlW2ldLmxlbmd0aCA+IDEpIGFsbE9uZSA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYWxsT25lKSB0aGlzLnN0YXR1cyA9IFN0YXR1cy5Tb2x2ZWRcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXNcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICBvbmx5IG5lZWRlZCBkdXJpbmcgZmlyc3QgcGhhc2Ugb2YgdGhlIGFsZ29yaXRobS5cclxuICAgICAgICByZXR1cm5zIGEgcGVyc29uIHdoaWNoIGlzIG5vdCBzZW1pZW5nYWdlZCB0byBhbnlib2R5XHJcbiAgICAqL1xyXG4gICAgZ2V0RnJlZVBlcnNvbigpIDogbnVtYmVyIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvcG9zYWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3Bvc2Fsc1tpXSA9PT0gbnVsbCkgcmV0dXJuIGlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQZXJzb24gLSBmaW5kcyBhbiBlbnRyeSBwb2ludCBmb3IgYSByb3RhdGlvbjogdGhlIGZpcnN0IHBlcnNvbiB3aXRoXHJcbiAgICAgKiBtb3JlIHRoYW4gb25lIHBlcnNvbiByZW1haW5pbmcgaW4gaXRzIHBlcmZlcmVuY2UgbGlzdFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge251bWJlcnxudWxsfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29uKCkgOiBudW1iZXIge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50YWJsZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJsZVtpXS5sZW5ndGggPiAxKSByZXR1cm4gaVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZpcnN0T2YgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGkgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgZmlyc3RPZihpOm51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhYmxlW2ldWzBdXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2Vjb25kT2YgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGkgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgc2Vjb25kT2YoaTpudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YWJsZVtpXVsxXVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbGFzdE9mIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHt0eXBlfSBpIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgIGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGxhc3RPZihpOm51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRhYmxlW2ldW3RoaXMudGFibGVbaV0ubGVuZ3RoLTFdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBuZXh0T2YgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IGkgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3R5cGV9ICAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgbmV4dE9mKGk6bnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdE9mKHRoaXMuc2Vjb25kT2YoaSkpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZW1vdmVQYWlyIC0gcmVtb3ZlcyBwYWlyIHt4LCB5fVxyXG4gICAgICogc28gcmVtb3ZlcyB4IGZyb20geSdzIHByZWZlcmVuY2VMaXN0IGFuZCB2aWNlIHZlcnNhXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4IHBlcnNvbiAxXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgcGVyc29uIDJcclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiBhbnkgcHJlZmVyZW5jZUxpc3QgZ2V0cyBlbXB0eVxyXG4gICAgICovXHJcbiAgICByZW1vdmVQYWlyKHg6bnVtYmVyLCB5Om51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy50YWJsZVt4XS5pbmRleE9mKHkpID09IC0xIHx8IHRoaXMudGFibGVbeV0uaW5kZXhPZih4KSA9PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGFibGVbeF0uc3BsaWNlKHRoaXMudGFibGVbeF0uaW5kZXhPZih5KSwgMSlcclxuICAgICAgICB0aGlzLnRhYmxlW3ldLnNwbGljZSh0aGlzLnRhYmxlW3ldLmluZGV4T2YoeCksIDEpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRhYmxlW3hdLmxlbmd0aCA9PSAwIHx8IHRoaXMudGFibGVbeV0ubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBTdGF0dXMuVW5zb2x2YWJsZVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbXB0eSBwcmVmZXJlbmNlbGlzdCwgbm8gc3RhYmxlIG1hdGNoaW5nIHBvc3NpYmxlXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVBhaXJzKGFycjogQXJyYXk8QXJyYXk8bnVtYmVyPj4pIHtcclxuICAgICAgICBhcnIuZm9yRWFjaChwYWlyID0+IHt0aGlzLnJlbW92ZVBhaXIocGFpclswXSwgcGFpclsxXSl9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmaW5kQWxsQWZ0ZXIoeDpudW1iZXIsIHk6bnVtYmVyKSA6IEFycmF5PEFycmF5PG51bWJlcj4+IHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW11cclxuICAgICAgICBsZXQgeUluWCA9IHRoaXMudGFibGVbeF0uaW5kZXhPZih5KSArIDFcclxuXHJcbiAgICAgICAgd2hpbGUgKHlJblggPCB0aGlzLnRhYmxlW3hdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChbeCwgdGhpcy50YWJsZVt4XVt5SW5YXV0pXHJcbiAgICAgICAgICAgIHlJblgrK1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVtb3ZlQWxsQWZ0ZXIgLSAocHJvY2VkdXJhbCkgcmVtb3ZlcyBhbGwgcGVyc29ucyBhZnRlciB5IGluIHgncyBsaXN0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4IHBlcnNvbiAxXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgcGVyc29uIDJcclxuICAgICAqXHJcbiAgICByZW1vdmVBbGxBZnRlcih4Om51bWJlciwgeTpudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IHlJblggPSB0aGlzLnRhYmxlW3hdLmluZGV4T2YoeSkgKyAxXHJcblxyXG4gICAgICAgIHdoaWxlICh0aGlzLnRhYmxlW3hdLmxlbmd0aCA+IHlJblgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWlyKHgsIHRoaXMudGFibGVbeF1beUluWF0pXHJcbiAgICAgICAgfVxyXG4gICAgfSovXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcHJvcG9zZSAtIG9ubHkgbmVlZGVkIGR1cmluZyBwaGFzZSAxXHJcbiAgICAgKiBwZXJzb24geCBtYWtlcyBhIHByb3Bvc2FsIHRvIHBlcnNvbiB5LCB0aGVyZWZvcmUgZWFjaCBwYWlyIHt5LCB6fSB3aXRoXHJcbiAgICAgKiB6IGNvbWluZyBhZnRlciB4IG9uIHkncyBsaXN0IHdpbGwgYmUgZGVsZXRlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBwZXJzb24gMSBtYWtlcyBwcm9wb3NhbFxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IHBlcnNvbiAyIHJlY2VpdmVzIHByb3Bvc2FsXHJcbiAgICAgKi9cclxuICAgIHByb3Bvc2UoeDpudW1iZXIsIHk6bnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIC8vIGV2ZW50dWFsbHkgcmVqZWN0IHByZXZpb3VzIHByb3Bvc2FsXHJcbiAgICAgICAgbGV0IHMgPSB0aGlzLnByb3Bvc2Fscy5pbmRleE9mKHkpXHJcbiAgICAgICAgaWYgKHMgIT0gLTEpIHRoaXMucHJvcG9zYWxzW3NdID0gbnVsbFxyXG4gICAgICAgIHRoaXMucHJvcG9zYWxzW3hdID0geVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZpbmRSb3RhdGlvbiAtIGZpbmRzIGEgcm90YXRpb24gZXhwb3NlZCBpbiB0aGUgY3VycmVudCB0YWJsZVxyXG4gICAgICogbm90ZSB0aGF0IHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBleHBvc2VkIHJvdGF0aW9ucywgYnV0IHRoaXMgbWV0aG9kIG9ubHkgcmV0dXJucyBvbmUgb2YgdGhlbVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge2FycmF5fSAgYXJyYXkgb2YgdGhlIGZvcm0gW1t4MSwgeTFdLCBbeDIsIHkyXSwgLi4uXVxyXG4gICAgICovXHJcbiAgICBmaW5kUm90YXRpb24oKSA6IEFycmF5PEFycmF5PG51bWJlcj4+IHtcclxuICAgICAgICBsZXQgc3RhY2sgPSBbXSwgcm90YXRpb24gPSBbXSwgcCA9IHRoaXMuZ2V0UGVyc29uKClcclxuXHJcbiAgICAgICAgd2hpbGUgKHN0YWNrLmluZGV4T2YocCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHN0YWNrLnB1c2gocClcclxuICAgICAgICAgICAgcCA9IHRoaXMubmV4dE9mKHApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByb3RhdGlvbi5wdXNoKFtwLCB0aGlzLmZpcnN0T2YocCldKVxyXG4gICAgICAgIGxldCBwMiA9IHN0YWNrLnBvcCgpXHJcblxyXG4gICAgICAgIHdoaWxlIChwMiAhPSBwKSB7XHJcbiAgICAgICAgICAgIHJvdGF0aW9uLnVuc2hpZnQoW3AyLCB0aGlzLmZpcnN0T2YocDIpXSkgLy8gcHJlcGVuZCBwYWlyIHRvIHRoZSByb3RhdGlvbiBhcnJheVxyXG4gICAgICAgICAgICBwMiA9IHN0YWNrLnBvcCgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcm90YXRpb25cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGZpbmRSb3RhdGlvblZpY3RpbXMocm90YXRpb246IEFycmF5PEFycmF5PG51bWJlcj4+KSA6IEFycmF5PEFycmF5PG51bWJlcj4+IHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBBcnJheTxBcnJheTxudW1iZXI+PiA9IFtdLFxyXG4gICAgICAgICAgICBuID0gcm90YXRpb24ubGVuZ3RoXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodGhpcy5maW5kQWxsQWZ0ZXIocm90YXRpb25bKGkrMSkgJSBuXVsxXSwgcm90YXRpb25baV1bMF0pKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZGVsZXRlUm90YXRpb24gLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3R5cGV9IHJvdGF0aW9uIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgIGRlbGV0ZVJvdGF0aW9uKHJvdGF0aW9uOkFycmF5PEFycmF5PG51bWJlcj4+KSA6IHZvaWQge1xyXG4gICAgICAgIGxldCBuID0gcm90YXRpb24ubGVuZ3RoXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxBZnRlcihyb3RhdGlvblsoaSsxKSAlIG5dWzFdLCByb3RhdGlvbltpXVswXSlcclxuICAgICAgICB9XHJcbiAgICB9Ki9cclxuXHJcbiAgICAvKipcclxuICAgICAqIHByaW50IC0gd3JpdGVzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB0YWJsZSB0byB0aGUgY29uc29sZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IG9yaWcgPSBmYWxzZSB3aGV0ZXIgdG8gcHJpbnQgdGhlIG9yaWdpbmFsIHRhYmxlIG9yIHRoZSBjdXJyZW50IHN0YXR1cyBkdXJpbmcgdGhlIHJlZHVjdGlvblxyXG4gICAgICovXHJcbiAgICBwcmludCgpIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IHRhYmxlID0gdGhpcy50YWJsZVxyXG4gICAgICAgIGxldCBzID0gXCJcIlxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgKz0gaSArIFwiW1wiICsgKHRoaXMucHJvcG9zYWxzW2ldID09PSBudWxsID8gXCItXCIgOiB0aGlzLnByb3Bvc2Fsc1tpXSkgKyBcIl18IFwiXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRhYmxlW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBzICs9IHRhYmxlW2ldW2pdICsgXCIgIFwiXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHMgKz0gXCJcXG5cIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2cocylcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNvbHZlIC0gdHJpZXMgdG8gZnVsbHkgcmVkdWNlIHRoZSBwcmVmZXJlbmNlTGlzdCBpbnN0YW5jZS5cclxuICAgICAqIHJldHVybnMgYSBwb3NzaWJsZSBzdGFibGUgbWF0Y2hpbmcsIG9yIG51bGwgaWYgbm8gc3RhYmxlIG1hdGNoaW5nIGV4aXN0c1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge2FycmF5fG51bGx9ICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBzb2x2ZSgpIDogQXJyYXk8QXJyYXk8bnVtYmVyPj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBpbml0aWFsIHNuYXBzaG90XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5Jbml0aWFsLCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgVXRpbHMuY2xvbmUodGhpcy5wcm9wb3NhbHMpLCBudWxsLCBudWxsKSlcclxuXHJcbiAgICAgICAgICAgIC8vIHBlcmZvcm0gcGhhc2UgMVxyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5jaGVja1N0YXR1cygpID09PSBTdGF0dXMuUnVubmluZ18xKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgeCA9IHRoaXMuZ2V0RnJlZVBlcnNvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgIHkgPSB0aGlzLmZpcnN0T2YoeClcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3Bvc2UoeCwgeSlcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBzbmFwc2hvdCB3aGVyZSB4IHByb3Bvc2VzIHRvIHlcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5NYWtlUHJvcG9zYWwsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCBVdGlscy5jbG9uZSh0aGlzLnByb3Bvc2FscyksIHVuZGVmaW5lZCwgdW5kZWZpbmVkKSlcclxuICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGVzID0gdGhpcy5maW5kQWxsQWZ0ZXIoeSwgeClcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBzbmFwc2hvdCB3aXRoIGFsbCBjYW5kaWRhdGVzIHRoYXQgd2lsbCBiZSBkZWxldGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChuZXcgU25hcHNob3QoU25hcHNob3RTdGF0dXMuRGVsZXRlLCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgVXRpbHMuY2xvbmUodGhpcy5wcm9wb3NhbHMpLCB1bmRlZmluZWQsIGNhbmRpZGF0ZXMpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWlycyhjYW5kaWRhdGVzKVxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHJlc3VsdCBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLlJlc3VsdCwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIFV0aWxzLmNsb25lKHRoaXMucHJvcG9zYWxzKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwZXJmb3JtIHBoYXNlIDJcclxuICAgICAgICAgICAgd2hpbGUgKHRoaXMuY2hlY2tTdGF0dXMoKSA9PT0gU3RhdHVzLlJ1bm5pbmdfMikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHIgPSB0aGlzLmZpbmRSb3RhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgc25hcHNob3Qgd2hlcmUgZm91bmQgcm90YXRpb24gaXMgaGlnaGxpZ2h0ZWRcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5GaW5kUm90YXRpb24sIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCB1bmRlZmluZWQsIHIsIHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIGNhbmRpZGF0ZXMgdGhhdCB3aWxsIGJlIGRlbGV0ZWQgYmVjYXVzZSBvZiB0aGlzIHJvdGF0aW9uXHJcbiAgICAgICAgICAgICAgICBsZXQgY2FuZGlkYXRlcyA9IHRoaXMuZmluZFJvdGF0aW9uVmljdGltcyhyKVxyXG4gICAgICAgICAgICAgICAgLy8gdGFrZSBzbmFwc2hvdCB3aXRoIGNhbmRpZGF0ZXNcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5EZWxldGUsIFV0aWxzLmNsb25lKHRoaXMudGFibGUpLCB1bmRlZmluZWQsIHIsIGNhbmRpZGF0ZXMpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWlycyhjYW5kaWRhdGVzKVxyXG4gICAgICAgICAgICAgICAgLy8gYWRkIHJlc3VsdCBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobmV3IFNuYXBzaG90KFNuYXBzaG90U3RhdHVzLlJlc3VsdCwgVXRpbHMuY2xvbmUodGhpcy50YWJsZSksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChuZXcgU25hcHNob3QoU25hcHNob3RTdGF0dXMuRmluaXNoLCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCkpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWJsZVxyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5ldyBTbmFwc2hvdChTbmFwc2hvdFN0YXR1cy5VbnNvbHZhYmxlLCBVdGlscy5jbG9uZSh0aGlzLnRhYmxlKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCkpXHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IubWVzc2FnZSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgY3JlYXRlcyBhIHJhbmRvbSBwcmVmZXJlbmNlIHRhYmxlIGFuZCByZXR1cm5zIGFuIGluc3RhbmNlIG9mIFByZWZlcmVuY2VMaXN0XHJcbiAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVJhbmRvbShuIDogbnVtYmVyKSA6IFByZWZlcmVuY2VMaXN0IHtcclxuICAgICAgICBsZXQgdGFibGUgPSBVdGlscy5yYW5kKG4pXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVmZXJlbmNlTGlzdCh0YWJsZSlcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaW5nUGFyc2VyIHtcclxuXHJcbiAgICBwcml2YXRlIGRpY3Rpb25hcnkgOiBBcnJheTxhbnk+XHJcbiAgICBwcml2YXRlIG46IG51bWJlclxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGljdGlvbmFyeSA9IFtdXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERpY3Rpb25hcnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGljdGlvbmFyeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb29rVXBPckFkZChzdHI6IHN0cmluZykgOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBpID0gdGhpcy5kaWN0aW9uYXJ5LmluZGV4T2Yoc3RyKVxyXG5cclxuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWN0aW9uYXJ5LnB1c2goc3RyKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaWN0aW9uYXJ5Lmxlbmd0aCAtIDFcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvb2tVcChzdHI6IHN0cmluZykgOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBpID0gdGhpcy5kaWN0aW9uYXJ5LmluZGV4T2Yoc3RyKVxyXG5cclxuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB2YWx1ZSAnXCIgKyBzdHIgKyBcIicgaW4gdGFibGVcIilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHBhcnNlKHN0cjogc3RyaW5nLCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCkge1xyXG4gICAgICAgIHN0ciA9IHN0ci50cmltKCkucmVwbGFjZSgvXFx0Ky9nLCAnICcpLnJlcGxhY2UoLyAgKy9nLCAnICcpLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKVxyXG5cclxuICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHN0clxyXG5cclxuICAgICAgICBsZXQgYXJyID0gc3RyLnNwbGl0KFwiXFxuXCIpXHJcbiAgICAgICAgbGV0IHJlc3VsdCA6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW11cclxuXHJcbiAgICAgICAgdGhpcy5uID0gYXJyLmxlbmd0aFxyXG5cclxuICAgICAgICAvLyBhZGQgZW50cmllcyB0byB0aGUgZGljdGlvbmFyeSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgcm93cyBpbiB0aGUgdGFibGVcclxuICAgICAgICBhcnIuZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc3BsaXR0ZWRSb3cgPSByb3cudHJpbSgpLnNwbGl0KFwiIFwiKS5tYXAocyA9PiBzLnRyaW0oKSlcclxuICAgICAgICAgICAgdGhpcy5sb29rVXBPckFkZChzcGxpdHRlZFJvd1swXSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcm93ID0gYXJyW2ldLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Um93ID0gW10sXHJcbiAgICAgICAgICAgICAgICBzcGxpdHRlZFJvdyA9IHJvdy50cmltKCkuc3BsaXQoXCIgXCIpLm1hcChzID0+IHMudHJpbSgpKVxyXG5cclxuICAgICAgICAgICAgaWYgKHNwbGl0dGVkUm93Lmxlbmd0aCAtIDEgIT0gdGhpcy5uKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3cm9uZyBudW1iZXIgb2YgZWxlbWVudHMgaW4gcm93IFtcIiArIGkgKyBcIl1cIilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFVdGlscy5hbGxEaWZmZXJlbnQoc3BsaXR0ZWRSb3cpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkdXBsaWNhdGVkIHZhbHVlIGluIHJvdyB3aXRoIGluZGV4IFtcIiArIGkgKyBcIl1cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IHRoaXMubG9va1VwKHNwbGl0dGVkUm93WzBdKVxyXG5cclxuICAgICAgICAgICAgaWYgKHNwbGl0dGVkUm93WzFdICE9IFwifFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHN5bnRheCwgdGhlcmUgaXMgbm8gfCBzZXBhcmF0b3JcIilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGhlYWQgYW5kIHNlcGFyYXRvclxyXG4gICAgICAgICAgICBzcGxpdHRlZFJvdy5zaGlmdCgpXHJcbiAgICAgICAgICAgIHNwbGl0dGVkUm93LnNoaWZ0KClcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHNwbGl0dGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRSb3cucHVzaCh0aGlzLmxvb2tVcChlbnRyeSkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlc3VsdFtmaXJzdF0gPSByZXN1bHRSb3dcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpY3Rpb25hcnkubGVuZ3RoICE9PSB0aGlzLm4pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB0YWJsZVwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgU25hcHNob3QgZnJvbSBcIi4vc25hcHNob3RcIlxyXG5pbXBvcnQge1NuYXBzaG90U3RhdHVzfSBmcm9tIFwiLi9zbmFwc2hvdFwiXHJcbmltcG9ydCBVdGlscyBmcm9tIFwiLi91dGlsc1wiXHJcbmltcG9ydCB7U3RhdHVzfSBmcm9tIFwiLi9wcmVmZXJlbmNlbGlzdFwiXHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmNsYXNzIENlbGwge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHZhbHVlOiBudW1iZXIsIHB1YmxpYyBkID0gZmFsc2UsIHB1YmxpYyByID0gZmFsc2UsIHB1YmxpYyBjID0gZmFsc2UpIHt9XHJcbn1cclxuXHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xyXG5cclxuICAgIGRpY3Rpb25hcnk6IEFycmF5PHN0cmluZz5cclxuICAgIGNvbnRyb2xzOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgbmF2aWdhdGlvbjogSFRNTEVsZW1lbnRcclxuICAgIHRhcmdldDogSFRNTFRhYmxlRWxlbWVudFxyXG4gICAgaGlzdG9yeTogQXJyYXk8U25hcHNob3Q+XHJcbiAgICBjdXJyZW50SW5kZXg6IG51bWJlclxyXG4gICAgZGltZW5zaW9uczogbnVtYmVyXHJcblxyXG4gICAgYnV0dG9uTGVmdDogSFRNTEJ1dHRvbkVsZW1lbnRcclxuICAgIGJ1dHRvblJpZ2h0OiBIVE1MQnV0dG9uRWxlbWVudFxyXG4gICAgcGFnZU51bWJlcjogSFRNTFNwYW5FbGVtZW50XHJcbiAgICBjaGVja2JveDogSFRNTElucHV0RWxlbWVudFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB0YXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIiksIG5hdmlnYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibmF2XCIpKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IGNvbnRyb2xzXHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcclxuICAgICAgICB0aGlzLm5hdmlnYXRpb24gPSBuYXZpZ2F0aW9uXHJcblxyXG4gICAgICAgIC8vIHNldCB1cCBjb250cm9scyBhbmQgdGFyZ2V0IHByb3Blcmx5XHJcbiAgICAgICAgdGhpcy5idXR0b25MZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG4gICAgICAgIHRoaXMuYnV0dG9uUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXHJcbiAgICAgICAgdGhpcy5wYWdlTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQudGV4dENvbnRlbnQgPSBcIjxcIlxyXG4gICAgICAgIHRoaXMuYnV0dG9uUmlnaHQudGV4dENvbnRlbnQgPSBcIj5cIlxyXG4gICAgICAgIHRoaXMucGFnZU51bWJlci50ZXh0Q29udGVudCA9IFwiMFwiXHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcclxuICAgICAgICB0aGlzLmNoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCJcclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbkxlZnQpXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VOdW1iZXIpXHJcbiAgICAgICAgdGhpcy5jb250cm9scy5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvblJpZ2h0KVxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuYXBwZW5kQ2hpbGQodGhpcy5jaGVja2JveClcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwic2hvdyBkZWxldGVkIHBhaXJzXCIpKVxyXG5cclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLnNob3dQcmV2KCl9KVxyXG4gICAgICAgIHRoaXMuYnV0dG9uUmlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLnNob3dOZXh0KCl9KVxyXG4gICAgICAgIHRoaXMuY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHt0aGlzLnRvZ2dsZVNob3dEZWxldGVkUGFpcnMoKX0pXHJcblxyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6TW91c2VFdmVudCkgPT4ge3RoaXMubmF2Q2xpY2tlZChlKX0pXHJcblxyXG4gICAgICAgIC8vIGtleSBjb250cm9sc1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oaXN0b3J5ICYmIChlLmtleUNvZGUgPT0gMzcgfHwgZS5rZXlDb2RlID09IDM4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UHJldigpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5ICYmIChlLmtleUNvZGUgPT0gMzkgfHwgZS5rZXlDb2RlID09IDQwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TmV4dCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXREaWN0aW9uYXJ5KGRpY3Rpb25hcnkgOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5kaWN0aW9uYXJ5ID0gZGljdGlvbmFyeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbG9va1VwIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4OiBudW1iZXIgZGVzY3JpcHRpb25cclxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgICBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvb2tVcChpbmRleDogbnVtYmVyKSA6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGljdGlvbmFyeSAhPSBudWxsICYmIHRoaXMuZGljdGlvbmFyeS5sZW5ndGggPiBpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaWN0aW9uYXJ5W2luZGV4XVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5kZXgudG9TdHJpbmcoKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEhpc3RvcnkoaGlzdG9yeTogQXJyYXk8U25hcHNob3Q+KSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IGhpc3RvcnlcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IDBcclxuXHJcbiAgICAgICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSBoaXN0b3J5WzBdLnRhYmxlLmxlbmd0aFxyXG4gICAgICAgICAgICB0aGlzLnNldFVwKClcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVOYXYoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUYXJnZXQodGFyZ2V0OiBIVE1MVGFibGVFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwcml2YXRlIHNldFVwIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0VXAoKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgICAgIGxldCByb3dPcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKVxyXG4gICAgICAgIGxldCBjZWxsT3JpZ2luYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIilcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRpbWVuc2lvbnM7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgcm93XHJcbiAgICAgICAgICAgIGxldCByb3cgPSByb3dPcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFRhYmxlUm93RWxlbWVudFxyXG5cclxuICAgICAgICAgICAgLy8gY3JlYXRlIGhlYWQgZWxlbWVudFxyXG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBjZWxsT3JpZ2luYWwuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50XHJcbiAgICAgICAgICAgIGZpcnN0LmNsYXNzTGlzdC5hZGQoXCJoZWFkXCIpXHJcbiAgICAgICAgICAgIGZpcnN0LmlubmVySFRNTCA9IGkudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoZmlyc3QpXHJcblxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgfFxyXG4gICAgICAgICAgICBsZXQgc2VwYXJhdG9yID0gY2VsbE9yaWdpbmFsLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudFxyXG4gICAgICAgICAgICBzZXBhcmF0b3IuaW5uZXJIVE1MID0gXCIgfCBcIlxyXG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmRpbWVuc2lvbnMtMTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VsbCA9IGNlbGxPcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gXCItXCJcclxuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChyb3cpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhcmdldC5hcHBlbmRDaGlsZChmcmFnbWVudClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdHVzVG9TdHJpbmcoc3RhdHVzOlNuYXBzaG90U3RhdHVzKSB7XHJcbiAgICAgICAgc3dpdGNoKHN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlIFNuYXBzaG90U3RhdHVzLkluaXRpYWw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbml0aWFsIHRhYmxlXCJcclxuICAgICAgICAgICAgY2FzZSBTbmFwc2hvdFN0YXR1cy5NYWtlUHJvcG9zYWw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYWtlIGEgcHJvcG9zYWxcIlxyXG4gICAgICAgICAgICBjYXNlIFNuYXBzaG90U3RhdHVzLkZpbmRSb3RhdGlvbjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImZpbmQgcm90YXRpb25cIlxyXG4gICAgICAgICAgICBjYXNlIFNuYXBzaG90U3RhdHVzLkRlbGV0ZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlbGV0ZSBwYWlyc1wiXHJcbiAgICAgICAgICAgIGNhc2UgU25hcHNob3RTdGF0dXMuUmVzdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicmVzdWx0XCJcclxuICAgICAgICAgICAgY2FzZSBTbmFwc2hvdFN0YXR1cy5GaW5pc2g6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXRjaGluZyBmb3VuZFwiXHJcbiAgICAgICAgICAgIGNhc2UgU25hcHNob3RTdGF0dXMuVW5zb2x2YWJsZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInVuc29sdmFibGVcIlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY3JlYXRlTmF2KCkge1xyXG4gICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgICAgIGxldCBvcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICBvcmlnaW5hbC5jbGFzc0xpc3QuYWRkKFwibmF2RWxlbWVudFwiKVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc25hcHNob3QgPSB0aGlzLmhpc3RvcnlbaV1cclxuICAgICAgICAgICAgbGV0IGRpdiA9IChvcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTERpdkVsZW1lbnQpXHJcblxyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MICs9IFwiPHNwYW4+XCIgKyAoaSsxKS50b1N0cmluZygpICsgXCIuPC9zcGFuPjxzcGFuPlwiICsgIHRoaXMuc3RhdHVzVG9TdHJpbmcoc25hcHNob3Quc3RhdHVzKSArIFwiPC9zcGFuPlwiXHJcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwic3RhdHVzLVwiICsgc25hcHNob3Quc3RhdHVzKVxyXG4gICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwiaW5kZXhcIiwgaS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChkaXYpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm5hdmlnYXRpb24uaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvbi5hcHBlbmRDaGlsZChmcmFnbWVudClcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZW5kZXIgLSBkZXNjcmlwdGlvblxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBzbmFwc2hvdCA9IHRoaXMuaGlzdG9yeVt0aGlzLmN1cnJlbnRJbmRleF1cclxuICAgICAgICBsZXQgZGlmZiA9IHRoaXMuY29tcHV0ZURpZmYoc25hcHNob3QpXHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJEZWNvcmF0aW9ucygpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaGVhZENlbGwgPSB0aGlzLmdldEVsZW1lbnQoaSlcclxuICAgICAgICAgICAgaGVhZENlbGwudGV4dENvbnRlbnQgPSB0aGlzLmxvb2tVcChpKVxyXG5cclxuICAgICAgICAgICAgaWYgKHNuYXBzaG90LnByb3Bvc2FscyAhPSB1bmRlZmluZWQgJiYgc25hcHNob3QucHJvcG9zYWxzW2ldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGhlYWRDZWxsLmlubmVySFRNTCArPSBcIjxzcGFuIGNsYXNzPSdzdWInPiAmI3gxRjQ4RDtcIiArIHRoaXMubG9va1VwKHNuYXBzaG90LnByb3Bvc2Fsc1tpXSkgKyBcIjwvc3Bhbj5cIlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRpZmZbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsID0gZGlmZltpXVtqXVxyXG4gICAgICAgICAgICAgICAgbGV0IHRyID0gdGhpcy5nZXRFbGVtZW50KGksIGopXHJcblxyXG4gICAgICAgICAgICAgICAgdHIudGV4dENvbnRlbnQgPSB0aGlzLmxvb2tVcChjZWxsLnZhbHVlKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIGNlbGwsIGNoZWNrOlxyXG4gICAgICAgICAgICAgICAgLy8gMS4gaXMgaXQgaW4gYSByb3RhdGlvbj9cclxuICAgICAgICAgICAgICAgIGlmIChjZWxsLnIpIHRyLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodC0zJylcclxuICAgICAgICAgICAgICAgIC8vIDIuIGlzIGl0IGEgZGVhdGggY2FuZGlkYXRlP1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuYykgdHIuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LTInKVxyXG4gICAgICAgICAgICAgICAgLy8gMy4gaXMgaXQgZGVhZD9cclxuICAgICAgICAgICAgICAgIGlmIChjZWxsLmQpIHRyLmNsYXNzTGlzdC5hZGQoJ2RlYWQnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkaXNwbGF5IHJvdGF0aW9uc1xyXG4gICAgICAgIGlmIChzbmFwc2hvdC5yb3RhdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNuYXBzaG90LnJvdGF0aW9uLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEVsZW1lbnQocGFpclswXSkuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodC0zXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlbmRlclBhZ2VyKClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2xlYXJEZWNvcmF0aW9ucygpIHtcclxuICAgICAgICBsZXQgY2VsbHMgOiBOb2RlTGlzdCA9IHRoaXMudGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZFwiKVxyXG4gICAgICAgIGxldCBjZWxsc0FycmF5IDogQXJyYXk8SFRNTEVsZW1lbnQ+ID0gW10uc2xpY2UuY2FsbChjZWxscylcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxsc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNlbGxzQXJyYXlbaV0uY2xhc3NMaXN0LnJlbW92ZShcImRlYWRcIilcclxuICAgICAgICAgICAgY2VsbHNBcnJheVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0LTFcIilcclxuICAgICAgICAgICAgY2VsbHNBcnJheVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0LTJcIilcclxuICAgICAgICAgICAgY2VsbHNBcnJheVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0LTNcIilcclxuICAgICAgICAgICAgY2VsbHNBcnJheVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0LTRcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbmF2Q2xpY2tlZCAtIGRlc2NyaXB0aW9uXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBuYXZDbGlja2VkKGUgOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGVsID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KVxyXG5cclxuICAgICAgICB3aGlsZSAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhcIm5hdkVsZW1lbnRcIikgJiYgZWwubm9kZU5hbWUgIT0gXCJOQVZcIikge1xyXG4gICAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZFbGVtZW50XCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKFwiaW5kZXhcIikpXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKClcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNob3dQcmV2IC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgc2hvd1ByZXYoKSA6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXgtLVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNob3dOZXh0IC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgc2hvd05leHQoKSA6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCsxIDwgdGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCsrXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlclBhZ2VyKCkge1xyXG4gICAgICAgIGxldCBtYXggPSB0aGlzLmhpc3RvcnkubGVuZ3RoXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnRJbmRleCArIDFcclxuICAgICAgICB0aGlzLnBhZ2VOdW1iZXIuaW5uZXJIVE1MID0gY3VycmVudCArIFwiIC8gXCIgKyBtYXhcclxuICAgICAgICB0aGlzLmJ1dHRvbkxlZnQuZGlzYWJsZWQgPSBjdXJyZW50ID09IDFcclxuICAgICAgICB0aGlzLmJ1dHRvblJpZ2h0LmRpc2FibGVkID0gY3VycmVudCA9PSBtYXhcclxuXHJcbiAgICAgICAgbGV0IGFjdGl2ZSA9IHRoaXMubmF2aWdhdGlvbi5xdWVyeVNlbGVjdG9yKFwiLm5hdkVsZW1lbnQuYWN0aXZlXCIpXHJcbiAgICAgICAgaWYgKGFjdGl2ZSkgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcclxuXHJcbiAgICAgICAgbGV0IG5ld0FjdGl2ZSA9IHRoaXMubmF2aWdhdGlvbi5xdWVyeVNlbGVjdG9yKFwiLm5hdkVsZW1lbnRbaW5kZXg9J1wiICsgdGhpcy5jdXJyZW50SW5kZXggKyBcIiddXCIpXHJcblxyXG4gICAgICAgIG5ld0FjdGl2ZS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICB0b2dnbGVTaG93RGVsZXRlZFBhaXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrYm94LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNob3dEZWxldGVkXCIpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcInNob3dEZWxldGVkXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgZ2V0RWxlbWVudChyb3c6IG51bWJlciwgY29sID0gLTEpIDogSFRNTFNwYW5FbGVtZW50IHtcclxuICAgICAgICBsZXQgcXVlcnlTdHJpbmcgPSBcIlwiXHJcbiAgICAgICAgcm93ICs9IDFcclxuXHJcbiAgICAgICAgaWYgKGNvbCA9PSAtMSkge1xyXG4gICAgICAgICAgICBxdWVyeVN0cmluZyA9IFwidHI6bnRoLWNoaWxkKFwiICsgcm93ICsgXCIpIHRkLmhlYWRcIlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbCArPSAzXHJcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gXCJ0cjpudGgtY2hpbGQoXCIgKyByb3cgKyBcIikgdGQ6bnRoLWNoaWxkKFwiICsgY29sICsgXCIpXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldC5xdWVyeVNlbGVjdG9yKHF1ZXJ5U3RyaW5nKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29tcHV0ZURpZmYoczogU25hcHNob3QpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW10sXHJcbiAgICAgICAgICAgIGluaXRpYWwgPSB0aGlzLmhpc3RvcnlbMF1cclxuXHJcbiAgICAgICAgaWYgKHMuc3RhdHVzID09IFNuYXBzaG90U3RhdHVzLkluaXRpYWwpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLnRhYmxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gcy50YWJsZVtpXVxyXG4gICAgICAgICAgICAgICAgbGV0IGVyZyA9IFtdXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb3cubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBlcmcucHVzaChuZXcgQ2VsbChyb3dbal0pKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZXJnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG9yaWdpbmFsVGFibGUgPSBpbml0aWFsLnRhYmxlXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGFibGUgPSBzLnRhYmxlXHJcblxyXG4gICAgICAgICAgICAvLyBjb21wdXRlIGRpZmZlcmVuY2UgYmV0d2VlbiBvcmlnaW5hbCB0YWJsZSBhbmQgY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yaWdpbmFsVGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbFJvdyA9IG9yaWdpbmFsVGFibGVbaV1cclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50Um93ID0gY3VycmVudFRhYmxlW2ldXHJcbiAgICAgICAgICAgICAgICBsZXQgZXJnID0gW11cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG9yaWdpbmFsUm93Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9yaWdpbmFsQ2VsbCA9IG9yaWdpbmFsUm93W2pdXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Um93LmluZGV4T2Yob3JpZ2luYWxDZWxsKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGRlYWQgY2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcmcucHVzaChuZXcgQ2VsbChvcmlnaW5hbENlbGwsIHRydWUpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhbGl2ZSBjZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsID0gbmV3IENlbGwob3JpZ2luYWxDZWxsKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5yb3RhdGlvbi5mb3JFYWNoKHBhaXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWlyWzBdID09PSBpICYmIG9yaWdpbmFsVGFibGVbcGFpclswXV0uaW5kZXhPZihwYWlyWzFdKSA9PT0gaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnIgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuZGVsZXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZWxldGlvbi5mb3JFYWNoKHBhaXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWlyWzBdID09PSBpICYmIG9yaWdpbmFsVGFibGVbcGFpclswXV0uaW5kZXhPZihwYWlyWzFdKSA9PT0galxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBwYWlyWzFdID09PSBpICYmIG9yaWdpbmFsVGFibGVbcGFpclsxXV0uaW5kZXhPZihwYWlyWzBdKSA9PT0gaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmMgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJnLnB1c2goY2VsbClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZXJnKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuXHJcblxyXG59XHJcbiIsImltcG9ydCBQcmVmZXJlbmNlTGlzdCBmcm9tIFwiLi9wcmVmZXJlbmNlbGlzdFwiXHJcbmltcG9ydCBTdHJpbmdQYXJzZXIgZnJvbSBcIi4vc3RyaW5ncGFyc2VyXCJcclxuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCJcclxuaW1wb3J0IFV0aWxzIGZyb20gXCIuL3V0aWxzXCJcclxuXHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29vcmRpbmF0b3Ige1xyXG5cclxuICAgIHByaXZhdGUgY29udHJvbHMgOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgcHJpdmF0ZSBzZXR1cFdpbmRvdyA6IEhUTUxEaXZFbGVtZW50XHJcbiAgICBwcml2YXRlIGRlbW9XaW5kb3cgOiBIVE1MRGl2RWxlbWVudFxyXG4gICAgcHJpdmF0ZSB0ZXh0YXJlYSA6IEhUTUxUZXh0QXJlYUVsZW1lbnRcclxuXHJcblxyXG4gICAgLy9cclxuICAgIHByaXZhdGUgcHJlZmVyZW5jZUxpc3QgOiBQcmVmZXJlbmNlTGlzdFxyXG4gICAgcHJpdmF0ZSBzdHJpbmdQYXJzZXIgOiBTdHJpbmdQYXJzZXJcclxuICAgIHByaXZhdGUgcmVuZGVyZXIgOiBSZW5kZXJlclxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRyb2xzIDogSFRNTERpdkVsZW1lbnQsIHNldHVwV2luZG93OiBIVE1MRGl2RWxlbWVudCwgZGVtb1dpbmRvdzogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICAvLyBzZXQgdXAgRE9NIGV0Yy5cclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gY29udHJvbHNcclxuICAgICAgICB0aGlzLnNldHVwV2luZG93ID0gc2V0dXBXaW5kb3dcclxuICAgICAgICB0aGlzLmRlbW9XaW5kb3cgPSBkZW1vV2luZG93XHJcbiAgICAgICAgdGhpcy50ZXh0YXJlYSA9IHNldHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKVxyXG5cclxuXHJcbiAgICAgICAgY29udHJvbHMucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVdpbmRvd3MoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHNldHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnREZW1vKClcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8gc2V0IHVwIGxvZ2ljIHN0cnVjdHVyZVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoZGVtb1dpbmRvdy5xdWVyeVNlbGVjdG9yKFwiI2NvbnRyb2xzXCIpLFxyXG4gICAgICAgICAgICBkZW1vV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIjZGVtb1RhcmdldFwiKSwgZGVtb1dpbmRvdy5xdWVyeVNlbGVjdG9yKFwibmF2XCIpKVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0b2dnbGVXaW5kb3dzIC0gZGVzY3JpcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHt0eXBlfSAgZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgdG9nZ2xlV2luZG93cygpIHtcclxuICAgICAgICBpZiAodGhpcy5zZXR1cFdpbmRvdy5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZWRcIikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGVtb1dpbmRvdy5jbGFzc0xpc3QuYWRkKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cFdpbmRvdy5jbGFzc0xpc3QuYWRkKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgICAgIHRoaXMuZGVtb1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwiY2xvc2VkXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0RGVtbygpIHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHRleHQgPSB0aGlzLnRleHRhcmVhLnZhbHVlXHJcblxyXG4gICAgICAgICAgICBpZiAodGV4dC50cmltKCkuaW5kZXhPZihcIiBcIikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgcmFuZG9tIHRhYmxlXHJcbiAgICAgICAgICAgICAgICBsZXQgbiA9IHBhcnNlSW50KHRleHQudHJpbSgpKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuIDwgMiB8fCBuJTIgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgbnVtYmVyIHBhc3NlZFwiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJlZmVyZW5jZUxpc3QgPSBQcmVmZXJlbmNlTGlzdC5jcmVhdGVSYW5kb20obilcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0RGljdGlvbmFyeShudWxsKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRhYmxlIGZyb20gaW5wdXRcclxuICAgICAgICAgICAgICAgIGxldCBzdHJpbmdQYXJzZXIgPSBuZXcgU3RyaW5nUGFyc2VyKClcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZSA9IHN0cmluZ1BhcnNlci5wYXJzZSh0ZXh0LCB0aGlzLnRleHRhcmVhKVxyXG4gICAgICAgICAgICAgICAgbGV0IGRpY3QgPSBzdHJpbmdQYXJzZXIuZ2V0RGljdGlvbmFyeSgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZWZlcmVuY2VMaXN0ID0gbmV3IFByZWZlcmVuY2VMaXN0KHRhYmxlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXREaWN0aW9uYXJ5KGRpY3QpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJlZmVyZW5jZUxpc3Quc29sdmUoKVxyXG4gICAgICAgICAgICBsZXQgaGlzdG9yeSA9IHRoaXMucHJlZmVyZW5jZUxpc3QuZ2V0SGlzdG9yeSgpXHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEhpc3RvcnkoaGlzdG9yeSlcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVXaW5kb3dzKClcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIoKVxyXG5cclxuICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGUpXHJcbiAgICAgICAgICAgIGFsZXJ0KGUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQ29vcmRpbmF0b3IgZnJvbSBcIi4vY29vcmRpbmF0b3JcIlxyXG5cclxubGV0IGNvb3JkaW5hdG9yXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250cm9sc1wiKSxcclxuICAgICAgICBzZXR1cFdpbmRvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dXBXaW5kb3dcIiksXHJcbiAgICAgICAgZGVtb1dpbmRvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVtb1dpbmRvd1wiKVxyXG5cclxuICAgIGNvb3JkaW5hdG9yID0gbmV3IENvb3JkaW5hdG9yKGNvbnRyb2xzLCBzZXR1cFdpbmRvdywgZGVtb1dpbmRvdylcclxufSlcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==